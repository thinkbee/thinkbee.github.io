<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>카테고리: Programming - IT Tech blogging</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="thinkbee blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="thinkbee blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"><meta property="og:type" content="website"><meta property="og:title" content="IT Tech blogging"><meta property="og:url" content="https://blog.thinkbee.kr/"><meta property="og:site_name" content="IT Tech blogging"><meta property="og:description" content="Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://blog.thinkbee.kr/img/og_image.png"><meta property="article:author" content="Gangtai Goh"><meta property="article:tag" content="Machine learning, Deep learning, Python, Data science, Android, Ubuntu, Linux, macOS"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.thinkbee.kr/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.thinkbee.kr"},"headline":"IT Tech blogging","image":["https://blog.thinkbee.kr/img/og_image.png"],"author":{"@type":"Person","name":"Gangtai Goh"},"publisher":{"@type":"Organization","name":"IT Tech blogging","logo":{"@type":"ImageObject","url":"https://blog.thinkbee.kr/images/thinkbee_logo.png"}},"description":"Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark-reasonable.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-5ZH90CZ414" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-5ZH90CZ414');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-1465716454138955" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/thinkbee_logo.png" alt="IT Tech blogging" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Blog</a><a class="navbar-item" href="/documents">Doc</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">카테고리</a></li><li class="is-active"><a href="#" aria-current="page">Programming</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-08-04T22:00:00.000Z" title="8/5/2022, 7:00:00 AM">2022-08-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:40:04.091Z" title="5/12/2023, 4:40:04 PM">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Python/">Python</a></span><span class="level-item">1분안에 읽기 (약 198 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/python-pip_proxy%EC%84%A4%EC%A0%95-80f84ee595a7/">Python : pip 명령 proxy 지정</a></p><div class="content"><p>방화벽 등으로 직접 pip 혹은 conda 설치가 안되는 경우에 프락시 지정을 해서 사용이 가능하다.</p>
<h1 id="Anaconda-proxy"><a href="#Anaconda-proxy" class="headerlink" title="Anaconda proxy"></a>Anaconda proxy</h1><p>사용자 홈디렉토리 <code>.condarc</code> 파일에 proxy 구성을 한다. 만약 프락시 인증서가 필요하면 인증서를 추가한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">proxy_servers:</span><br><span class="line">     http: http://IP_ADDRESS:8080</span><br><span class="line">     https: https://IP_ADDRESS:8080</span><br><span class="line"> ssl_verify: %programdata%\pip\dscert.crt</span><br></pre></td></tr></table></figure>

<h1 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h1><p>pip 명령은 명려에서 옵션 pip proxy 옵션을 사용하거나 pip.ini 로 구성할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade --proxy https://IP_ADDRESS:8080 --trusted-host pypi.python.org --trusted-host pypi.org --trusted-host files.pythonhosted.org matplotlib numpy openpyxl xlrd xlwt pandas</span><br></pre></td></tr></table></figure>

<h3 id="사용자-정의-폴더"><a href="#사용자-정의-폴더" class="headerlink" title="사용자 정의 폴더"></a>사용자 정의 폴더</h3><p>pip는 사용자 구성에서 아래 같이</p>
<ul>
<li>폴더: ~&#x2F;pip</li>
</ul>
<h1 id="pip-ini"><a href="#pip-ini" class="headerlink" title="pip.ini"></a>pip.ini</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line">cert=C:\Users\user\pip\cert.crt</span><br><span class="line">proxy=http://IP_ADDRESS:8080</span><br><span class="line">trusted-host = pypi.python.org</span><br><span class="line">               pypi.org</span><br><span class="line">               files.pythonhosted.org</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-15T00:00:00.000Z" title="9/15/2021, 9:00:00 AM">2021-09-15</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:39:35.541Z" title="5/12/2023, 4:39:35 PM">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Python/">Python</a></span><span class="level-item">3분안에 읽기 (약 483 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/pyenv-Anaconda%EB%B3%91%ED%96%89%EC%82%AC%EC%9A%A9-c14b2f455472/">pyenv 기반 Anaconda 사용하기</a></p><div class="content"><h1 id="PyEnv-Anaconda"><a href="#PyEnv-Anaconda" class="headerlink" title="PyEnv + Anaconda"></a>PyEnv + Anaconda</h1><p>pyenv 와 Anaconda 를 사용하려고 한다. pyenv로 배포본을 관리를 하고, 특정 Local 에서 Anaconda 를 사용하려고 한다.</p>
<p>개발환경은</p>
<ul>
<li>Ubuntu 16.04 or later</li>
<li>Windows 7 or later</li>
<li>macOS 10.12.6 (Sierra) or later (no GPU support)</li>
<li>Raspbian 9.0 or later</li>
</ul>
<hr>
<p>Pyenv 로 기본 python 환경을 사용하고 더해서 Anaconda 를 설치해서 사용하려고 한다.</p>
<h1 id="1-pyenv-Anaconda-설치"><a href="#1-pyenv-Anaconda-설치" class="headerlink" title="1. pyenv - Anaconda 설치"></a>1. pyenv - Anaconda 설치</h1><p>Pyenv로 설치 할 anaconda 버전을 확이한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv install -l | grep anaconda</span><br></pre></td></tr></table></figure>

<p>anaconda 를 설치한다</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv install anaconda3-2021.05</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h3 id="Anaconda-활성화"><a href="#Anaconda-활성화" class="headerlink" title="Anaconda 활성화"></a>Anaconda 활성화</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv versions</span><br><span class="line">  system</span><br><span class="line">* 3.9.5 (set by /home/qkboo/.pyenv/version)</span><br><span class="line">  anaconda3-2021.05</span><br></pre></td></tr></table></figure>

<p>Local 명령을 사용해서 특정 디렉토리에서만 anaconda 환경을 쓰려고 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ cd Jupyter-ML</span><br><span class="line">~$ pyenv local anaconda3-2021.05</span><br><span class="line">$ cat .python-version</span><br><span class="line">anaconda3-2021.05</span><br></pre></td></tr></table></figure>

<h3 id="Anaconda-init"><a href="#Anaconda-init" class="headerlink" title="Anaconda init"></a>Anaconda init</h3><p>쉘 환경에서 conda 를 사용하기 위해서 환경변수를 초기화 해야 하는데 다음 명령으로 실행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ conda init bash</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/condabin/conda</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/conda</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/conda-env</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/activate</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/deactivate</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/etc/profile.d/conda.sh</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/etc/fish/conf.d/conda.fish</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/shell/condabin/Conda.psm1</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/shell/condabin/conda-hook.ps1</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/lib/python3.7/site-packages/xontrib/conda.xsh</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/etc/profile.d/conda.csh</span><br><span class="line">modified      /Users/qkboo/.bash_profile</span><br><span class="line"></span><br><span class="line">==&gt; For changes to take effect, close and re-open your current shell. &lt;==</span><br></pre></td></tr></table></figure>

<p>위 명령은 아래 환경 변수가 작용된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NACONDA_HOME=/Users/who/anaconda3</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$ANACONDA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ANACONDA_HOME</span><br><span class="line"><span class="built_in">export</span> PATH</span><br></pre></td></tr></table></figure>

<p>쉘을 다시 열면 쉘 프롬프트가 변경된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(base) ~$</span><br></pre></td></tr></table></figure>

<h3 id="파이썬-버전-확인"><a href="#파이썬-버전-확인" class="headerlink" title="파이썬 버전 확인"></a>파이썬 버전 확인</h3><p>다른 디렉토리에서는 글로벌 파이썬이 실행된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) qkboo@desktop-goyangi:~$ pyenv which python</span><br><span class="line">/home/qkboo/.pyenv/versions/3.9.5/bin/python</span><br></pre></td></tr></table></figure>

<p>Anaconda 로 지정한 로컬 디렉토리로 이동하면 해당 파이썬 환경이 사용된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) qkboo@desktop-goyangi:~/Jupyter-ML$ pyenv which python</span><br><span class="line">/home/qkboo/.pyenv/versions/anaconda3-2021.05/bin/python</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-07T00:00:00.000Z" title="9/7/2021, 9:00:00 AM">2021-09-07</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:39:30.831Z" title="5/12/2023, 4:39:30 PM">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Python/">Python</a></span><span class="level-item">11분안에 읽기 (약 1684 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/pyenv_3Venv_Anaconda-3193bd01844a/">pyenv 와 Anaconda 병행 사용</a></p><div class="content"><h1 id="PyEnv-Anaconda"><a href="#PyEnv-Anaconda" class="headerlink" title="PyEnv + Anaconda"></a>PyEnv + Anaconda</h1><p>개발환경은</p>
<ul>
<li>Ubuntu 16.04 or later</li>
<li>Windows 7 or later</li>
<li>macOS 10.12.6 (Sierra) or later (no GPU support)</li>
<li>Raspbian 9.0 or later</li>
</ul>
<p>pyenv 와 pyenv-virtualenv 기반으로 Anaconda 를 사용하려고 한다. pyenv로 배포본을 관리를 하고, pyenv-virtualenv와 conda 환경의 가상환경을 이용한다.</p>
<ol>
<li>pyenv-Anaconda 환경</li>
</ol>
<ul>
<li>ananconda 와 miniconda</li>
</ul>
<ol start="2">
<li><a href="#2.-anaconda-&-miniconda-%EB%B3%B5%ED%95%A9%ED%99%98%EA%B2%BD">anaconda &amp; miniconda 복합환경</a></li>
</ol>
<hr>
<h1 id="1-pyenv-Anaconda-설치"><a href="#1-pyenv-Anaconda-설치" class="headerlink" title="1. pyenv - Anaconda 설치"></a>1. pyenv - Anaconda 설치</h1><p>설치할 anaconda 버전을 확이한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv install -l |grep anaconda</span><br></pre></td></tr></table></figure>

<p>anaconda 를 설치한다 - 시간이 많이 걸린다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv install anaconda3-5.3.1</span><br><span class="line">Downloading Anaconda3-5.3.1-MacOSX-x86_64.sh.sh...</span><br><span class="line">-&gt; https://repo.continuum.io/archive/Anaconda3-5.3.1-MacOSX-x86_64.sh</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>anaconda3-5.3.1 버전을 전역에서 사용하도록 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv global anaconda3-5.3.1</span><br></pre></td></tr></table></figure>

<p>global로 지정하고 버전을 확인해 보면</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv versions</span><br><span class="line">  system</span><br><span class="line">  3.8.1</span><br><span class="line">* anaconda3-5.3.1 (<span class="built_in">set</span> by /Users/qkboo/.pyenv/version)</span><br></pre></td></tr></table></figure>

<p>일반적으로 Anaconda 만을 사용한다면 설치후 사용자 쉘 환경에서 conda 를 사용하기 위해서 환경변수를 초기화 해야 하는데 다음 명령으로 실행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ conda init bash</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/condabin/conda</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/conda</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/conda-env</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/activate</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/deactivate</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/etc/profile.d/conda.sh</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/etc/fish/conf.d/conda.fish</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/shell/condabin/Conda.psm1</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/shell/condabin/conda-hook.ps1</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/lib/python3.7/site-packages/xontrib/conda.xsh</span><br><span class="line">no change     /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/etc/profile.d/conda.csh</span><br><span class="line">modified      /Users/qkboo/.bash_profile</span><br><span class="line"></span><br><span class="line">==&gt; For changes to take effect, close and re-open your current shell. &lt;==</span><br></pre></td></tr></table></figure>

<p>위 명령은 아래 환경 변수가 작용해서 conda 의 가상환경을 다루는 쉘 스크립을 실행해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NACONDA_HOME=/Users/who/anaconda3</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$ANACONDA_HOME</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ANACONDA_HOME</span><br><span class="line"><span class="built_in">export</span> PATH</span><br></pre></td></tr></table></figure>

<p>쉘을 다시 열면 쉘 프롬프트가 변경된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(base) qkboo@ ~$</span><br></pre></td></tr></table></figure>

<h3 id="pyenv-기반-Anaconda-사용"><a href="#pyenv-기반-Anaconda-사용" class="headerlink" title="pyenv 기반 Anaconda 사용"></a>pyenv 기반 Anaconda 사용</h3><p>그런데 pyenv 에서 다른 배포본과 Ananconda 를 같이 사용한다면 conda 초기 환경이 아주 불편할 수 있어서 아래 같이 conda 가상환경 시작을 불가능하게 해야 한다.</p>
<p>init conda, the following command write scripts into your shell init file automatically</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">conda init</span><br><span class="line"></span><br><span class="line"># disable init of env &quot;base&quot;</span><br><span class="line">conda config --set auto_activate_base false</span><br></pre></td></tr></table></figure>

<p>보통 conda init 를 해주면 쉘 스크립의 마지막 위치에 삽입된다. 그러므로 <code>.bash_profile</code> 에 있는 pyenv 초기화가 항상 마지막에 실행되도록 하자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="pyenv-와-anaconda-환경의-전환-정리"><a href="#pyenv-와-anaconda-환경의-전환-정리" class="headerlink" title="pyenv 와 anaconda 환경의 전환 정리"></a>pyenv 와 anaconda 환경의 전환 정리</h4><p>Examples of managing virtual environments.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># virtual environments from pyenv</span><br><span class="line">pyenv install 3.6.9</span><br><span class="line">pyenv virtualenv 3.6.9 new-env</span><br><span class="line">pyenv activate new-env</span><br><span class="line">pyenv deactive</span><br><span class="line"># You can also use `pyenv local`</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># virtual environments from conda</span><br><span class="line">conda create -n new-env python=3.6</span><br><span class="line">conda env list</span><br><span class="line">conda activate new-env</span><br><span class="line">conda deactivate</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>anaconda 패키지와 환경관리를 할 수 있는 conda 명령어 몇가지를 소개</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 아나콘다의 버전 확인</span><br><span class="line">conda --version</span><br><span class="line"></span><br><span class="line">// 아나콘다 버전 업데이트</span><br><span class="line">conda update conda</span><br><span class="line"></span><br><span class="line">// 설치된 패키지 리스트</span><br><span class="line">conda list</span><br><span class="line"></span><br><span class="line">// conda 통해 설치 가능한 패키지 검색</span><br><span class="line">conda search <span class="string">&quot;tensorflow&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="conda에서-개발-준비하기"><a href="#conda에서-개발-준비하기" class="headerlink" title="conda에서 개발 준비하기"></a>conda에서 개발 준비하기</h3><p>Anaconda 설치가 완료되면 conda 명령으로 TensorFlow를 사용할 환경을 구성하고 사용해 보자.</p>
<h4 id="가상환경-생성"><a href="#가상환경-생성" class="headerlink" title="가상환경 생성"></a>가상환경 생성</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ conda create -n tensorflow_env</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">The following packages will be downloaded:</span><br><span class="line"></span><br><span class="line">    package                    |            build</span><br><span class="line">    ---------------------------|-----------------</span><br><span class="line">    pip-20.0.2                 |           py37_1         1.9 MB</span><br><span class="line">    tensorboard-2.0.0          |     pyhb38c66f_1         3.3 MB</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">The following NEW packages will be INSTALLED:</span><br><span class="line"></span><br><span class="line">    _tflow_select:        2.3.0-mkl</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">Proceed ([y]/n)?</span><br></pre></td></tr></table></figure>

<p>또한 <code>python=</code> 인자로 파이썬 버전을 지정할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ conda create -n tensorflow python=3.8</span><br></pre></td></tr></table></figure>

<p>현재 생성한 가상환경을 확인해 보자,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(base)$ conda env list</span><br><span class="line"># conda environments:</span><br><span class="line">#</span><br><span class="line">base                  *  /Users/qkboo/.pyenv/versions/anaconda3-5.3.1</span><br><span class="line">deep-learning            /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/envs/deep-learning</span><br></pre></td></tr></table></figure>

<p>새로만든 conda 가상환경을 활성화 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ conda activate tensorflow_env</span><br><span class="line">(tensorflow_env) qkboo@ ~$</span><br></pre></td></tr></table></figure>

<p>가상환경에서 Jupyter Notebook 을 설치한다.</p>
<h3 id="jupyter-notebook-설치"><a href="#jupyter-notebook-설치" class="headerlink" title="jupyter notebook 설치"></a>jupyter notebook 설치</h3><p>활성화한 가상환경에서 Jupyter Notebook 을 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(tensorflow_env)$ conda install jupyter notebook</span><br></pre></td></tr></table></figure>

<p>필요시 nb-extension 설치</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(tensorflow_env)$ conda install -c anaconda-nb-extensions nb_conda</span><br><span class="line">Collecting package metadata (repodata.json): <span class="keyword">done</span></span><br><span class="line">Solving environment: <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Package Plan ##</span></span><br><span class="line"></span><br><span class="line">  environment location: /Users/qkboo/.pyenv/versions/anaconda3-5.3.1/envs/deep_learning</span><br><span class="line"></span><br><span class="line">  added / updated specs:</span><br><span class="line">    - nb_conda</span><br></pre></td></tr></table></figure>

<h1 id="2-anaconda-amp-miniconda-복합환경"><a href="#2-anaconda-amp-miniconda-복합환경" class="headerlink" title="2. anaconda &amp; miniconda 복합환경"></a>2. anaconda &amp; miniconda 복합환경</h1><p>현재 시스템에 pyenv로 파이썬 환경이 anaconda, miniconda 그리고 python 3.9 등이 중복되어 설치되어 있다. pyenv 가 중심이 되어 conda 를 다루기 위해서 miniconda 를 우선으로 구성되어 있다. shell 스크립트 부분이다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># &gt;&gt;&gt; conda initialize &gt;&gt;&gt;</span><br><span class="line"># !! Contents within this block are managed by &#x27;conda init&#x27; !!</span><br><span class="line">__conda_setup=&quot;$(&#x27;/Users/qkboo/.pyenv/versions/miniconda3-latest/bin/conda&#x27; &#x27;shell.bash&#x27; &#x27;hook&#x27; 2&gt; /dev/null)&quot;</span><br><span class="line">if [ $? -eq 0 ]; then</span><br><span class="line">    eval &quot;$__conda_setup&quot;</span><br><span class="line">else</span><br><span class="line">    if [ -f &quot;/Users/qkboo/.pyenv/versions/miniconda3-latest/etc/profile.d/conda.sh&quot; ]; then</span><br><span class="line">        . &quot;/Users/qkboo/.pyenv/versions/miniconda3-latest/etc/profile.d/conda.sh&quot;</span><br><span class="line">    else</span><br><span class="line">        export PATH=&quot;/Users/qkboo/.pyenv/versions/miniconda3-latest/bin:$PATH&quot;</span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line">unset __conda_setup</span><br><span class="line"># &lt;&lt;&lt; conda initialize &lt;&lt;&lt;</span><br><span class="line"></span><br><span class="line"># Pyenv</span><br><span class="line">export PYENV_ROOT=&quot;$HOME/.pyenv&quot;</span><br><span class="line">export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;</span><br><span class="line">eval &quot;$(pyenv init -)&quot;</span><br></pre></td></tr></table></figure>

<p>현재 pyenv 로 설치한 파이썬 환경을 살펴보면,</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">qkboo@ ~$ pyenv versions</span><br><span class="line">  system</span><br><span class="line">  3.8.1</span><br><span class="line">* 3.8.7 (set by /Users/qkboo/.pyenv/version)</span><br><span class="line">  3.8.7/envs/opencv4</span><br><span class="line">  3.8.7/envs/tf2_build</span><br><span class="line">  3.9.1</span><br><span class="line">  anaconda3-5.3.1</span><br><span class="line">  anaconda3-5.3.1/envs/opencv3</span><br><span class="line">  anaconda3-5.3.1/envs/opencv4</span><br><span class="line">  anaconda3-5.3.1/envs/py27</span><br><span class="line">  miniconda3-latest</span><br><span class="line">  miniconda3-latest/envs/deep_learning</span><br><span class="line">  miniconda3-latest/envs/django3</span><br><span class="line">  miniconda3-latest/envs/tf24_cpu</span><br><span class="line">  miniconda3-latest/envs/tf2_p37</span><br><span class="line">  miniconda3-latest/envs/tkinter</span><br><span class="line">  opencv4</span><br><span class="line">  tf2_build</span><br></pre></td></tr></table></figure>

<p>conda 툴을 사용하는 anaconda, miniconda 가 혼재된 환경에서 pyenv로 가상환경을 즉시 활성화 시키면 conda 명령 실행에 혼선을 일으킨다. 예를 들어 위의 가상환경 <strong>anaconda3-5.3.1&#x2F;envs&#x2F;opencv4</strong> 을 pyenv로 활성화 하고 python, conda 명령을 실행해 보면</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">pyenv shell opencv4</span></span><br><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">pyenv version</span></span><br><span class="line">opencv4 (set by PYENV_VERSION environment variable)</span><br><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash"><span class="built_in">which</span> python</span></span><br><span class="line">/Users/qkboo/.pyenv/shims/python</span><br></pre></td></tr></table></figure>

<p>가상환경의 python 위치를 확인해 보고, conda 명령을 찾아 보자,</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">pyenv <span class="built_in">which</span> python</span></span><br><span class="line">/Users/qkboo/.pyenv/versions/opencv4/bin/python</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">pyenv <span class="built_in">which</span> conda</span></span><br><span class="line">pyenv: conda: command not found</span><br><span class="line"></span><br><span class="line">The `conda&#x27; command exists in these Python versions:</span><br><span class="line">  anaconda3-5.3.1</span><br><span class="line">  miniconda3-latest</span><br></pre></td></tr></table></figure>

<p>pyenv 환경 아래 2개의 conda 때문에 혼선이 나타난다.</p>
<p>예를 들어 현재 쉘 환경에서 파이썬 환경 <em>ananconda3-5.3.1</em> 을 사용하도록 하고, conda 를 확인해 보면 명확하게 해당 파이썬 환경의 anaconda 의 가상환경을 가르키지만! conda env 명령의 결과는 다르게 나타낸다.<br>anaconda 뒤에 minicond를 설치해서 miniconda 가상환경이 우선으로 나타난다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">pyenv shell anaconda3-5.3.1</span></span><br><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">pyenv <span class="built_in">which</span> conda</span></span><br><span class="line">/Users/qkboo/.pyenv/versions/anaconda3-5.3.1/bin/conda</span><br><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">conda <span class="built_in">env</span> list</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">conda environments:</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">base                  *  /Users/qkboo/.pyenv/versions/miniconda3-latest</span></span><br><span class="line">deep_learning            /Users/qkboo/.pyenv/versions/miniconda3-latest/envs/deep_learning</span><br><span class="line">django3                  /Users/qkboo/.pyenv/versions/miniconda3-latest/envs/django3</span><br><span class="line">tf24_cpu                 /Users/qkboo/.pyenv/versions/miniconda3-latest/envs/tf24_cpu</span><br><span class="line">tf2_p37                  /Users/qkboo/.pyenv/versions/miniconda3-latest/envs/tf2_p37</span><br><span class="line">tkinter                  /Users/qkboo/.pyenv/versions/miniconda3-latest/envs/tkinter</span><br></pre></td></tr></table></figure>

<p>그래서 가상환경 활성화시 가상환경 디렉토리를 지정해서 사용하자!</p>
<p>그래서 anaconda 와 miniconda 환경을 활성화 시키려면 shell, local, system 명령을 통해 설치된 <strong>파이썬 환경</strong>을 활성화 하고, 해당 파이썬 환경에서 가상환경을 다루는 것이 좋다.</p>
<p>예를 들어 현재 쉘 환경에서 파이썬 환경 <em>ananconda3-5.3.1</em> 을 사용하도록 실제 가상환경 위치를 지정해서 활성화 한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">conda activate .pyenv/versions/anaconda3-5.3.1/envs/opencv4/</span></span><br><span class="line">(opencv4) ~$</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-06T00:00:00.000Z" title="9/6/2021, 9:00:00 AM">2021-09-06</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:39:26.051Z" title="5/12/2023, 4:39:26 PM">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Python/">Python</a></span><span class="level-item">10분안에 읽기 (약 1565 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/pyenv_2Virtualenv-874a43f707f6/">pyenv-virtualenv 사용</a></p><div class="content"><h1 id="pyenv-virtualenv"><a href="#pyenv-virtualenv" class="headerlink" title="pyenv-virtualenv"></a>pyenv-virtualenv</h1><p>virtualenv를 사용하면 파이썬 런타임의 독립성을 한층 더 높일 수 있습니다. pyenv가 파이썬 버전을 관리하는 기능을 제공한다면, virtualenv는 파이썬 구동 환경을 관리합니다. pyenv를 이용하면 컴퓨터에 파이썬 버전 별로 1개의 파이썬 런타임을 설치하고 관리할 수 있습니다. virtualenv를 사용하면 파이썬 버전을 세분화하여 여러 개별 환경으로 구분하여 관리하는 기능을 제공합니다. 예를 들어서 python 3.5.2 런타임을 여러개 구성할 수 있고, 애플리케이션 별로 할당할 수 있습니다. 따라서, pyenv와 virtaulenv를 사용하면 매우 효과적입니다. 이러한 이유로 pyenv의 virtualenv 플러그인을 사용하는 것이 일반적입니다. pyenv-virtualenv 프로젝트는 <a target="_blank" rel="noopener" href="https://github.com/yyuu/pyenv-virtualenv">https://github.com/yyuu/pyenv-virtualenv</a> 에서 개발되고 있습니다.</p>
<h3 id="pyenv-virtualenv-설치"><a href="#pyenv-virtualenv-설치" class="headerlink" title="pyenv-virtualenv 설치"></a>pyenv-virtualenv 설치</h3><p>pyenv-virtualenv는 OS별로 다음과 같이 설치할 수 있습니다.</p>
<h4 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h4><p>pyenv-virtualenv 설치: homebrew</p>
<p>OS X는 homebrew를 이용하여 설치할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install pyenv-virtualenv</span><br></pre></td></tr></table></figure>

<h4 id="리눅스-pyenv-virtualenv-설치"><a href="#리눅스-pyenv-virtualenv-설치" class="headerlink" title="리눅스 pyenv-virtualenv 설치"></a>리눅스 pyenv-virtualenv 설치</h4><p>pyenv를 pyenv-installer로 설치할 때 pyenv-virtualenv 설치가 포함됩니다. pyenv-installer로 pyenv가 설치되었다면 별도의 조치가 필요 없습니다.</p>
<h2 id="pyenv로-virtualenv-생성"><a href="#pyenv로-virtualenv-생성" class="headerlink" title="pyenv로 virtualenv 생성"></a>pyenv로 virtualenv 생성</h2><p>다음과 같은 명령으로 파이썬 환경을 구성합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv virtualenv &lt;vertualenv-name&gt;</span><br></pre></td></tr></table></figure>

<p>은 생략 가능합니다. 버전을 생략할 경우 현재 시스템 버전으로 가상환경이 설정됩니다. virtualenv 플러그인으로 만든 가상환경인 경우 activate, deactivate 명령을 이용하여 활성화&#x2F;비활성화합니다. 가상환경을 활성화&#x2F;비활성화를 위해서는 다음 명령을 사용합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv activate &lt;vertualenv-name&gt;</span><br></pre></td></tr></table></figure>

<p>가상환경 종료는 다음 명령을 사용합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv deactivate</span><br></pre></td></tr></table></figure>

<p>가상환경을 삭제할 경우 다음과 같은 명령을 사용합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv uninstall &lt;version&gt;/&lt;vertualenv-name&gt;</span><br></pre></td></tr></table></figure>

<p>버전을 설치해 봤으니 그 버전 위에 올라갈 virtualenv를 설치해보도록 하자. test라는 이름을 가진 virtualenv를 3.5.2버전 위에 설치해보자.</p>
<p><code>pyenv virtualenv [VERSION_NAME] [VIRTUALENV_NAME]</code> 형식으로 입력해주면 된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv virtualenv 3.5.2 test_virtualenv</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv versions</span><br><span class="line"></span><br><span class="line">* system (set by PYENV_VERSION environment variable)</span><br><span class="line">  3.5.2</span><br><span class="line">  3.5.2/env/test_virtualenv</span><br></pre></td></tr></table></figure>

<p>versions명령어로 3.5.2 위에 test_virtualenv라는 환경이 설치된 것을 확인할 수 있다.</p>
<p>쓰고있는 버전을 옮기려면 똑같이 shell 명령어를 사용하면 된다. activate명령어를 이용해도 된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv shell[or activate] test</span><br></pre></td></tr></table></figure>

<p>shell 명령어는 Python의 버전과 virtualenv에 모두 적용할 수 있는 명령어이고, activate 명령어는 virtualenv에만 사용이 가능하다. shell을 이용해서 다른 버전이나 virtualenv를 사용중이라면 pyenv shell system을 이용하여 기본 버전으로 되돌아올 수 있고, activate를 이용하여 virtualenv를 사용중이라면 pyenv deactivate를 이용하여 사용중인 virtualenv에서 나올 수 있다.</p>
<h4 id="requirements-txt-생성"><a href="#requirements-txt-생성" class="headerlink" title="requirements.txt 생성"></a>requirements.txt 생성</h4><p>test를 하나의 Python 프로젝트라고 생각하자. 이곳에 프로젝트에 필요한 package들을 설치해야 한다. pip로 Django를 설치하고, freeze로 package들 목록을 추출해보자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip install django</span><br><span class="line">$ pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure>

<p>requirements.txt에 Django&#x3D;&#x3D;1.10.1라고 현재 설치된 package가 적혀있다. 이는 pyenv파일에 독립적으로 설치된 package이고, 다른 virtualenv나 버전으로 옮기면 사용할 수 없게 된다. 이로써 의존성 관리 문제를 해결 하게 된 것이다.</p>
<p>다른 개발 환경에서 프로젝트에 설치된 패키지를 동기화하려면 virtualenv를 만들고, shell명령어로 사용 설정을 한 뒤에, requirements.txt파일을 받아서 다음과 같은 명령어를 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install -r requirements.txt</span><br></pre></td></tr></table></figure>

<p>requirements.txt라는 이름은 반드시 정해진 것이 아니라 package목록을 담는 파일이름으로 관습적으로 사용하는 것이다.</p>
<p>귀차니즘: autoenv</p>
<p>pyenv-virtualenv의 단점은 가상환경을 활성화하기 위해서 pyenv activate를 실행해야 한다는 것입니다. autoenv는 Python 프로젝트 진입시점시에 자동으로 virtualenv 환경 로딩하는 기능을 제공합니다. 가상 환경 활성화에 대한 귀차니즘을 없앨수 있습니다.</p>
<p>프로젝트 홈페이지는 다음과 같습니다.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/kennethreitz/autoenv">https://github.com/kennethreitz/autoenv</a><br>설치</p>
<h3 id="autoenv-설치"><a href="#autoenv-설치" class="headerlink" title="autoenv 설치"></a>autoenv 설치</h3><p>위에까지가 Python에만 종속되는 내용이었고, 이번에 설치할 autoenv는 Python뿐만 아니라 모든 명령어에 적용할 수 있다. 다음과 같은 명령어로 설치한다.</p>
<p>$ brew install autoenv<br>이번에도 .bash_profile에 설정을 해줘야한다. 다음과 같은 내용을 맨 밑에 넣어준다.</p>
<p>source $(brew –prefix autoenv)&#x2F;activate.sh<br>autoenv를 이용한 자동화</p>
<p>autoenv는 터미널에서 디렉토리에 접근할 시에, .env파일을 찾아서 그 내용을 자동으로 실행시켜주는 간단한 기능이다. 그렇다면 test디렉토리를 만들어서, 디렉토리에 들어올 때 바로 test_virtualenv virtualenv로 설정되게 해보자! 명령어 한 줄을 입력하는 귀찮음을 덜 수 있는 것이다.</p>
<p>$ mkdir test_virtualenv<br>$ cd test_virtualenv<br>$ vim .env<br>.env파일안에 다음과 같은 내용을 입력하자.</p>
<p>pyenv shell test_virtualenv<br>제일 먼저 디렉토리에 들어가게 되면, .env의 내용을 실행할 것인지 물어보게 된다. 이 때 ‘y’를 입력해서 계속 실행되게 해야한다.</p>
<p>이제 터미널에서 test폴더에 들어갈 때마다 자동으로 test_virtualenv virtualenv를 쓰게 될 것이다! autoenv는 이것 뿐만 아니라 다른 분야에도 무궁무진하게 적용할 수 있다.</p>
<h2 id="bash-prompt"><a href="#bash-prompt" class="headerlink" title="bash prompt"></a>bash prompt</h2><p>아래같이 bash 프롬프트에 가상환경을 표시해 주는 스크립이다.</p>
<p><img src="attachment:5710136c-072d-4136-b251-42f022c763e5.png" alt="image.png"></p>
<ul>
<li>출처: <a target="_blank" rel="noopener" href="https://gist.github.com/frnhr/dba7261bcb6970cf6121">https://gist.github.com/frnhr/dba7261bcb6970cf6121</a></li>
</ul>
<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pyenv">https://github.com/pyenv</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv-virtualenv">https://github.com/pyenv/pyenv-virtualenv</a></li>
<li><a target="_blank" rel="noopener" href="https://towardsdatascience.com/managing-virtual-environment-with-pyenv-ae6f3fb835f8">https://towardsdatascience.com/managing-virtual-environment-with-pyenv-ae6f3fb835f8</a></li>
<li><a target="_blank" rel="noopener" href="http://taewan.kim/post/python_virtual_env/">http://taewan.kim/post/python_virtual_env/</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-09-05T00:00:00.000Z" title="9/5/2021, 9:00:00 AM">2021-09-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:39:20.581Z" title="5/12/2023, 4:39:20 PM">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Python/">Python</a></span><span class="level-item">17분안에 읽기 (약 2493 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/pyenv_1%EC%86%8C%EA%B0%9C%EC%84%A4%EC%B9%98-078a148a14ec/">pyenv 설치</a></p><div class="content"><h1 id="Python-의-pyenv-기반-개발환경"><a href="#Python-의-pyenv-기반-개발환경" class="headerlink" title="Python 의 pyenv 기반 개발환경"></a>Python 의 pyenv 기반 개발환경</h1><blockquote>
<p>데모 환경은 OS X와 리눅스로 한정합니다.</p>
</blockquote>
<p>파이썬에는 Python 2와 Python 3이 공존하고, 파이썬 별로 다수의 서브 버전이 존재합니다. 또한, 파이썬 커뮤니티는 엄청난 수의 패키지를 만들고 공유하고 있습니다. 이러한 패키지들은 개별적으로 여러 버전을 갖고 있습니다.</p>
<h2 id="Python의-dependency-관리"><a href="#Python의-dependency-관리" class="headerlink" title="Python의 dependency 관리"></a>Python의 dependency 관리</h2><p>Node 모듈으로 만들어지는 Javascript 프로젝트는 package.json으로 Dependency를 관리하고, Ruby 프로젝트는 gemfile실행파일으로 관리한다. 그렇다면 Python은 이 문제를 어떻게 해결할까?</p>
<p>Python은 Virtual Environment 를 지원하는 툴으로 이 문제를 해결한다. 각 프로젝트마다 쓰일 가상 환경(virtual environment)를 생성하여 그 프로젝트에 해당되는 Python을 활성화 한 후에 실행시킨다.</p>
<p>또한 가상 환경 안에 설치된 package들은 python의 <code>freeze</code> 명령어를 통해서 requirements.txt라는 파일로 추출되고, 이것을 git같은 버전 관리 도구로 관리하면, 새로운 개발 환경에서도 쉽게 이를 동기화시킬 수 있다.</p>
<h3 id="pyenv란-무엇인가"><a href="#pyenv란-무엇인가" class="headerlink" title="pyenv란 무엇인가?"></a>pyenv란 무엇인가?</h3><p>pyenv란 여러 버전의 Python을 쉽게 바꿔서 쓸 수 있게 해주는 도구이다. 예를 들면 3.5.2버전을 쓰다가, 명령어 한 줄로 2.7.12로 버전을 바꾸어서 쓸 수 있게 해준다. 이는 python-virtualenv와 같이 쓰면 더욱 활용도가 높아진다.</p>
<blockquote>
<p>단, 윈도우는 지원을 안하고 별도의 [pyenv-win[(<a target="_blank" rel="noopener" href="https://github.com/pyenv-win/pyenv-win">https://github.com/pyenv-win/pyenv-win</a>) 을 사용할 수 있다.</p>
</blockquote>
<p>여기 다루는 파이썬 가상환경에 대한 툴은 다음과 같이 요약할 수 있습니다.</p>
<ol>
<li>pyenv</li>
</ol>
<ul>
<li>파이썬 버전을 관리하는 툴.</li>
<li>하나의 컴퓨터에 다양한 파이썬 버전을 설치하고 관리.</li>
<li>프로젝트 홈페이지: <a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv">https://github.com/pyenv/pyenv</a></li>
</ul>
<ol>
<li>pyenv-virtualenv</li>
</ol>
<ul>
<li>virtualenv은 파이썬 환경을 격리하는 툴.</li>
<li>pyenv-virtualenv은 virtualenv의 pyenv 확장 플러그인.</li>
<li>파이썬 버전과 라이브러리의 완전한 격리 환경을 제공.</li>
</ul>
<ol>
<li>autoenv</li>
</ol>
<ul>
<li>autoenv는 디렉터리 이동 시 실행되는 스크립트</li>
<li>pyenv-virtualenv 사용 시 불편한 수작업을 자동화.</li>
<li>특정 프로젝트 폴더로 들어가면 .env파일 실행하여 가상환경 활성화.</li>
</ul>
<ol>
<li>pip</li>
</ol>
<ul>
<li>파이썬 라이브러리를 관리.</li>
</ul>
<h2 id="pyenv-설치"><a href="#pyenv-설치" class="headerlink" title="pyenv 설치"></a>pyenv 설치</h2><h3 id="사전-준비"><a href="#사전-준비" class="headerlink" title="사전 준비"></a>사전 준비</h3><p>Python 3.4 이상은 요구한다. pip로 virtualenv 를 설치가 필요하다.</p>
<p>개발환경은</p>
<ul>
<li>Ubuntu 16.04 or later</li>
<li>Windows 7 or later</li>
<li>macOS 10.12.6 (Sierra) or later (no GPU support)</li>
<li>Raspbian 9.0 or later</li>
</ul>
<h2 id="macOS-설치"><a href="#macOS-설치" class="headerlink" title="macOS 설치"></a>macOS 설치</h2><h4 id="필요-조건"><a href="#필요-조건" class="headerlink" title="필요 조건"></a>필요 조건</h4><p>pyenv를 OS X(맥)에 설치하기 위해서는 xcode command line tools과 zlib가 먼저 설치되어 있어야 합니다. xcode command line tools과 zlib를 OS X에서 설치하는 명령은 다음과 같습니다. 두 명령을 터미널 상에서 실행합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo xcode-select --install</span><br><span class="line">$ brew install homebrew/dupes/zlib</span><br></pre></td></tr></table></figure>

<h4 id="macOS-Homebrew-설치"><a href="#macOS-Homebrew-설치" class="headerlink" title="macOS Homebrew 설치"></a>macOS Homebrew 설치</h4><p>macoS는 homebrew 를 설치해서 사용하는 것을 가정하고 homebrew로 시스템 python 을 설치한다</p>
<p>pyenv를 OS X(맥)에 설치하기 위해서는 xcode command line tools과 zlib가 먼저 설치되어 있어야 합니다. xcode command line tools과 zlib를 OS X에서 설치하는 명령은 다음과 같습니다. 두 명령을 터미널 상에서 실행합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo xcode-select --install</span><br><span class="line">$ brew install homebrew/dupes/zlib</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br><span class="line">export PATH=&quot;/usr/local/bin:/usr/local/sbin:$PATH&quot;</span><br><span class="line">$ brew update</span><br></pre></td></tr></table></figure>

<h3 id="pyenv-설치-macOS"><a href="#pyenv-설치-macOS" class="headerlink" title="pyenv 설치: macOS"></a>pyenv 설치: macOS</h3><p>맥 네이티브로 pyenv를 사용해 Anaconda를 설치하고 텐서플로를 설치해 보자</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install pyenv</span><br></pre></td></tr></table></figure>

<p>pyenv 업그레이드는 다음 명령을 사용합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew upgrade pyenv</span><br></pre></td></tr></table></figure>

<h4 id="환경변수"><a href="#환경변수" class="headerlink" title="환경변수"></a>환경변수</h4><p>pyenv 경로 설정을 위해 아래를 <code>.bash_profile</code> 에 추가한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PYENV_ROOT=<span class="string">&quot;<span class="variable">$HOME</span>/.pyenv&quot;</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PYENV_ROOT</span>/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="comment"># pyenv 초기화</span></span><br><span class="line"><span class="variable">$eval</span> <span class="string">&quot;<span class="subst">$(pyenv init -)</span>&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="CentOS-Oracle-Linux-RHEL-설치"><a href="#CentOS-Oracle-Linux-RHEL-설치" class="headerlink" title="CentOS, Oracle Linux, RHEL 설치"></a>CentOS, Oracle Linux, RHEL 설치</h2><p><a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv/wiki#suggested-build-environment">https://github.com/pyenv/pyenv/wiki#suggested-build-environment</a></p>
<h4 id="사전-준비사항"><a href="#사전-준비사항" class="headerlink" title="사전 준비사항"></a>사전 준비사항</h4><p>RedHat 계열 혹은 Debian 계열에서 아래 같은 패키지가 필요할 수 있다.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv/wiki#suggested-build-environment">https://github.com/pyenv/pyenv/wiki#suggested-build-environment</a></p>
<p>Yum 설치</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install -y zlib-devel bzip2 bzip2-devel \</span><br><span class="line">  readline-devel sqlite sqlite-devel openssl-devel xz xz-devel curl git</span><br></pre></td></tr></table></figure>

<p>우분투 환경에서는 다음과 같은 패키지를 설치합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install --no-install-recommends make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="pyenv-설치-Linux"><a href="#pyenv-설치-Linux" class="headerlink" title="pyenv 설치: Linux"></a>pyenv 설치: Linux</h3><p>리눅스에서 pyenv 설치는 원격 스크립트 pyenv-installer를 사용한다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pyenv/pyenv-installer">https://github.com/pyenv/pyenv-installer</a></li>
</ul>
<p><strong>pyenv-installer</strong> 를 이용하여 pyenv를 설치하면, 다음과 같은 pyenv 플러그인도 설치됩니다.</p>
<ul>
<li>pyenv-doctor</li>
<li>pyenv-pip-rehash</li>
<li>pyenv-update</li>
<li>pyenv-virtualenv</li>
<li>pyenv-which-ext</li>
</ul>
<p>pyenv-installer는 pyenv 설치 스크립트 입니다. rbenv-installer의 스타일을 빌려서 만든 것입니다. pyenv-installer는 리눅스용 쉘 스크립트 파일입니다. pyenv-installer를 이용하여 pyenv를 설치하기 위해서는 curl과 git이 사전에 설치되어 있어야 합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://pyenv.run | bash</span><br></pre></td></tr></table></figure>

<p>pyenv.run 이 실행이 안되면 다른 설치 명령은 다음과 같습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -L \</span><br><span class="line">https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer \</span><br></pre></td></tr></table></figure>

<p>설치후 아래 같이 경로 추가 메시지가 나온다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Load pyenv automatically by adding</span><br><span class="line"># the following to ~/.bashrc:</span><br><span class="line"></span><br><span class="line">export PATH=&quot;/home/qkboo/.pyenv/bin:$PATH&quot;</span><br><span class="line">eval &quot;$(pyenv init -)&quot;</span><br><span class="line">eval &quot;$(pyenv virtualenv-init -)&quot;</span><br></pre></td></tr></table></figure>

<p>pyenv를 최신 버전으로 업데이트해야 할 경우 다음 명령을 수행합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv update</span><br></pre></td></tr></table></figure>

<h3 id="환경변수-적용-및-업데이트"><a href="#환경변수-적용-및-업데이트" class="headerlink" title="환경변수 적용 및 업데이트"></a>환경변수 적용 및 업데이트</h3><p>다음 명령을 터머널에서 수행하여 환경변수를 등록합니다.</p>
<p>이 명령으로 아래 코드가 bash를 사용하는 상황을 가정합니다. zsh를 사용하실 때는 “~&#x2F;.bash_profile“을 “~&#x2F;.zshrc“로 변경하여 실행해야 합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ echo &#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27; &gt;&gt; ~/.bash_profile</span><br><span class="line">$ echo &#x27;export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27; &gt;&gt; ~/.bash_profile</span><br><span class="line">$ echo &#x27;eval &quot;$(pyenv init -)&quot;&#x27; &gt;&gt; ~/.bash_profile</span><br><span class="line">$ source ~/.bash_profile</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="pyenv-사용"><a href="#pyenv-사용" class="headerlink" title="pyenv 사용"></a>pyenv 사용</h2><p>pyenv는 다음과 형태로 실행됩니다.</p>
<p>pyenv {sub-command} [{parameters}….]<br>pyenv가 제공하는 서브 명령은 다음과 같습니다.</p>
<table>
<thead>
<tr>
<th>서브 명령</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>local</td>
<td>현재 디렉터리에 python 버전 확인 및 python 버전 지정</td>
</tr>
<tr>
<td>global</td>
<td>전역으로 설정된 python 버전</td>
</tr>
<tr>
<td>shell</td>
<td>shell에 파이썬 버전을 지정</td>
</tr>
<tr>
<td>install</td>
<td>python-build를 이용하여 파이썬 버전을 설치</td>
</tr>
<tr>
<td>uninstall</td>
<td>지정한 버전의 파이썬을 삭제</td>
</tr>
<tr>
<td>version</td>
<td>현재 활성화된 파이썬 버전 출력</td>
</tr>
<tr>
<td>versions</td>
<td>pyenv로 설치되어 이용 가능한 버전을 출력</td>
</tr>
<tr>
<td>which</td>
<td>활성화된 파이썬 명령의 위치 출력</td>
</tr>
<tr>
<td>whence</td>
<td>지정한 명령을 포함하는 모든 파이썬 버전 출력</td>
</tr>
</tbody></table>
<h3 id="버전-설치"><a href="#버전-설치" class="headerlink" title="버전 설치"></a>버전 설치</h3><p>pyenv로 설치할 수 있는 버전의 목록을 보려면 다음과 같은 명령어를 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv install --list</span><br></pre></td></tr></table></figure>

<p>[list들]<br>엄청나게 많은 버전들이 있을텐데, 여기서는 현재 최신 버전인 3.5.2버전을 설치하도록 하겠다. (목록에서 위로 올리다 보면 있다)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv install 3.5.2</span><br></pre></td></tr></table></figure>

<p>이렇게 하면 설치가 완료된다. 설치하는데에 시간이 조금 오래 걸린다. 설치된 목록을 확인하려면 다음과 같은 명령어를 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv versions</span><br><span class="line"></span><br><span class="line">* system (set by PYENV_VERSION environment variable)</span><br><span class="line">  3.5.2</span><br></pre></td></tr></table></figure>

<h3 id="shell-명령"><a href="#shell-명령" class="headerlink" title="shell 명령"></a>shell 명령</h3><p>설치된 버전은 pyenv versions 명령으로 나타나고, 버전 이름 맨 앞의 *표시는 현재 사용하고 있는 Python버전이다. 현재 쉘에서 다른 버전으로 옮기려면 shell 명령어를 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv shell 3.5.2</span><br></pre></td></tr></table></figure>

<h3 id="Uninstall"><a href="#Uninstall" class="headerlink" title="Uninstall"></a>Uninstall</h3><p>This is handy because removing these versions is trivial:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">rm</span> -rf ~/.pyenv/versions/2.7.15</span><br></pre></td></tr></table></figure>

<p>Of course pyenv also provides a command to uninstall a particular Python version:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv uninstall 2.7.15</span><br></pre></td></tr></table></figure>

<h2 id="Global-amp-Local"><a href="#Global-amp-Local" class="headerlink" title="Global &amp; Local"></a>Global &amp; Local</h2><p>시스템 수준의 버전 지정은 global 명령과 local 명령으로 지정할 수 있다.</p>
<h3 id="global-글로벌-설정"><a href="#global-글로벌-설정" class="headerlink" title="global 글로벌 설정"></a><code>global</code> 글로벌 설정</h3><p>pyenv를 시스템 수준의 python 버전을 설정해서 시스템의 기본 파이썬 버전으로 지정할 때 유용하다.</p>
<p>다음은 컴퓨터의 글로벌 파이썬 버전을 파이썬 2.7.12에서 새로 설치한 파이썬 3.5.3으로 변경하는 예입니다. 아래 명령을 수행한 후, python을 실행하면 Python 3.5.3 버전이 실행됩니다</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv versions</span><br><span class="line">* system</span><br><span class="line">  3.5.3 (<span class="built_in">set</span> by /Users/qkboo/.pyenv/version)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ python --version    ## 현재 파이썬 버전</span><br><span class="line">Python 2.7.12</span><br><span class="line">$ pyenv global 3.5.3  ## 글로벌 파이썬 설정 변경</span><br><span class="line">$ python --version    ## 현재 파이썬 버전</span><br><span class="line">Python 3.5.3</span><br><span class="line">$ pyenv versions      ## pyenv 활성 버전 확인</span><br><span class="line">  system</span><br><span class="line">* 3.5.3 (set by /Users/qkboo/.pyenv/version)</span><br><span class="line">$</span><br></pre></td></tr></table></figure>

<p>global 명령을 내리면 <code>~/.pyenv/version</code> 파일을 해당 버전으로 지정한다</p>
<h3 id="local-로컬-설정"><a href="#local-로컬-설정" class="headerlink" title="local 로컬 설정"></a><code>local</code> 로컬 설정</h3><p>특정 디렉터리에 활성화되는 파이썬 버전을 지정할 수 있습니다. 그리고 로컬 디렉토리 이외에서는 global 설정이 적용됩니다.</p>
<p>다음은 pyenv global과 pyenv local을 사용하는 방법의 예시입니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv versions           <span class="comment">## global 설정 3.5.3</span></span><br><span class="line">  system</span><br><span class="line">  2.7.13</span><br><span class="line">* 3.5.3 (<span class="built_in">set</span> by /home/opc/.pyenv/version)</span><br><span class="line"></span><br><span class="line">$ python -V                <span class="comment">## Global 파이썬 버전</span></span><br><span class="line">Python 3.5.3</span><br><span class="line">$ <span class="built_in">mkdir</span> py2.7</span><br><span class="line">$ <span class="built_in">cd</span> py2.7/</span><br><span class="line">$ pyenv <span class="built_in">local</span> 2.7.13   <span class="comment">## local 설정 2.7.13</span></span><br><span class="line">[py2.7]$ python -V</span><br><span class="line">Python 2.7.13</span><br><span class="line">[py2.7]$ <span class="built_in">ls</span> -al</span><br><span class="line">total 12</span><br><span class="line">drwxrwxr-x   2 opc opc 4096 Sep  8 01:47 .</span><br><span class="line">drwx------. 10 opc 500 4096 Sep  8 01:47 ..</span><br><span class="line">-rw-rw-r--   1 opc opc    7 Sep  8 01:47 .python-version</span><br><span class="line">[py2.7]$ <span class="built_in">cat</span> .python-version  <span class="comment">## local 설정 파일</span></span><br><span class="line">2.7.13</span><br><span class="line">[py2.7]$ <span class="built_in">cd</span> ..                <span class="comment">## global 설정 3.5.3</span></span><br><span class="line">$ python -V</span><br><span class="line">Python 3.5.3</span><br><span class="line">[opc@b4b8b6 ~]$</span><br></pre></td></tr></table></figure>

<p>“pyenv local“를 실행하면 해당 디렉터리에 .python-version 파일이 생기고 이 파일에 활성화될 파이썬 버전이 기록됩니다.</p>
<h2 id="Test-suite"><a href="#Test-suite" class="headerlink" title="Test suite"></a>Test suite</h2><p>Pro Tip: A great way to get peace of mind that the version of Python you just installed is working properly is to run the built-in test suite:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv global 3.8-dev</span><br><span class="line">$ python -m test</span><br></pre></td></tr></table></figure>

<p>This will kick off lots of internal Python tests that will verify your installation. You can just kick back and watch the tests pass.</p>
<h3 id="Using-your-environment-in-IDEs"><a href="#Using-your-environment-in-IDEs" class="headerlink" title="Using your environment in IDEs"></a>Using your environment in IDEs</h3><p>If you are not as sehell person, you can also use pyenv with your favourite IDE. Many editors and IDEs are aware of pyenv environments and will detect them for you. Then you will be able to select the environment for your current workspace from a dropdown menu.</p>
<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ul>
<li><a target="_blank" rel="noopener" href="http://taewan.kim/post/python_virtual_env/">http://taewan.kim/post/python_virtual_env/</a></li>
<li><a target="_blank" rel="noopener" href="https://realpython.com/intro-to-pyenv/#using-pyenv-to-install-python">https://realpython.com/intro-to-pyenv/#using-pyenv-to-install-python</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-05-10T00:00:00.000Z" title="5/10/2021, 9:00:00 AM">2021-05-10</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:39:00.451Z" title="5/12/2023, 4:39:00 PM">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Python/">Python</a></span><span class="level-item">8분안에 읽기 (약 1251 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/JupyterLab_password_systemd-8a92e2396833/">Jupyterlab 에서 password 생성해 systemd 서비스 이용</a></p><div class="content"><h1 id="Jupyter-Lab-systemd-운영"><a href="#Jupyter-Lab-systemd-운영" class="headerlink" title="Jupyter Lab - systemd 운영"></a>Jupyter Lab - systemd 운영</h1><p>jupyterlab 을 Itel 기반의 Ubuntu 시스템에 설치하고 시스템 서비스로 등록하는 과정.</p>
<ol>
<li>Ubuntu 18.04</li>
<li>node.js</li>
<li>Anaconda 2020</li>
</ol>
<p>Restart your shell so the path changes take effect. You can now begin using pyenv.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec &quot;$SHELL&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Anaconda-배포본-설치-Ubuntu"><a href="#Anaconda-배포본-설치-Ubuntu" class="headerlink" title="Anaconda 배포본 설치 (Ubuntu)"></a>Anaconda 배포본 설치 (Ubuntu)</h2><p>우분투용 다운로드</p>
<p><a target="_blank" rel="noopener" href="https://www.anaconda.com/products/individual#linux">https://www.anaconda.com/products/individual#linux</a></p>
<p>다움로드안 쉘 스크립트를 시작한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ~/Downloads/Anaconda3-2020.02-Linux-x86_64.sh</span><br></pre></td></tr></table></figure>

<p>To control whether or not each shell session has the base environment activated or not, run conda config –set auto_activate_base False or True. To run conda from anywhere without having the base environment activated by default, use conda config –set auto_activate_base False. This only works if you have run conda init first.</p>
<p>Anaconda 를 설치하면 대부분의 패키지가 내장되어 있다.</p>
<p>설치후 최신 conda 환경 base를 갱신해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda update -n base -c defaults conda</span><br></pre></td></tr></table></figure>

<h1 id="nvm으로-Node-js-설치"><a href="#nvm으로-Node-js-설치" class="headerlink" title="nvm으로 Node.js 설치"></a>nvm으로 Node.js 설치</h1><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/nvm-sh/nvm#installing-and-updating">https://github.com/nvm-sh/nvm#installing-and-updating</a></li>
</ul>
<p>nvm 설치</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>스크립트로 설치를 완료하면 쉘 시작시 nvm 환경을 구성하기 위해서아래 스크립이 자동으로 현재 쉘 스크립트 파일 끝에 추가된다.</p>
<blockquote>
<p>만약 아래 스크립이 추가 안되면 아래 스크립트를 (~&#x2F;.bash_profile, ~&#x2F;.zshrc, ~&#x2F;.profile, or ~&#x2F;.bashrc).)에 추가한다.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export NVM_DIR=&quot;$([ -z &quot;$&#123;XDG_CONFIG_HOME-&#125;&quot; ] &amp;&amp; printf %s &quot;$&#123;HOME&#125;/.nvm&quot; || printf %s &quot;$&#123;XDG_CONFIG_HOME&#125;/nvm&quot;)&quot;</span><br><span class="line">[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot; # This loads nvm</span><br></pre></td></tr></table></figure>

<p>node.js 설치</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">~$ nvm ls-remote</span><br><span class="line">        v14.0.0</span><br><span class="line">        v14.1.0</span><br><span class="line">       v14.14.0</span><br><span class="line">       v14.15.0   (LTS: Fermium)</span><br><span class="line">       v14.15.1   (Latest LTS: Fermium)</span><br></pre></td></tr></table></figure>

<p>lts 최신 버전 14.0을 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">~$ nvm install --lts 14.15.1</span><br><span class="line">Downloading and installing node v14.15.1...</span><br><span class="line">Downloading https://nodejs.org/dist/v14.15.1/node-v14.15.1-linux-x64.tar.xz...</span><br><span class="line"><span class="comment">######################################################################### 100.0%</span></span><br><span class="line">Computing checksum with <span class="built_in">sha256sum</span></span><br><span class="line">Checksums matched!</span><br><span class="line">Now using node v14.15.1 (npm v6.14.8)</span><br><span class="line">Creating default <span class="built_in">alias</span>: default -&gt; lts/* (-&gt; v14.15.1)</span><br></pre></td></tr></table></figure>

<p>node 버전을 확인</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ node --version</span><br><span class="line">v14.15.1</span><br></pre></td></tr></table></figure>

<h2 id="Conda-에서-jupyterlab-설치"><a href="#Conda-에서-jupyterlab-설치" class="headerlink" title="Conda 에서 jupyterlab 설치"></a>Conda 에서 jupyterlab 설치</h2><p>Anaconda 나 Miniconda 를 설치하고 가상환경을 하나 생성한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ conda create -n tf2 jupyterlab numpy scipy matplotlib tensorflow</span><br><span class="line"></span><br><span class="line">$ conda activate tf2</span><br><span class="line">(tf2) ~$</span><br></pre></td></tr></table></figure>

<h1 id="JupyterLab-실행"><a href="#JupyterLab-실행" class="headerlink" title="JupyterLab 실행"></a>JupyterLab 실행</h1><p>가상환경에서 jupyterlab 을 외부에서 접속 가능하도록 실행하자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(base) $ jupyter-lab --no-browser --ip=* --port=8888 ~/Jupyter-Notebook/</span><br></pre></td></tr></table></figure>

<h4 id="LabConfig-디렉토리"><a href="#LabConfig-디렉토리" class="headerlink" title="LabConfig 디렉토리"></a>LabConfig 디렉토리</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter --paths</span><br><span class="line">config:</span><br><span class="line">    /home/qkboo/.jupyter</span><br><span class="line">    /home/qkboo/anaconda3/envs/py3/etc/jupyter</span><br><span class="line">    /usr/local/etc/jupyter</span><br><span class="line">    /etc/jupyter</span><br><span class="line">data:</span><br><span class="line">    /home/qkboo/.local/share/jupyter</span><br><span class="line">    /home/qkboo/anaconda3/envs/py3/share/jupyter</span><br><span class="line">    /usr/local/share/jupyter</span><br><span class="line">    /usr/share/jupyter</span><br><span class="line">runtime:</span><br><span class="line">    /home/qkboo/.local/share/jupyter/runtime</span><br></pre></td></tr></table></figure>

<h1 id="JupyterLab-환경-설정"><a href="#JupyterLab-환경-설정" class="headerlink" title="JupyterLab 환경 설정"></a>JupyterLab 환경 설정</h1><p>jupyter 의 config 파일을 통해서 인증과 구성을 하자.</p>
<ul>
<li>jupyterlab 3.x 버전: jupyter_server_config.py</li>
<li>jupyterlab 2.x 버전: jupyter_notebook_config.py</li>
</ul>
<p>Jupyter Lab 에서 설정 파일을 생성한다. 다음 명령으로 각각 <code>$HOME/.jupyter/</code> 위치에 jupyter_server_config.py 파일이 생성된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(tf2)$ jupyter lab --generate-config</span><br><span class="line">Writing default config to: /home/qkboo/.jupyter/jupyter_server_config.py</span><br></pre></td></tr></table></figure>

<h3 id="패스워드-사용"><a href="#패스워드-사용" class="headerlink" title="패스워드 사용"></a>패스워드 사용</h3><p>jupyter_notebook_config.py 설정 파일에 비밀번호를 추가하려면 비밀번호를 생성해야 한다. 아래 명령으로 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(tf2)$ jupyter lab password</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">[NotebookPasswordApp] Wrote hashed password to <span class="variable">$HOME</span>\.jupyter\jupyter_server_config.json</span><br></pre></td></tr></table></figure>

<p><code>jupyter_server_config.json</code> 파일로 암호가 생성된다. 생성한 암호를 <code>jupyter_server_config.py</code> 파일의 <strong><em>c.ServerApp.password</em></strong> 항목에 입력해 준다</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[jupyter_server_config.py]</span><br><span class="line"></span><br><span class="line">c.ServerApp.password = <span class="string">&#x27;sha1:*********&#x27;</span>    <span class="comment"># 외부 접속시 사용할 비밀번호</span></span><br><span class="line">c.ServerApp.ip = <span class="string">&#x27;*&#x27;</span>                       <span class="comment"># 어디서든 접속 가능</span></span><br><span class="line">c.ServerApp.port = 8888                       <span class="comment"># 접속에 사용할 포트</span></span><br></pre></td></tr></table></figure>

<p>Jupyter Lab 3.x 버전</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">c.ServerApp.base_url = <span class="string">&#x27;/notebook&#x27;</span></span><br><span class="line">c.ServerApp.enable_mathjax = <span class="literal">True</span></span><br><span class="line">c.ServerApp.password = <span class="string">&#x27;&#x27;</span></span><br><span class="line">c.ServerApp.ip = <span class="string">&#x27;*&#x27;</span></span><br><span class="line">c.ServerApp.port = <span class="number">8888</span></span><br><span class="line">c.ServerApp.port_retries = <span class="number">10</span></span><br><span class="line">c.ServerApp.open_browser = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">c.ServerApp.tornado_settings = &#123;<span class="string">&quot;websocket_max_message_size&quot;</span>: <span class="number">400</span> * <span class="number">1024</span> * <span class="number">1024</span>&#125;</span><br></pre></td></tr></table></figure>

<p>Jupyter Notebook, Jupyterlab 2.x 버전:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.base_url = <span class="string">&#x27;/notebook&#x27;</span></span><br><span class="line">c.NotebookApp.enable_mathjax = <span class="literal">True</span></span><br><span class="line">c.NotebookApp.password = <span class="string">&#x27;&#x27;</span></span><br><span class="line">c.NotebookApp.ip = <span class="string">&#x27;*&#x27;</span></span><br><span class="line">c.NotebookApp.port = <span class="number">8888</span></span><br><span class="line">c.NotebookApp.port_retries = <span class="number">10</span></span><br><span class="line">c.NotebookApp.open_browser = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">c.NotebookApp.tornado_settings = &#123;<span class="string">&quot;websocket_max_message_size&quot;</span>: <span class="number">400</span> * <span class="number">1024</span> * <span class="number">1024</span>&#125;</span><br></pre></td></tr></table></figure>

<h1 id="systemd-구성"><a href="#systemd-구성" class="headerlink" title="systemd 구성"></a>systemd 구성</h1><p>nodejs, jupyter lab 을 시스템 시작 서비스로 등록한다. node.js 경로, jupyterlab 을 위한 시작 환경이 필요하다.</p>
<blockquote>
<p>systemd의 unit 위치는 OS 마다 조금 다른 것 같다. </p>
</blockquote>
<p>여기서는 &#x2F;etc&#x2F;systemd&#x2F;system 밑에 jupyter.service 라는 유닛 파일에 아래 같이 파이썬 환경을 포함해 작성한다.</p>
<p>가상환경을 사용하고 있으므로 systemd unit의 ExecStart 의 python도 가상환경 위치로 지정해 주어야 한다.</p>
<p>유닛 파일: <code>/etc/systemd/system/jupyter.service</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Jupyter-Notebook</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/run/jupyter-notebook.pid</span><br><span class="line"># nodejs path</span><br><span class="line">Environment=<span class="string">&quot;PATH=/home/qkboo/.nvm/versions/node/v12.18.0/bin/:/usr/local/bin:/ usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin&quot;</span></span><br><span class="line"></span><br><span class="line"># anaconda: tf2</span><br><span class="line">ExecStart=/home/qkboo/anaconda3/envs/tf2/bin/jupyter-lab --config /home/qkboo/Home/mybook_config.py</span><br><span class="line">User=qkboo</span><br><span class="line">Group=qkboo</span><br><span class="line">WorkingDirectory=/home/qkboo/Home/Jupyter-Notebook/</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=<span class="number">10</span></span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<h2 id="유닛-파일-등록과-시작"><a href="#유닛-파일-등록과-시작" class="headerlink" title="유닛 파일 등록과 시작"></a>유닛 파일 등록과 시작</h2><p>jupyter.service 파일을 등록한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">enable</span> jupyter</span><br></pre></td></tr></table></figure>

<p>등록한 유닛 파일을 확인해 보자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl list-unit-files | grep jupyter</span><br><span class="line">jupyter_book.service                disabled        enabled</span><br><span class="line">jupyter.service                     enabled         enabled</span><br></pre></td></tr></table></figure>

<p>그리고 데몬을 리로드 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl start jupyter</span><br></pre></td></tr></table></figure>

<p>실행한 서비스를 종료하려면</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl stop jupyter</span><br></pre></td></tr></table></figure>


<p>실행 상태를 확인한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl status jupyter</span><br></pre></td></tr></table></figure>


<h2 id="유닛-파일-등록-해지"><a href="#유닛-파일-등록-해지" class="headerlink" title="유닛 파일 등록 해지"></a>유닛 파일 등록 해지</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl <span class="built_in">disable</span> jupyter</span><br><span class="line">Removed /etc/systemd/system/multi-user.target.wants/jupyter.service.</span><br></pre></td></tr></table></figure>

<h2 id="서비스-상태"><a href="#서비스-상태" class="headerlink" title="서비스 상태"></a>서비스 상태</h2><p>해당 서비스 상태 확인</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl status jupyter</span><br></pre></td></tr></table></figure>

<p>구동에 실패한 서비스 보기</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl list-units --state=failed</span><br></pre></td></tr></table></figure>

<p>enabled 상태인 서비스 목록</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl list-units --state=enabled</span><br></pre></td></tr></table></figure>


<hr>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-06-03T04:00:00.000Z" title="6/3/2020, 1:00:00 PM">2020-06-03</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-01-12T17:25:38.000Z" title="1/13/2023, 2:25:38 AM">2023-01-13</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">5분안에 읽기 (약 709 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/opencv3-install(virtualenv)-68da66ad7982/">[OpenCV] virtualenv 이용 설치 </a></p><div class="content"><h1 id="OpenCV-설치"><a href="#OpenCV-설치" class="headerlink" title="OpenCV 설치"></a>OpenCV 설치</h1><p>OpenCV 를 파이썬 기본 패키지 관리자 pip 와 venv 가상환경을 이용해서 윈도우즈, 맥 및 리눅스에서 OpenCV 를 설치하는 과정을 살펴보겠다.</p>
<ul>
<li><ol>
<li>윈도우즈에서</li>
</ol>
</li>
<li><ol start="2">
<li>macOS에서</li>
</ol>
</li>
<li><ol start="3">
<li>Linux에서</li>
</ol>
</li>
</ul>
<hr>
<h2 id="1-윈도우즈-pip-기반-OpenCV-설치"><a href="#1-윈도우즈-pip-기반-OpenCV-설치" class="headerlink" title="1) 윈도우즈 pip 기반 OpenCV 설치"></a>1) 윈도우즈 pip 기반 OpenCV 설치</h2><p>윈도우 기반에서 OpenCV 를 사용하기 위해서 pip 기반으로 설치를 해보자.</p>
<h4 id="whl-파일로-설치"><a href="#whl-파일로-설치" class="headerlink" title="whl 파일로 설치"></a>whl 파일로 설치</h4><p>윈도우에서 opencv를 빌드된 버전을 설치하기 위해서 <a target="_blank" rel="noopener" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv">https://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv</a> 에 있는 .whl 파일을 다운로드 받느다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; pip install c:\downloads\opencv_python‑3.3.1‑cp36‑cp36m‑win_amd64.whl</span><br></pre></td></tr></table></figure>

<h3 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h3><p>OpenCV의 main module만 사용한다면 아래처럼 설치하면 됩니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; pip install opencv-python</span><br></pre></td></tr></table></figure>

<p>만약 main module과 extra module을 같이 사용하고 싶다면 아래처럼 설치합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; pip install opencv-contrib-python</span><br></pre></td></tr></table></figure>

<h2 id="2-virtualenv-가상환경에서-openCV-설치"><a href="#2-virtualenv-가상환경에서-openCV-설치" class="headerlink" title="2) virtualenv 가상환경에서 openCV 설치"></a>2) virtualenv 가상환경에서 openCV 설치</h2><h3 id="Python-가상환경과-Opencv"><a href="#Python-가상환경과-Opencv" class="headerlink" title="Python 가상환경과 Opencv"></a>Python 가상환경과 Opencv</h3><p>파이썬 개발시 virtualenv 를 사용한다면 OpenCV 라이브러리를 연결해 줄 필요가 있다. virtualenv 가상환경 생성시 파이썬 라이브러리는 복사가 안된다 그래서 가상환경 생성후에 cv2.so 라이브러리를 링크해줄 필요가 있다.</p>
<h4 id="가상환경에-cv2-so-연결하기"><a href="#가상환경에-cv2-so-연결하기" class="headerlink" title="가상환경에 cv2.so 연결하기"></a>가상환경에 cv2.so 연결하기</h4><p>python2 가상환경 <strong>cv3python2</strong> 가 있고, 여기에 OpenCV 를 사용하려면 다음 같이 cv2.so 라이브러리를 링크해 준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.virtualenvs/cv3python2/lib/python2.7/site-packages/</span><br><span class="line">$ <span class="built_in">ln</span> -s /usr/local/lib/python2.7/dist-packages/cv2.so cv2.so</span><br></pre></td></tr></table></figure>

<p>역시 python3 가상환경 <strong>cv3python3</strong> 가 있다면 python3 라이브러리에 있는 cv2.so 라이브러리를 링크해 준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.virtualenvs/cv3python3/lib/python3.4/site-packages/</span><br><span class="line">$ <span class="built_in">ln</span> -s /usr/local/lib/python3.4/dist-packages/cv2.cpython-34m.so cv2.so</span><br></pre></td></tr></table></figure>

<p>또한 cv2.so를 사용하기 위해서 각 가상환경에 numpy를 설치해 준다. Raspberry Pi 2에서 numpy를 pip로 설치할 때 약 10분 이상 소요된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ workon cv3python2</span><br><span class="line">(cv3python2) :~/ $ pip install numpy</span><br><span class="line"></span><br><span class="line">$ workon cv3python3</span><br><span class="line">(cv3python3) :~/ $ pip install numpy</span><br></pre></td></tr></table></figure>

<p>마직막으로 파이썬을 실행하고 cv2를 테스트한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(cv3python3) ~/$ python</span><br><span class="line">Python 3.4.2 (default, Oct 19 2014, 13:31:11)</span><br><span class="line">[GCC 4.9.1] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import cv2</span><br><span class="line">&gt;&gt;&gt; cv2.__version__</span><br><span class="line">&#x27;3.1.0&#x27;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h2 id="OpenCV-테스트"><a href="#OpenCV-테스트" class="headerlink" title="OpenCV 테스트"></a>OpenCV 테스트</h2><p><a target="_blank" rel="noopener" href="https://cinema4dr12.tistory.com/1283">https://cinema4dr12.tistory.com/1283</a></p>
<p>파이썬을 실행해 cv2 라이브러리를 사용해 보자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ python</span><br><span class="line">Python 3.4.2 (default, Oct 19 2014, 13:31:11)</span><br><span class="line">[GCC 4.9.1] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import cv2</span><br><span class="line">&gt;&gt;&gt; cv2.__version__</span><br><span class="line">&#x27;3.1.0&#x27;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>시스템에서 파이썬이 두 개 이상 설치되어 있으면 일반적을 Python2.7 버전이 기본 파아썬 이다.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ python3</span><br><span class="line">Python 3.4.2 (default, Oct 19 2014, 13:31:11)</span><br><span class="line">[GCC 4.9.1] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import cv2</span><br><span class="line">&gt;&gt;&gt; cv2.__version__</span><br><span class="line">&#x27;3.1.0-dev&#x27;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><ul>
<li><p><a target="_blank" rel="noopener" href="http://embedonix.com/articles/image-processing/installing-opencv-3-1-0-on-ubuntu/">installing-opencv-3-1-0-on-ubuntu</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.pyimagesearch.com/2015/07/27/installing-opencv-3-0-for-both-python-2-7-and-python-3-on-your-raspberry-pi-2/">Install OpenCV3 for both Python2, Pytnon3</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.pyimagesearch.com/2015/07/20/install-opencv-3-0-and-python-3-4-on-ubuntu/">Install OpenCV3.0 and Python3.4</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-06-03T00:00:00.000Z" title="6/3/2020, 9:00:00 AM">2020-06-03</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-01-12T17:24:45.000Z" title="1/13/2023, 2:24:45 AM">2023-01-13</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">7분안에 읽기 (약 992 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/opencv3-install(conda)-41d1e62fd092/">[OpenCV] anaconda 이용 설치 </a></p><div class="content"><h1 id="OpenCV-설치"><a href="#OpenCV-설치" class="headerlink" title="OpenCV 설치"></a>OpenCV 설치</h1><p>OpenCV 를 설치하기 위해서 소스 빌드, 패키지 설치 방법이 있다. 여기서 pip 기반 가상환경 그리고 Anaconda 를 사용한다는 가정에서 윈도우즈, 맥에서 OpenCV 를 설치하는 과정을 살펴보겠다.</p>
<ul>
<li><ol>
<li>윈도우즈에서</li>
</ol>
</li>
<li><ol start="2">
<li>macOS에서</li>
</ol>
</li>
<li><ol start="3">
<li>Linux에서</li>
</ol>
</li>
</ul>
<hr>
<h2 id="1-윈도우즈에서-OpenCV-설치"><a href="#1-윈도우즈에서-OpenCV-설치" class="headerlink" title="1) 윈도우즈에서 OpenCV 설치"></a>1) 윈도우즈에서 OpenCV 설치</h2><p>윈도우 기반에서 OpenCV 를 사용하기 위해서 Anaconda 배포본을 사용하는 것이 가장 쉽다.</p>
<h4 id="whl-파일로-설치"><a href="#whl-파일로-설치" class="headerlink" title="whl 파일로 설치"></a>whl 파일로 설치</h4><p>윈도우에서 opencv를 빌드된 버전을 설치하기 위해서 <a target="_blank" rel="noopener" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv">https://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv</a> 에 있는 .whl 파일을 다운로드 받느다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; pip install c:\downloads\opencv_python‑3.3.1‑cp36‑cp36m‑win_amd64.whl</span><br></pre></td></tr></table></figure>

<h3 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h3><p>OpenCV의 main module만 사용한다면 아래처럼 설치하면 됩니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; pip install opencv-python</span><br></pre></td></tr></table></figure>

<p>만약 main module과 extra module을 같이 사용하고 싶다면 아래처럼 설치합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; pip install opencv-contrib-python</span><br></pre></td></tr></table></figure>

<h3 id="conda-명령으로-설치하기"><a href="#conda-명령으로-설치하기" class="headerlink" title="conda 명령으로 설치하기"></a>conda 명령으로 설치하기</h3><p>Anaconda 3가 설치되어 있다면 명령어 한 줄 입력만으로도 거의 최신 버전(글 작성시 버전 3.6.0)의 Python-OpenCV 라이브러리를 설치할 수 있다:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; conda install -c conda-forge opencv</span><br></pre></td></tr></table></figure>

<p>conda-forge에 등록되어 있는 OpenCV 라이브러리에 대한 상세한 설명은 <a target="_blank" rel="noopener" href="https://anaconda.org/conda-forge/opencv">링크</a>를 통해 확인할 수 있습니다. 필요한 경우, python virtualenv를 생성하여 개발환경 패키지를 관리할 수 있다.</p>
<p>OpenCV 3.3의 가장 큰 변화는 <a target="_blank" rel="noopener" href="https://github.com/opencv/opencv/wiki/Deep-Learning-in-OpenCV">Deep Learning in OpenCV</a> 라고 할 수 있겠습니다. 해당 링크에서 Deep Learning 관련 추가된 사항을 확인할 수 있습니다. 이외에 자세한 변경 로그는 OpenCV Change Logs Version:3.3을 참고하시면 되겠습니다.</p>
<blockquote>
<p>여담으로 최신 버전 OpenCV 3.3.1 버전 이후에는 JavaScript Interface가 추가되어 인터랙티브 웹-기반 OpenCV 어플리케이션 구현이 공식적으로 가능해졌다고 한다.</p>
</blockquote>
<hr>
<h2 id="OpenCV-테스트"><a href="#OpenCV-테스트" class="headerlink" title="OpenCV 테스트"></a>OpenCV 테스트</h2><p><a target="_blank" rel="noopener" href="https://cinema4dr12.tistory.com/1283">https://cinema4dr12.tistory.com/1283</a></p>
<p>파이썬을 실행해 cv2 라이브러리를 사용해 보자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ python</span><br><span class="line">Python 3.4.2 (default, Oct 19 2014, 13:31:11)</span><br><span class="line">[GCC 4.9.1] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import cv2</span><br><span class="line">&gt;&gt;&gt; cv2.__version__</span><br><span class="line">&#x27;3.1.0&#x27;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>시스템에서 파이썬이 두 개 이상 설치되어 있으면 일반적을 Python2.7 버전이 기본 파아썬 이다.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ python3</span><br><span class="line">Python 3.4.2 (default, Oct 19 2014, 13:31:11)</span><br><span class="line">[GCC 4.9.1] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import cv2</span><br><span class="line">&gt;&gt;&gt; cv2.__version__</span><br><span class="line">&#x27;3.1.0-dev&#x27;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Python-가상환경과-Opencv"><a href="#Python-가상환경과-Opencv" class="headerlink" title="Python 가상환경과 Opencv"></a>Python 가상환경과 Opencv</h3><p>파이썬 개발시 virtualenv 를 사용한다면 OpenCV 라이브러리를 연결해 줄 필요가 있다. virtualenv 가상환경 생성시 파이썬 라이브러리는 복사가 안된다 그래서 가상환경 생성후에 cv2.so 라이브러리를 링크해줄 필요가 있다.</p>
<h4 id="가상환경에-cv2-so-연결하기"><a href="#가상환경에-cv2-so-연결하기" class="headerlink" title="가상환경에 cv2.so 연결하기"></a>가상환경에 cv2.so 연결하기</h4><p>python2 가상환경 <strong>cv3python2</strong> 가 있고, 여기에 OpenCV 를 사용하려면 다음 같이 cv2.so 라이브러리를 링크해 준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.virtualenvs/cv3python2/lib/python2.7/site-packages/</span><br><span class="line">$ <span class="built_in">ln</span> -s /usr/local/lib/python2.7/dist-packages/cv2.so cv2.so</span><br></pre></td></tr></table></figure>

<p>역시 python3 가상환경 <strong>cv3python3</strong> 가 있다면 python3 라이브러리에 있는 cv2.so 라이브러리를 링크해 준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~/.virtualenvs/cv3python3/lib/python3.4/site-packages/</span><br><span class="line">$ <span class="built_in">ln</span> -s /usr/local/lib/python3.4/dist-packages/cv2.cpython-34m.so cv2.so</span><br></pre></td></tr></table></figure>

<p>또한 cv2.so를 사용하기 위해서 각 가상환경에 numpy를 설치해 준다. Raspberry Pi 2에서 numpy를 pip로 설치할 때 약 10분 이상 소요된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ workon cv3python2</span><br><span class="line">(cv3python2) :~/ $ pip install numpy</span><br><span class="line"></span><br><span class="line">$ workon cv3python3</span><br><span class="line">(cv3python3) :~/ $ pip install numpy</span><br></pre></td></tr></table></figure>

<p>마직막으로 파이썬을 실행하고 cv2를 테스트한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(cv3python3) ~/$ python</span><br><span class="line">Python 3.4.2 (default, Oct 19 2014, 13:31:11)</span><br><span class="line">[GCC 4.9.1] on linux</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line">&gt;&gt;&gt; import cv2</span><br><span class="line">&gt;&gt;&gt; cv2.__version__</span><br><span class="line">&#x27;3.1.0&#x27;</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Gstreamer"><a href="#Gstreamer" class="headerlink" title="Gstreamer"></a>Gstreamer</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install python3-gst-1.0</span><br></pre></td></tr></table></figure>

<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><p><a target="_blank" rel="noopener" href="http://embedonix.com/articles/image-processing/installing-opencv-3-1-0-on-ubuntu/">installing-opencv-3-1-0-on-ubuntu</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.pyimagesearch.com/2015/07/27/installing-opencv-3-0-for-both-python-2-7-and-python-3-on-your-raspberry-pi-2/">Install OpenCV3 for both Python2, Pytnon3</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://www.pyimagesearch.com/2015/07/20/install-opencv-3-0-and-python-3-4-on-ubuntu/">Install OpenCV3.0 and Python3.4</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-06-02T05:29:00.000Z" title="6/2/2020, 2:29:00 PM">2020-06-02</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-01-12T17:23:40.000Z" title="1/13/2023, 2:23:40 AM">2023-01-13</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">10분안에 읽기 (약 1462 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/opencv3-build-c0adf4252264/">[OpenCV] Source build </a></p><div class="content"><p>OpenCV를 사용하는데 여러 방법이 있겠지만 SBC 컴퓨터들에서 소스로 빌드해서 사용해야할 경우가 있다.</p>
<h1 id="OpenCV-소스-빌드"><a href="#OpenCV-소스-빌드" class="headerlink" title="OpenCV 소스 빌드"></a>OpenCV 소스 빌드</h1><p>여기서 OpenCV를 개발 도구와 라이브러리들과 함게 소스를 빌드해서 사용하는 방법을 살펴보겠습니다.</p>
<ul>
<li>Raspberry Pi 3: Raspbian Jessie</li>
<li>Odroid C2: Armbian</li>
<li>ROCK64: Armbian</li>
</ul>
<p>빌드는 OpenCV 3.1.1 버전을 대상으로 수행했다.</p>
<h2 id="OpenCV3-1-빌드로-설치"><a href="#OpenCV3-1-빌드로-설치" class="headerlink" title="OpenCV3.1 빌드로 설치"></a>OpenCV3.1 빌드로 설치</h2><p><a target="_blank" rel="noopener" href="http://docs.opencv.org/3.1.0/df/d65/tutorial_table_of_content_introduction.html">http://docs.opencv.org/3.1.0/df/d65/tutorial_table_of_content_introduction.html</a></p>
<p>OpenCV 3.1를 빌드하는데 필요한 패키지</p>
<ul>
<li>GCC 4.4.x or later</li>
<li>CMake 2.8.7 or higher</li>
<li>Git</li>
<li>GTK+2.x or higher, including headers (libgtk2.0-dev)</li>
<li>pkg-config</li>
<li>Python 2.6 or later and Numpy 1.5 or later with developer packages ( python-dev, python-numpy)</li>
<li>ffmpeg or libav development packages: libavcodec-dev, libavformat-dev, libswscale-dev</li>
<li>[optional] libtbb2 libtbb-dev</li>
<li>[optional] libdc1394 2.x</li>
<li>[optional] libjpeg-dev, libpng-dev, libtiff-dev, libjasper-dev, libdc1394-22-dev</li>
</ul>
<p>그리고 VideoStreaming이 필요하면 gstramer 필요.</p>
<h3 id="패키지-설치"><a href="#패키지-설치" class="headerlink" title="패키지 설치"></a>패키지 설치</h3><p>기존 패키지로 설치되 opencv가 있으면 제거한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt remove libopencv</span><br><span class="line">$ sudo apt remove opencv</span><br></pre></td></tr></table></figure>

<p>최신 소프트웨어 상태로 업데이트 합니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt update</span><br><span class="line">$ sudo apt upgrade</span><br></pre></td></tr></table></figure>

<p>먼저 컴파일러와 빌드 관련 패키지를 설치합니다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install build-essential</span><br><span class="line">$ sudo apt install cmake git libgtk2.0-dev pkg-config libavcodec-dev libavformat-dev libswscale-dev</span><br></pre></td></tr></table></figure>

<p>GTK 개발용 라이브러리는 GUI를 구성할 때 필요하다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install libgtk-3-dev</span><br></pre></td></tr></table></figure>

<p>이미지 처리에 필요한 패키지를 설치한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install libgphoto2-dev libjpeg-dev  libtiff-dev libtiff5-dev libjasper-dev libpng12-dev libpng-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>libtbb2 libtbb-dev</li>
</ul>
<p>필요하다면 비디오 입출력 관련한 패키지를 설치해야 한다. OpenCV에서 비디오 파일을 읽는데 필요하다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev</span><br></pre></td></tr></table></figure>

<p>libdc1394-22-dev</p>
<p>필요하면 스트리밍 처리에 필요한 gstreamer를 설치한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install gstreamer-1.0</span><br></pre></td></tr></table></figure>

<p>OpenCV 안에서 다양한 최적화 작업에 필요한 다음 패키지를 설치한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install libatlas-base-dev gfortran</span><br></pre></td></tr></table></figure>

<p>마지막으로 파이썬에서 사용한다면 꼭 <code>numpy</code> 를 설치해야 한다. numpy 는 pip로 설치해야 한다.</p>
<ul>
<li>OpenCV Python에서 이미지를 NumPy의 다차원배열로 표현해 사용하고 있다:</li>
</ul>
<p>시스템에 Python2.7과 python3.4가 설치되어 있다면, 각 pip버전을 명시해서 각각 설치해야 하는 듯 하다. numpy가 제대로 인식이 안되면 Opencv용 python 모듈이 빌드가 안된다.</p>
<blockquote>
<p>Raspbian jessie 2016-09-23 버전 이후에는 numpy가 기본으로 설치되어 있다.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ sudo pip2 install numpy</span><br><span class="line">~$ sudo pip3 install numpy</span><br></pre></td></tr></table></figure>

<ul>
<li>Raspberry Pi 2에서 numpy를 pip로 설치할 때 약 10분 이상 소요된다.</li>
</ul>
<p>혹은 업그레이드 해준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pip2 install --upgrade numpy</span><br><span class="line">$ sudo pip3 install --upgrade numpy</span><br></pre></td></tr></table></figure>

<p>numpy 설치후 다음 같이 제대로 동작하는지 확인해 보자</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$:~ $ python2</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$:~ $ python3</span><br><span class="line">Python 3.4.2 (default, Oct 19 2014, 13:31:11)</span><br><span class="line">[GCC 4.9.1] on linux</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; import numpy as np</span><br><span class="line">&gt;&gt;&gt; np.__version__</span><br><span class="line"><span class="string">&#x27;1.10.4&#x27;</span></span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure>

<p>파이썬에서 사용하려면 다음 같이 파이썬 관련 라이브러리가 필요</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install python-dev python3-dev python-numpy python3-numpy</span><br></pre></td></tr></table></figure>

<blockquote>
<p>개발환경을 <strong>apt</strong> 방식으로 구성했다면, numpy도 apt로 설치 할 수 있다 – 왠지 잘 안됐다.<br>$ sudo apt install python-numpy</p>
</blockquote>
<blockquote>
<p>마지막으로 파이썬에서 <code>matplotlib</code>를 이용한다면 <strong>python3-gtk</strong> 패키지를 설치해 준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sudo</span> apt install python3-gtk</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="Opencv-다운로드-및-빌드-확경-구성"><a href="#Opencv-다운로드-및-빌드-확경-구성" class="headerlink" title="Opencv 다운로드 및 빌드 확경 구성"></a>Opencv 다운로드 및 빌드 확경 구성</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> ~</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/Itseez/opencv.git</span><br><span class="line">$ <span class="built_in">cd</span> opencv</span><br><span class="line">$ git checkout 3.1.0</span><br></pre></td></tr></table></figure>

<p>빌드를 설정하기 위해서 <strong>build</strong>폴더를 만든다.</p>
<blockquote>
<p>파이썬 환경이 있는 <strong>cv</strong> 가상환경</p>
</blockquote>
<p>build 를 준비</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~$ <span class="built_in">cd</span> opencv</span><br><span class="line">~$ <span class="built_in">mkdir</span> build</span><br><span class="line">~$ <span class="built_in">cd</span> build</span><br></pre></td></tr></table></figure>

<p>빌드를 수행</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">~$ cmake -D CMAKE_BUILD_TYPE=RELEASE \</span><br><span class="line">-D CMAKE_INSTALL_PREFIX=/usr/local \</span><br><span class="line">-D INSTALL_C_EXAMPLES=OFF \</span><br><span class="line">-D INSTALL_PYTHON_EXAMPLES=ON  \</span><br><span class="line">-D BUILD_EXAMPLES=ON ..</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">--   Python 2:</span><br><span class="line">--     Interpreter:                 /usr/bin/python2.7 (ver 2.7.9)</span><br><span class="line">--</span><br><span class="line">--   Python 3:</span><br><span class="line">--     Interpreter:                 /usr/bin/python3.4 (ver 3.4.2)</span><br><span class="line">--</span><br><span class="line">--   Python (<span class="keyword">for</span> build):            /usr/bin/python2.7</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>위 스크립은 OpenCV 3.1.0의 CMake 빌드 버그로, OpenCV 3.0.0 까지 <em>-D INSTALL_C_EXAMPLES&#x3D;ON</em>으로 빌드했지만 3.1.0에서는 -D INSTALL_C_EXAMPLES&#x3D;OFF로 해야한다.<br>또한 opencv_contrib 모듈을 함께 빌드한다면 <em>-D OPENCV_EXTRA_MODULES_PATH&#x3D;~&#x2F;opencv_contrib&#x2F;modules</em>를 함께 사용한다.</p>
</blockquote>
<h3 id="컴파일과-설치"><a href="#컴파일과-설치" class="headerlink" title="컴파일과 설치"></a>컴파일과 설치</h3><p>그리고 컴파일 한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">~(cv)$ make -j4       <span class="comment"># RPi2</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">[100%] Built target example_ocl_tvl1_optical_flow</span><br><span class="line"></span><br><span class="line">real    173m22.432s</span><br><span class="line">user    165m58.970s</span><br><span class="line">sys 5m7.060s</span><br></pre></td></tr></table></figure>

<blockquote>
<p>싱글로 make시 Raspberry Pi 2 에서 빌드시 약 3시간 소요.<br>-j 옵션을 이용시 45분 이상 절약.</p>
</blockquote>
<p>빌드된 결과중에 python2, python3 관련해서 라이브러리가 제대로 빌드되었는지 라이브러리 폴더를 확인한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls lib/cv2.so</span><br><span class="line">$ ls lib/python3/cv2.cpython-34m.so</span><br></pre></td></tr></table></figure>

<p>이 두 라이브러리가 생성되 있으면 빌드가 제대로 된 것이다.</p>
<p>이제 로컬 시스템에 설치를 한다. 보통 Python2.7과 Python3.4가 함께 설치되 상태일 수 있는데 이 경우 시스템에 기본 Python2.7 환경을 기반으로 설치가 된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(cv)$ sudo make install</span><br><span class="line">...</span><br><span class="line">-- Installing: /usr/local/include/opencv2/contrib/detection_based_tracker.hpp</span><br><span class="line">-- Installing: /usr/local/lib/python2.7/dist-packages/cv2.so</span><br><span class="line">-- Set runtime path of <span class="string">&quot;/usr/local/lib/python2.7/dist-packages/cv2.so&quot;</span> to <span class="string">&quot;/usr/local/lib&quot;</span></span><br><span class="line">-- Installing: /usr/local/lib/python2.7/dist-packages/cv.py</span><br><span class="line">-- Installing: /usr/local/lib/libopencv_stitching.so.2.4.11</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">(cv)$ sudo ldconfig</span><br></pre></td></tr></table></figure>

<p>설치된 opencv 패키지 버전을 확인한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pkg-config --modversion opencv</span><br><span class="line">3.1.0</span><br></pre></td></tr></table></figure>

<h4 id="cv2-so"><a href="#cv2-so" class="headerlink" title="cv2.so"></a>cv2.so</h4><p>Python2.7이 함께 설치되어 있는 경우 빌드시 Python3.x의 site-packages에 파일 <em>cv2.cpython-34mu.so</em> 로 설치되어 있다. 이 파일은 실제 파이썬 바인딩으로 실제 파이썬 환경에서 이 라이브러리가 필요하기 하다. Python3 가상환경에서 이 파일 심볼릭 링크를 cv 환경에 <strong>cv2.so</strong>라는 이름으로 연결해 준다.</p>
<p>파이썬은 관행적으로 opencv 라이브러리를 cv2.so 파일로 표현하고 있다. python3의 경우 라이브러리 이름을 cv2로 링크해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/lib/python3.4/dist-packages</span><br><span class="line">$ ls</span><br><span class="line">cv2.cpython-34m.so  numpy  numpy-1.11.2.egg-info</span><br><span class="line">$ sudo ln -s cv2.cpython-34m.so cv2.so</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-12-21T04:00:00.000Z" title="12/21/2019, 1:00:00 PM">2019-12-21</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-14T06:22:54.823Z" title="5/14/2023, 3:22:54 PM">2023-05-14</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">1분안에 읽기 (약 164 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/docker-mongodb-8c17318072e6/">Docker 기반 mongodb</a></p><div class="content"><h1 id="Docker-기반-mongodb"><a href="#Docker-기반-mongodb" class="headerlink" title="Docker 기반 mongodb"></a>Docker 기반 mongodb</h1><p>Official : <a target="_blank" rel="noopener" href="https://hub.docker.com/_/mongo/">https://hub.docker.com/_/mongo/</a><br>참조: <a target="_blank" rel="noopener" href="https://github.com/dockerfile/mongodb">https://github.com/dockerfile/mongodb</a></p>
<p>로컬에 “mongo_data” 라는 데이터 저장소가 있고 29817 포트로 실행하기를 한다면 다음 같다:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 29817:27017 -v /home/its/mongo_data:/data/db --name mongodb mongo</span><br></pre></td></tr></table></figure>

<p>그리고 docker로 시작한 mongodb 컨테이너에 있는 mongo 를 사용해서 데이터베이스에 접속할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it mongodb mongo</span><br></pre></td></tr></table></figure>

<p>인증 이용</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 29817:27017 -v /home/its/mongo_data:/data/db --name mongodb mongo --auth</span><br></pre></td></tr></table></figure>

<p>admin 데이터에이스에서 사용자 관리 계정 등록</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it mongodb mongo admin</span><br><span class="line">&gt; db.createUser(&#123; user: <span class="string">&#x27;jsmith&#x27;</span>, <span class="built_in">pwd</span>: <span class="string">&#x27;some-initial-password&#x27;</span>, roles: [ &#123; role: <span class="string">&quot;userAdminAnyDatabase&quot;</span>, db: <span class="string">&quot;admin&quot;</span> &#125; ] &#125;);</span><br></pre></td></tr></table></figure>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/categories/Programming/page/2/">이전</a></div><div class="pagination-next"><a href="/categories/Programming/page/4/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/categories/Programming/">1</a></li><li><a class="pagination-link" href="/categories/Programming/page/2/">2</a></li><li><a class="pagination-link is-current" href="/categories/Programming/page/3/">3</a></li><li><a class="pagination-link" href="/categories/Programming/page/4/">4</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/categories/Programming/page/8/">8</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/qkboo_400.png" alt="Gangtai"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Gangtai</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Paju, South Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">149</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">17</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">225</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/thinkbee" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/gangtaigoh"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI/"><span class="level-start"><span class="level-item">AI</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/IT/"><span class="level-start"><span class="level-item">IT</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/"><span class="level-start"><span class="level-item">OS</span></span><span class="level-end"><span class="level-item tag">31</span></span></a><ul><li><a class="level is-mobile" href="/categories/OS/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/Windows/"><span class="level-start"><span class="level-item">Windows</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Photoshop/"><span class="level-start"><span class="level-item">Photoshop</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">76</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Angularjs/"><span class="level-start"><span class="level-item">Angularjs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/C-C/"><span class="level-start"><span class="level-item">C/C++</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Nodejs/"><span class="level-start"><span class="level-item">Nodejs</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">25</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/R/"><span class="level-start"><span class="level-item">R</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Raspberry-Pi/"><span class="level-start"><span class="level-item">Raspberry Pi</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/github/"><span class="level-start"><span class="level-item">github</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1465716454138955" data-ad-slot="4883770640" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-16T10:00:00.000Z">2023-07-16</time></p><p class="title"><a href="/mariadb-enable_tls_2-client-4b6a88c2e5be/">MariaDB 클라언트-서버 TLS/SSL 암호화 연결(2)</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-16T00:00:00.000Z">2023-07-16</time></p><p class="title"><a href="/mariadb-enable_tls_1-50b5d39df89f/">MariaDB 클라언트-서버 TLS/SSL 암호화 연결(1)</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-14T07:00:00.000Z">2023-07-14</time></p><p class="title"><a href="/jupyterlab-multiprocess_print-483b37e7a2c3/">Jupyter 기반 환경에서 Multiprocess 실행시 print 출력 차이.</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-13T13:00:00.000Z">2023-07-13</time></p><p class="title"><a href="/windows-conda-shell-cbeeac74bbce/">Windows Terminal에서 miniconda/ananconda Profile 사용</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-12T17:00:00.000Z">2023-07-13</time></p><p class="title"><a href="/pd-Stack_Unstack_Melt-9d0bcd365efe/">Pandas - Pivot, Stack, Unstack, Melt</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Python/">Python</a></p></div></article></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">링크</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.thinkbee.kr" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Thinkbee.kr</span></span><span class="level-right"><span class="level-item tag">www.thinkbee.kr</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/thinkbee_logo.png" alt="IT Tech blogging" height="28"></a><p class="is-size-7"><span>&copy; 2023 Gangtai Goh</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>