<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>카테고리: Database - IT Tech blogging</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="thinkbee blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="thinkbee blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"><meta property="og:type" content="website"><meta property="og:title" content="IT Tech blogging"><meta property="og:url" content="https://thinkbee.github.io/"><meta property="og:site_name" content="IT Tech blogging"><meta property="og:description" content="Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://thinkbee.github.io/img/og_image.png"><meta property="article:author" content="Gangtai Goh"><meta property="article:tag" content="Machine learning, Deep learning, Python, Data science, Android, Ubuntu, Linux, macOS"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://thinkbee.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://thinkbee.github.io"},"headline":"IT Tech blogging","image":["https://thinkbee.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Gangtai Goh"},"publisher":{"@type":"Organization","name":"IT Tech blogging","logo":{"@type":"ImageObject","url":"https://thinkbee.github.io/images/thinkbee_logo.png"}},"description":"Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs2015.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-5ZH90CZ414" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-5ZH90CZ414');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-1465716454138955" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/thinkbee_logo.png" alt="IT Tech blogging" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Blog</a><a class="navbar-item" href="/documents">Doc</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-four-fifths-tablet is-four-fifths-desktop is-four-fifths-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">카테고리</a></li><li><a href="/categories/Programming/">Programming</a></li><li class="is-active"><a href="#" aria-current="page">Database</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-06T14:00:00.000Z" title="2023. 5. 6. 오후 11:00:00">2023-05-06</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-07-17T06:26:43.815Z" title="2023. 7. 17. 오후 3:26:43">2023-07-17</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">3분안에 읽기 (약 469 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/mariadb-data_dir_change-878fcb84a58d/">MariaDb 10/ MySQL 8 - data 디렉토리 변경 (Ubuntu)</a></p><div class="content"><p>data 폴더 위치를 변경해 이동한다.</p>
<ul>
<li>여기서는 MariaDB 를 사용하고 있다.</li>
<li>rsync 를 사용해서 복사한다.</li>
</ul>
<h1 id="위치-이동"><a href="#위치-이동" class="headerlink" title="위치 이동"></a>위치 이동</h1><p><code>my.cnf</code> 에 있는 기본 디렉토리를 <code>/data</code> 폴더로 변경하고 적용한다.</p>
<ol>
<li>기본 data 디레토리 확인</li>
</ol>
<p>my.cnf 에서 datadir 로 지정된 항목을 찾아 보자.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">grep datadir /etc/mysql/mariadb.conf.d/*</span></span><br><span class="line">/etc/mysql/mariadb.conf.d/50-server.cnf:#datadir                 = /var/lib/mysql</span><br></pre></td></tr></table></figure>

<p>기본으로 Ubuntu 종류에서는 <code>/var/lib/mysql</code> 를 기본 데이터 디렉토리로 지정하고 있다.</p>
<ol start="2">
<li>data 디렉토리를 &#x2F;data 로 변경한다.</li>
</ol>
<p><code>my.cnf</code> 를 수정해서 &#x2F;data로 변경하자</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">~$ </span><span class="language-bash">sudo vi /etc/mysql/mariadb.conf.d/50-server.cnf</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>data 폴더 권한</li>
</ol>
<p>mysqld &#x2F; mariadbd 데몬은 mysql 사용자, mysql 그룹으로 사용권이 실행되고 있다. 데이터베이스에서 접근하는 모든 자원(폴더, 파일, 로그 등등)은 mysql 사용자로 접근이 가는해야 한다. 그래서 &#x2F;data 디렉토리 권한을 변경한다.</p>
<p>mysql 사용자와 그룹 확인한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">grep mysql /etc/passwd</span></span><br><span class="line">mysql:x:111:117:MySQL Server,,,:/nonexistent:/bin/false</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">grep mysql /etc/group</span></span><br><span class="line">mysql:x:117:</span><br></pre></td></tr></table></figure>

<p>소유권을 mysql 사용자로 변경한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo <span class="built_in">chown</span> -R mysql:mysql /data</span></span><br><span class="line">[sudo] 암호:</span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">ls</span> -al /data</span></span><br><span class="line">drwxr-xr-x  3 mysql mysql  4096  5월  6 22:35 .</span><br><span class="line">drwxr-xr-x 20 root  root   4096  5월  6 17:15 ..</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>data 이동</li>
</ol>
<p>rsync 를 사용해서 &#x2F;var&#x2F;lib&#x2F;mysql 데이터를 &#x2F;data 아래로 복사한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo rsync -avzph /var/lib/mysql/ /data/</span></span><br></pre></td></tr></table></figure>


<ol start="5">
<li>mysqld 데몬을 재시작하고 확인한다.</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo systemctl restart mysql</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">sudo systemctl status mysql</span></span><br><span class="line"></span><br><span class="line">● mariadb.service - MariaDB 10.11.2 database server</span><br></pre></td></tr></table></figure>

<p>데이터베이스에 접속해 데이터를 확인해 보자. <code>@@datadir</code> 환경변수를 출력해서 &#x2F;data 가 출력되면 my.cnf 의 설정이 잘 구성된 상태를 확인할 수 있다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mysql <span class="operator">-</span>u root <span class="operator">-</span>p</span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">select</span> @<span class="variable">@datadir</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@datadir</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="operator">/</span>data<span class="operator">/</span>    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br></pre></td></tr></table></figure>

<p>rsync 로 복사한 실제 데이터들은 각 스키마에서 확인해 보자.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-12-21T04:00:00.000Z" title="2019. 12. 21. 오후 1:00:00">2019-12-21</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-14T06:22:54.823Z" title="2023. 5. 14. 오후 3:22:54">2023-05-14</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">1분안에 읽기 (약 164 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/docker-mongodb-8c17318072e6/">Docker 기반 mongodb</a></p><div class="content"><h1 id="Docker-기반-mongodb"><a href="#Docker-기반-mongodb" class="headerlink" title="Docker 기반 mongodb"></a>Docker 기반 mongodb</h1><p>Official : <a target="_blank" rel="noopener" href="https://hub.docker.com/_/mongo/">https://hub.docker.com/_/mongo/</a><br>참조: <a target="_blank" rel="noopener" href="https://github.com/dockerfile/mongodb">https://github.com/dockerfile/mongodb</a></p>
<p>로컬에 “mongo_data” 라는 데이터 저장소가 있고 29817 포트로 실행하기를 한다면 다음 같다:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 29817:27017 -v /home/its/mongo_data:/data/db --name mongodb mongo</span><br></pre></td></tr></table></figure>

<p>그리고 docker로 시작한 mongodb 컨테이너에 있는 mongo 를 사용해서 데이터베이스에 접속할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it mongodb mongo</span><br></pre></td></tr></table></figure>

<p>인증 이용</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d -p 29817:27017 -v /home/its/mongo_data:/data/db --name mongodb mongo --auth</span><br></pre></td></tr></table></figure>

<p>admin 데이터에이스에서 사용자 관리 계정 등록</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker <span class="built_in">exec</span> -it mongodb mongo admin</span><br><span class="line">&gt; db.createUser(&#123; user: <span class="string">&#x27;jsmith&#x27;</span>, <span class="built_in">pwd</span>: <span class="string">&#x27;some-initial-password&#x27;</span>, roles: [ &#123; role: <span class="string">&quot;userAdminAnyDatabase&quot;</span>, db: <span class="string">&quot;admin&quot;</span> &#125; ] &#125;);</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-12-20T03:00:00.000Z" title="2019. 12. 20. 오후 12:00:00">2019-12-20</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:51:45.000Z" title="2023. 5. 12. 오후 4:51:45">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">14분안에 읽기 (약 2164 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019-12-20-mongodb-config-429e9771fa41/">MongoDB 구성 설정과 사용자 인증 사용</a></p><div class="content"><p>MongoDB에 관련 글</p>
<p><strong>MongoDB Community Edition Installations</strong> 시리즈:ㅇ</p>
<ol>
<li><a href="/linux/database/mongodb-4.2-install_arm64/">MongoDB Community Edition 4.2 설치 - ARM64 Ubuntu&#x2F;Debian Armbian</a></li>
<li><a href="/linux/database/mongodb-config/">MongoDB 구성 설정 과 사용자 인증 사용</a></li>
</ol>
<hr>
<p><strong>MongoDB Tutorials</strong> 시리즈:</p>
<ol>
<li><a href="/linux/database/mongodb-collections/">MongoDB Tutorials: collections</a></li>
<li><a target="_blank" rel="noopener" href="http://www.mongodb.org/display/DOCS/Tutorial">MongoDB Tutorial</a></li>
</ol>
<hr>
<p><strong>MongoDB와 Middleware Platform</strong>:</p>
<ol>
<li><a href="/nodejs/database/mongodb-mongoose/">NodeJS Mongoose</a></li>
<li><a href="/nodejs/database/mongodb-mongoose-middleware/">Mongodb mongoose-middleware</a></li>
</ol>
<hr>
<p>이전 버전과 기타 자료:</p>
<ol>
<li><a href="/linux/database/mongodb-user-auth/">MongoDB User Authentication</a></li>
<li><a href="/linux/database/mongodb-3.6-install/">MongoDB Community Edition 3.6 on Ubuntu(ARM64)</a></li>
<li><a href="/linux/database/mongodb-3.4-install-armv8/">Mongodb 3.4 install on Armv8</a></li>
<li><a href="/raspberry%20pi/linux/database/opensuse-jeos-mongodb/">Raspberry Pi 3 64bit OS openSUSE: Build MongoDB 3.4</a></li>
</ol>
<hr>
<br>

<h1 id="Mongo-Database-설정과-사용자-인증-사용"><a href="#Mongo-Database-설정과-사용자-인증-사용" class="headerlink" title="Mongo Database 설정과 사용자 인증 사용"></a>Mongo Database 설정과 사용자 인증 사용</h1><p>이 문서는 <strong>MongoDB Community Edition</strong> 를 리눅스 플랫폼에서 시작과 운영에 필요한 구성 파일 <code>mongod.conf</code> 의 설정을 다루고 있다. 이를 통해 데이터베이스 서비스를 동작시키고, 인증한 사용자로서 클라이언트 프로그램으로 접속하기 위한 <strong>기본 인증방식을 구성</strong>하는 것을 정리하고 있다.</p>
<ol>
<li><a href="#Mongo-Database-%EC%84%A4%EC%A0%95">Mongo Database 설정</a></li>
<li>기본인증 구성</li>
</ol>
<blockquote>
<p>이 글의 내용은 MongoDB Community Edition 3.6 이후 4.2 까지 사용이 가능하다.</p>
</blockquote></div><a class="article-more button is-small is-size-7" href="/2019-12-20-mongodb-config-429e9771fa41/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-12-20T01:00:00.000Z" title="2019. 12. 20. 오전 10:00:00">2019-12-20</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:51:42.000Z" title="2023. 5. 12. 오후 4:51:42">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">14분안에 읽기 (약 2072 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019-12-20-mongodb-4.2-install_arm64-d7c98dd6a70e/">MongoDB Community Edition 4.2 설치 - ARM64 Ubuntu/Debian Armbian</a></p><div class="content"><p>MongoDB에 관련 글</p>
<p><strong>MongoDB Community Edition Installations</strong> 시리즈:ㅇ</p>
<ol>
<li><a href="/linux/database/mongodb-4.2-install_arm64/">MongoDB Community Edition 4.2 설치 - ARM64 Ubuntu&#x2F;Debian Armbian</a></li>
<li><a href="/linux/database/mongodb-config/">MongoDB 구성 설정 과 사용자 인증 사용</a></li>
</ol>
<hr>
<p><strong>MongoDB Tutorials</strong> 시리즈:</p>
<ol>
<li><a href="/linux/database/mongodb-collections/">MongoDB Tutorials: collections</a></li>
<li><a target="_blank" rel="noopener" href="http://www.mongodb.org/display/DOCS/Tutorial">MongoDB Tutorial</a></li>
</ol>
<hr>
<p><strong>MongoDB와 Middleware Platform</strong>:</p>
<ol>
<li><a href="/nodejs/database/mongodb-mongoose/">NodeJS Mongoose</a></li>
<li><a href="/nodejs/database/mongodb-mongoose-middleware/">Mongodb mongoose-middleware</a></li>
</ol>
<hr>
<p>이전 버전과 기타 자료:</p>
<ol>
<li><a href="/linux/database/mongodb-user-auth/">MongoDB User Authentication</a></li>
<li><a href="/linux/database/mongodb-3.6-install/">MongoDB Community Edition 3.6 on Ubuntu(ARM64)</a></li>
<li><a href="/linux/database/mongodb-3.4-install-armv8/">Mongodb 3.4 install on Armv8</a></li>
<li><a href="/raspberry%20pi/linux/database/opensuse-jeos-mongodb/">Raspberry Pi 3 64bit OS openSUSE: Build MongoDB 3.4</a></li>
</ol>
<hr>
<br>

<h1 id="Install-MongoDB-4-2-Community-edition-설치"><a href="#Install-MongoDB-4-2-Community-edition-설치" class="headerlink" title="Install MongoDB 4.2 Community edition 설치"></a>Install MongoDB 4.2 Community edition 설치</h1><p>이 문서는 Arm64 기반 CPU를 사용하는 Raspberry Pi, Odroid, PINE64, OrangePi 등 SBC 지원 보드 계열 위에서 Ubuntu&#x2F;Debian 에서 설치 및 사용 가능한 <strong>MongoDB Community Edition 4.2</strong> 버전을 설치하고 구성하는 과정을 정리하고 있다.</p>
<p>MongoDB Community Edition 버전 <em>Amd64</em>, <em>Arm64</em> 의 설치는 <a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-debian/">Install MongoDB Community Edition on Debian</a> 에서 제공하고 있다.</p>
<p>하지만 Arm64를 지원하는 Odroid C2, PINE64, OragePi 등 SBC 브드의 Armbian, Ubuntu 오에스에서 <em>MongoDB Community Edition</em> 을 저장소에서 apt 명령으로 직접 설치가 안되서 <strong><em>작은 트릭</em></strong> 이 필요하다.</p>
<ul>
<li>MongoDB Community Edition 4.2 설치</li>
<li>systemd 사용이 가능한 mongod Unit 파일 구성</li>
</ul></div><a class="article-more button is-small is-size-7" href="/2019-12-20-mongodb-4.2-install_arm64-d7c98dd6a70e/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-12-10T00:00:00.000Z" title="2019. 12. 10. 오전 9:00:00">2019-12-10</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:52:55.481Z" title="2023. 5. 12. 오후 4:52:55">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">8분안에 읽기 (약 1238 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/mongodb-armbinan-1e555c571a20/">Armbian 기반 MongoDB 4.2 설치</a></p><div class="content"><p>Armbian 을 사용하는 보드에서 mongodb 4.2 를 설치한다. 여기에 대한 자세한 내용은 아래 링크를 참조하고 있다.</p>
<p><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/#install-mongodb-community-edition">https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/#install-mongodb-community-edition</a></p>
<h4 id="GPG-error"><a href="#GPG-error" class="headerlink" title="GPG error"></a>GPG error</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">W: GPG error: https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.2 Release: The following signatures couldn&#x27;t be verified because the public key is not available: NO_PUBKEY 4B7C549A058F8B6B</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 3B4FE6ACC0B21F32</span><br><span class="line">7C549A058F8B6B</span><br><span class="line">gpg: key 4B7C549A058F8B6B: public key &quot;MongoDB 4.2 Release Signing Key &lt;packaging@mongodb.com&gt;&quot; imported</span><br><span class="line">gpg: Total number processed: 1</span><br><span class="line">gpg:               imported: 1</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install -y mongodb-org</span><br></pre></td></tr></table></figure>

<h4 id="설정"><a href="#설정" class="headerlink" title="설정"></a>설정</h4><p>mongod.conf 를 간단하게 다음</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">storage:</span><br><span class="line">  #dbPath: /var/lib/mongodb</span><br><span class="line">  dbPath: /home/qkboo/Db-data/mongodb4</span><br><span class="line">  journal:</span><br><span class="line">    enabled: true</span><br><span class="line"></span><br><span class="line">systemLog:</span><br><span class="line">  destination: file</span><br><span class="line">  logAppend: true</span><br><span class="line">  path: /var/log/mongodb/mongod.log</span><br><span class="line"></span><br><span class="line">net:</span><br><span class="line">  port: 27017</span><br><span class="line">  bindIp: 127.0.0.1</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/core/security-mongodb-configuration/">https://docs.mongodb.com/manual/core/security-mongodb-configuration/</a></p>
<h2 id="인증"><a href="#인증" class="headerlink" title="인증"></a>인증</h2><p>명령으로 mongod 로 실행이 가능한 MongoDB Server는 기본적으로 보안 모델이 없이 실행된다. 따라서 별도의 인증 절차를 가지고 있지 않습니다. 이 때문에 2017년 1월에는 이런 약점을 노린 랜섬웨어가 발생하기도 했습니다. MongoDB는 되도록이면 외부로부터의 신뢰되지 않은 접속을 허용하지 않는, 보안에 문제가 되지 않는 환경에서 보안 모델 없이 실행하는 것을 지향하고 있으나, 어쨌든 MongoDB도 ID와 비밀번호로 접근하는 기본적인 보안 모델을 가지고 있으니 이를 통해 MongoDB Server에 인증 과정을 추가해 보도록 합시다.</p>
<ol>
<li>비인증 모드에서 관리자 계정 생성</li>
<li>인증 접속</li>
</ol>
<h3 id="1-비인증-관리자-계정-생성하기"><a href="#1-비인증-관리자-계정-생성하기" class="headerlink" title="1. 비인증 관리자 계정 생성하기"></a>1. 비인증 관리자 계정 생성하기</h3><p>mongod로 별도의 보안 모델이 없는 MongoDB Server를 실행하고, MongoDB Shell에 접속합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; mongo</span><br><span class="line">MongoDB shell version v3.6.3</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017</span><br><span class="line">MongoDB server version: 3.6.3</span><br></pre></td></tr></table></figure>

<p>MongoDB에는 admin이라는 데이터베이스가 존재하며, 해당 데이터베이스에 사용자를 추가합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; use admin</span><br><span class="line">&gt; db.createUser(&#123;</span><br><span class="line">    user: <span class="string">&#x27;username&#x27;</span>,</span><br><span class="line">    <span class="built_in">pwd</span>: <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">    roles: [<span class="string">&#x27;userAdminAnyDatabase&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>db.createUser()는 현재 사용하고 있는 데이터베이스(여기서는 admin)에 사용자를 추가합니다. 여기에는 사용자 이름, 비밀번호와 함께 권한(roles)을 array로 정의합니다. MongoDB에서 빌트인으로 제공하고 있는 권한은 MongoDB Built-In Roles에서 확인할 수 있습니다.</p>
<p>위에서 정의한 userAdminAnyDatabase는 어느 데이터베이스든 사용자를 생성하고 제거할 수 있다는 것을 의미합니다. 모든 권한을 가지게 하려면 root를 사용하면 되고, MongoDB 2.4 이하의 경우 db.addUser()를 통해 사용자를 추가합니다.</p>
<h4 id="mongod-인증하기"><a href="#mongod-인증하기" class="headerlink" title="mongod 인증하기"></a>mongod 인증하기</h4><p>만약 mongod 명령으로 실행하면 MongoDB Server를 실행하도록 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; mongod --auth</span><br></pre></td></tr></table></figure>

<h4 id="MongoDB-Server-재시작하기"><a href="#MongoDB-Server-재시작하기" class="headerlink" title="MongoDB Server 재시작하기"></a>MongoDB Server 재시작하기</h4><p>Ubuntu와 같은 리눅스 시스템에서 service mongod start처럼 service를 이용할 경우, config 파일을 통해 실행됩니다. 이 경우 &#x2F;etc&#x2F;mongod.conf를 다음처럼 수정하고 재시작(service mongod restart)하면 됩니다.</p>
<h5 id="mongodb-4-x"><a href="#mongodb-4-x" class="headerlink" title="mongodb 4.x"></a>mongodb 4.x</h5><p>인증을 활성화 하려면</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">security:</span><br><span class="line">    authorization: enabled</span><br></pre></td></tr></table></figure>

<h5 id="mongodb-3-x"><a href="#mongodb-3-x" class="headerlink" title="mongodb 3.x"></a>mongodb 3.x</h5><p>mongod.conf 를 사용하면 다음 옵션을 true 로 구성한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auth = true</span><br></pre></td></tr></table></figure>

<p>그리고 서비스를 재시작한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ sudo systemctl restart mongod.service</span><br></pre></td></tr></table></figure>

<h3 id="2-인증-접속"><a href="#2-인증-접속" class="headerlink" title="2. 인증 접속"></a>2. 인증 접속</h3><p>mongo 쉘에 접속하여 db.auth()를 사용하는 것입니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br><span class="line">MongoDB shell version v4.2.1</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb</span><br><span class="line">Implicit session: session &#123; <span class="string">&quot;id&quot;</span> : UUID(<span class="string">&quot;177716fe-5b3c-41f6-bdae-d2584819abff&quot;</span>) &#125;</span><br><span class="line">MongoDB server version: 4.2.1</span><br></pre></td></tr></table></figure>

<p>쉘에서 db.auth() 를 사용해 인증에 성공하면 1이 나오면 성공이다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; use admin</span><br><span class="line">switched to db admin</span><br><span class="line">&gt; db.auth(<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;!23456789&#x27;</span>);</span><br><span class="line">1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>인증 접속이 되면 로그에 아래 같은 로그를 확인할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2019-12-02T09:49:24.392+0000 I  ACCESS   [conn3] Successfully authenticated as principal admin on admin from client 127.0.0.1:52370</span><br></pre></td></tr></table></figure>

<h5 id="명령행에서-접근"><a href="#명령행에서-접근" class="headerlink" title="명령행에서 접근"></a>명령행에서 접근</h5><p>인증과 함께 admin 데이터베이스로 접근하려면 아래 같이 명령어에 아이디와 비밀번호를 명시만 해 주면 된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; mongo admin -u username -p password --authenticationDatabase admin</span><br></pre></td></tr></table></figure>

<p>아래 같이 mongo 명령행에서 인증을 통해 접속하면 test 라는 데이터베이스로 접속합니다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ mongo -u admin -p</span><br><span class="line">MongoDB shell version v4.2.1</span><br><span class="line">Enter password:</span><br><span class="line">...</span><br><span class="line">&gt;</span><br><span class="line">&gt; use admin</span><br></pre></td></tr></table></figure>

<h3 id="사용자-계정-만들기"><a href="#사용자-계정-만들기" class="headerlink" title="사용자 계정 만들기"></a>사용자 계정 만들기</h3><p>관리자 계정을 만들고 인증까지 수행 했으면, 일반 사용자를 만들어 데이터베이스를 사용하도록 해보자. 관리자 계정을 만들었던 것처럼 계정을 만들고자 하는 데이터베이스를 <code>use</code> 한 다음 db.createUser()를 실행하면 된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; use bookdiary</span><br><span class="line">switched to db bookdiary</span><br><span class="line">&gt; db.createUser(&#123;</span><br><span class="line">... user:<span class="string">&#x27;student&#x27;</span>,</span><br><span class="line">... <span class="built_in">pwd</span>:<span class="string">&#x27;0123456789&#x27;</span>,</span><br><span class="line">... roles:[<span class="string">&#x27;dbOwner&#x27;</span>]</span><br><span class="line">... &#125;);</span><br><span class="line">Successfully added user: &#123; <span class="string">&quot;user&quot;</span> : <span class="string">&quot;student&quot;</span>, <span class="string">&quot;roles&quot;</span> : [ <span class="string">&quot;dbOwner&quot;</span> ] &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<p>dbOwner라는 권한은 해당 데이터베이스에 대한 모든 수정&#x2F;삭제 권한을 가진다는 것을 의미합니다.</p>
<h5 id="사용자-인증"><a href="#사용자-인증" class="headerlink" title="사용자 인증"></a>사용자 인증</h5><p>db.auth()를 통해 인증을 진행해 봅시다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; db.auth(&#x27;username&#x27;, &#x27;password&#x27;)</span><br><span class="line">1</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ul>
<li><a target="_blank" rel="noopener" href="https://blog.thinkbee.kr/linux/database/mongodb-3.6-install/">MongoDB Community Edition 3.6 on Ubuntu</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/tutorial/enable-authentication/">MongoDB: Enable authentication</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-06-08T09:00:00.000Z" title="2018. 6. 8. 오후 6:00:00">2018-06-08</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:51:37.000Z" title="2023. 5. 12. 오후 4:51:37">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">17분안에 읽기 (약 2498 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018-06-08-mongodb-3.6-install-be31d0447d18/">MongoDB Community Edition 3.6 on Ubuntu</a></p><div class="content"><blockquote>
<p>2018-06-22 내용 정리, User auth 링크<br>{:.right-history}</p>
</blockquote>
<p>이 문서는 Ubuntu&#x2F;Debian 계열 정규 배포본에 3.x 버전을 지원하지 않는 플랫폼에 <strong>MongoDB Community Edition 3.6</strong> 버전을 설치하는 과정을 정리하고 있다. 내용의 기초는 MongoDB Community Edition 3.6 버전을 <em>Amd64</em>, <em>Arm64</em> 지원하는 <em>64bit OS</em>에 설치해 사용하기 위해서 <a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/">Install MongoDB Community Edition, on-ubuntu</a>를 따라서 진행하고 경험상 필요한 부분을 추가로 정리했다.</p>
<ul>
<li>MongoDB Community Edition 3.6 설치</li>
<li>Mongo Database 구성</li>
</ul></div><a class="article-more button is-small is-size-7" href="/2018-06-08-mongodb-3.6-install-be31d0447d18/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-21T00:00:00.000Z" title="2017. 4. 21. 오전 9:00:00">2017-04-21</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:56:20.261Z" title="2023. 5. 12. 오후 4:56:20">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">19분안에 읽기 (약 2861 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017-04-21-mongodb-collections-c0cb4b185312/">mongodb - Collection</a></p><div class="content"><h2 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h2><p>mongoDB는<br>mongoDB는 Collection 이 데이터베이스 테이블과 같은 개념이다. 아래 테이블은 관계형 데이터베이스 MySQL과 MongoDB의 개념을 비교해 주고 있다. [^1]</p>
<table>
<thead>
<tr>
<th>MySQL</th>
<th>MongoDB</th>
</tr>
</thead>
<tbody><tr>
<td>Table</td>
<td>Collection</td>
</tr>
<tr>
<td>Row</td>
<td>Document</td>
</tr>
<tr>
<td>Column</td>
<td>Field</td>
</tr>
<tr>
<td>Joins</td>
<td>Embedded documents, linking</td>
</tr>
</tbody></table></div><a class="article-more button is-small is-size-7" href="/2017-04-21-mongodb-collections-c0cb4b185312/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-20T00:00:00.000Z" title="2017. 4. 20. 오전 9:00:00">2017-04-20</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:56:45.000Z" title="2023. 5. 12. 오후 4:56:45">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">11분안에 읽기 (약 1578 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017-04-20-mongodb-user-auth-0ca5aa6aeae6/">MongoDB - Database와 User Authentication</a></p><div class="content"><blockquote>
<p>2018-06-21 설치 링크로 대체<br>{:.right-history}</p>
</blockquote>
<p>MongoDB 설치후 데이터베이스 위치, 로그, 인증 등에 관련한 서버 구성과 설정을 정리한다.</p>
<blockquote>
<p>MongoDB 2.6 과 MongoDB Community Edition 3.x 버전을 사용했다.</p>
</blockquote>
<h2 id="mongoDB-접근제어"><a href="#mongoDB-접근제어" class="headerlink" title="mongoDB 접근제어"></a>mongoDB 접근제어</h2><p>mongoDB 는 설치과정 중에 인증과 관련해 설정하는 부분이 없어서 설치 후 누구나 DB에 접속 할 수 있다. 인증을 추가해 데이터베이스 관리자와 데이터베이스 사용자로 구분해서 이용하고, 각 데이터베이스의 사용자는 허가된 역할(Role)을 가지고 데이터베이스에 접근 가능하도록 구성한다.</p></div><a class="article-more button is-small is-size-7" href="/2017-04-20-mongodb-user-auth-0ca5aa6aeae6/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-11T01:00:00.000Z" title="2017. 4. 11. 오전 10:00:00">2017-04-11</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:50:41.000Z" title="2023. 5. 12. 오후 4:50:41">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">15분안에 읽기 (약 2270 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017-04-11-mongodb-3.4-install-armv8-f692faebaa20/">mongodb 3.4 on Armbian</a></p><div class="content"><blockquote>
<p>2018-06-22 내용 정리, User auth 링크<br>{:.right-history}</p>
</blockquote>
<p>이 문서는 MongoDB Community Edition 3.4 버전을 <em>64bit OS</em>인 <em>Amd64</em>, <em>Arm64</em> 지원 OS에 설치해 사용하기 위해서 <a target="_blank" rel="noopener" href="https://docs.mongodb.com/v3.4/tutorial/install-mongodb-on-ubuntu/">Install MongoDB Community Edition, on-ubuntu</a>를 따라서 진행했다.</p>
<p>여기서는 Arm을 사용하는 SBC[^2] 컴퓨터에 mongodb 3.4 버전을, <em>Hardkernel Odroid C2</em>를 사용해서 설치를 진행했다.</p></div><a class="article-more button is-small is-size-7" href="/2017-04-11-mongodb-3.4-install-armv8-f692faebaa20/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-03-11T01:00:00.000Z" title="2017. 3. 11. 오전 10:00:00">2017-03-11</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:51:58.831Z" title="2023. 5. 12. 오후 4:51:58">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Database/">Database</a></span><span class="level-item">22분안에 읽기 (약 3291 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/mysql5-3-start-2b49208d5af4/">MySQL 5.x 시작 (3)</a></p><div class="content"><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><h3 id="사용자-관리"><a href="#사용자-관리" class="headerlink" title="사용자 관리"></a>사용자 관리</h3><p>mysql-server 를 설치하며 만든 root 사용자 패스워드를 사용해서 데이터베이스에 접속한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u root -p</span><br></pre></td></tr></table></figure>

<h4 id="사용자-데이터베이스"><a href="#사용자-데이터베이스" class="headerlink" title="사용자 데이터베이스"></a>사용자 데이터베이스</h4><p>사용자가 사용할 데이터베이스를 만든다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">create</span> database mydb;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>그리고 CREATE USER, INSERT 로 새 사용자를 추가할 수 있다.</p>
<blockquote>
<p>create user userid@HOST identified by ‘PASSWORD’;</p>
</blockquote>
<p>사용자 foo 를 localhost 와 모든 것을 의미하는 패턴 <code>%</code>로 추가하면:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">user</span> foo<span class="variable">@localhost</span> identified <span class="keyword">by</span> <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line">mysql <span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;foo&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;password&#x27;</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>혹은</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into user (host, user, password) values (&#x27;localhost&#x27;, &#x27;hiru&#x27;, &#x27;password(&#x27;hirururu&#x27;));</span><br></pre></td></tr></table></figure>
</blockquote>
<p>사용자 제거<br>mysql &gt; drop user ‘hiru’;<br>mysql &gt; delete from user where user &#x3D;’hiru’</p>
<p>사용자 생성시 다음같이 1396 에러는 <em>CREATE USER&#x2F;GRANT 명령으로 사용자와 권한을 추가&#x2F;관리해야 하는데 mysql.db, mysql.user 테이블을 직접 조작하다가 일관성이 깨졌기 때문</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create user &#x27;shopuser&#x27;@&#x27;localhost&#x27; identified by &#x27;)12345&#x27;;</span><br><span class="line">ERROR 1396 (HY000): Operation CREATE USER failed for &#x27;shopuser&#x27;@&#x27;localhost&#x27;</span><br></pre></td></tr></table></figure>

<p>제대로 사용자를 삭제하고</p>
<blockquote>
<p>drop user shopuser@localhost</p>
</blockquote>
<p><code>flush privileges;</code> 로 갱신해 준다.</p>
<h4 id="권한-주기"><a href="#권한-주기" class="headerlink" title="권한 주기"></a>권한 주기</h4><p>권한을 추가하고 삭제하기 위해서, GRANT와 REVOKE의 명령을 사용한다. GRANT 명령 등으로 데이터베이스 사용자가 데이터베이스 자원에 접근하는 권한을 만들 수 있다.</p>
<blockquote>
<p>GRANT ALL privileges ON DB_NAME.TABLE TO USER_ID@[HOST] IDENTIFIED BY ‘PASSWORD’<br>GRANT [SELECT,DELETE,INSERT,UPDATE,] ON DB_NAME.TABLE TO USER_ID@[HOST] IDENTIFIED BY ‘PASSWORD’</p>
</blockquote>
<ul>
<li>DB_NAME,TABLE 등에 <code>*</code> 패턴을 사용할 수 있다.</li>
<li>HOST: 접근하는 소스 호스트</li>
<li>PASSWORD: 패스워드</li>
</ul>
<p><a target="_blank" rel="noopener" href="http://www.w3big.com/ko/mysql/mysql-administration.html">http://www.w3big.com/ko/mysql/mysql-administration.html</a></p>
<p>현재 머신에서만 접속할 수 있는 사용자 계정, 외부, 원격에서 접속할 수 있는 사용자 계정을 추가해 준다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> use mysql; # mysql <span class="keyword">system</span> db</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">GRANT</span> <span class="keyword">ALL</span> privileges <span class="keyword">ON</span> mydb.<span class="operator">*</span> <span class="keyword">TO</span> foo<span class="variable">@localhost</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;*****&#x27;</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">GRANT</span> <span class="keyword">ALL</span> privileges <span class="keyword">ON</span> mydb.<span class="operator">*</span> <span class="keyword">TO</span> foo@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;*****&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>혹은</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grant select, insert, update, delete on mydb.* to foo@host identified by &#x27;password&#x27;;</span><br><span class="line">mysql &gt; grant select, insert, update, delete on dbname.table to userid@&#x27;192.168.%&#x27; identified by &#x27;password&#x27;;</span><br></pre></td></tr></table></figure>

<p>권한을 확인하는 방법</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">&gt;</span> <span class="keyword">show</span> grants <span class="keyword">for</span> foo<span class="variable">@localhost</span></span><br><span class="line">mysql <span class="operator">&gt;</span> <span class="keyword">show</span> grants <span class="keyword">for</span> <span class="string">&#x27;foo&#x27;</span>@<span class="string">&#x27;%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>변경된 권한을 적용하기</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql &gt; flush privileges;</span><br></pre></td></tr></table></figure>

<p>권한을 삭제하는 방법</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql &gt; revoke all on dbname.table from username@host</span><br></pre></td></tr></table></figure>

<p>추가한 사용자는 SELECT로 확인할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select host,authentication_string from user where user=&#x27;foo&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="사용자-데이터베이스-사용"><a href="#사용자-데이터베이스-사용" class="headerlink" title="사용자 데이터베이스 사용"></a>사용자 데이터베이스 사용</h4><p>새로 생성한 사용자 ID로 로그인을 해서 데이터베이스 정보를 확인해 보자.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -u foo -p</span><br><span class="line">Enter password:</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mydb               |</span><br><span class="line">+--------------------+</span><br></pre></td></tr></table></figure>

<p>그리고 데이터베이스를 사용하려면 <code>use [DATABASE]</code> 로 변경한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mydb;</span><br></pre></td></tr></table></figure>

<h4 id="Character-Set"><a href="#Character-Set" class="headerlink" title="Character Set"></a>Character Set</h4><p>mysql에서 한글이 ?로 표시되는 경우.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> department;</span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">1</span> <span class="operator">|</span> ???  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">2</span> <span class="operator">|</span> ???  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>my.cnf의 문자셋과 터미널 문자셋이 일치하지 않아서 그렇다. MySQL은 설치시 지정하지 않았다면 기본적으로 문자셋이 ‘latin1’으로 설정되어 있다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;c%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name            <span class="operator">|</span> <span class="keyword">Value</span>                      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="operator">|</span> character_set_client     <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_connection <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_database   <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_filesystem <span class="operator">|</span> <span class="type">binary</span>                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_results    <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_server     <span class="operator">|</span> latin1                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_set_system     <span class="operator">|</span> utf8                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> character_sets_dir       <span class="operator">|</span> <span class="operator">/</span>usr<span class="operator">/</span>share<span class="operator">/</span>mysql<span class="operator">/</span>charsets<span class="operator">/</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> collation_connection     <span class="operator">|</span> latin1_swedish_ci          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> collation_database       <span class="operator">|</span> latin1_swedish_ci          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> collation_server         <span class="operator">|</span> latin1_swedish_ci          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> completion_type          <span class="operator">|</span> NO_CHAIN                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> concurrent_insert        <span class="operator">|</span> AUTO                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> connect_timeout          <span class="operator">|</span> <span class="number">10</span>                         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> core_file                <span class="operator">|</span> OFF                        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+----------------------------+</span></span><br><span class="line"><span class="number">15</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>MySQL 설정 파일에서 문자셋을 변경할 수 있다. 다믕 같이 자신의 my.cnf 파일을 작성한다. client, mysqld, mysql 에 대해서 utf8 사용을 선언해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">..</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-client-handshake=FALSE</span><br><span class="line">init_connect=&quot;SET collation_connection = utf8_general_ci&quot;</span><br><span class="line">init_connect=&quot;SET NAMES utf8&quot;</span><br><span class="line">character-set-server=utf8</span><br><span class="line">collation-server=utf8_general_ci</span><br><span class="line"></span><br><span class="line">[mysqldump]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>mysql&gt; show variables like ‘char%’;<br>+————————–+—————————-+<br>| Variable_name | Value |<br>+————————–+—————————-+<br>| character_set_client | utf8 |<br>| character_set_connection | utf8 |<br>| character_set_database | utf8 |<br>| character_set_filesystem | binary |<br>| character_set_results | utf8 |<br>| character_set_server | utf8 |<br>| character_set_system | utf8 |<br>| character_sets_dir | &#x2F;usr&#x2F;share&#x2F;mysql&#x2F;charsets&#x2F; |<br>+————————–+—————————-+<br>8 rows in set (0.00 sec)</p>
<h3 id="사용자-관리-1"><a href="#사용자-관리-1" class="headerlink" title="사용자 관리"></a>사용자 관리</h3><p>GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP<br>-&gt; ON TUTORIALS.*<br>-&gt; TO ‘zara‘@’localhost’<br>-&gt; IDENTIFIED BY ‘zara123’;</p>
<h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><p>Structural Query Language로 튜플 간의 관계를 계산해서 결과를 도촐한다.</p>
<ul>
<li>SEQUEL: Structured English QUEry Language; part of SYSTEM R, 1974</li>
<li>SQL&#x2F;86: ANSI &amp; ISO standard</li>
<li>SQL&#x2F;89: ANSI &amp; ISO standard</li>
<li>SQL&#x2F;92 or SQL2: ANSI &amp; ISO standard</li>
<li>SQL3: in the works…</li>
<li>SQL2 supported by ORACLE, SYBASE, INFORMIX, IBM DB2, SQL SERVER, OPENINGRES,…</li>
</ul>
<h3 id="SQL의-구성"><a href="#SQL의-구성" class="headerlink" title="SQL의 구성"></a>SQL의 구성</h3><ul>
<li>SQL consists of the following parts:</li>
<li>Data Definition Language (DDL)</li>
<li>Interactive Data Manipulation Language (Interactive DML)</li>
<li>Embedded Data Manipulation Language (Embedded DML)</li>
<li>Views</li>
<li>Integrity</li>
<li>Transaction Control</li>
<li>Authorization</li>
<li>Catalog and Dictionary Facilities</li>
</ul>
<h3 id="교수-학습-연습"><a href="#교수-학습-연습" class="headerlink" title="교수 학습 연습"></a>교수 학습 연습</h3><p>데이터 유형</p>
<p><a target="_blank" rel="noopener" href="http://www.w3big.com/ko/mysql/mysql-data-types.html">http://www.w3big.com/ko/mysql/mysql-data-types.html</a></p>
<h4 id="table-professor"><a href="#table-professor" class="headerlink" title="table professor"></a>table professor</h4><blockquote>
<p>파일 Python-Database-class-student.sql</p>
<table>
<thead>
<tr>
<th>컬럼명</th>
<th>테이터 타입</th>
<th>비고</th>
</tr>
</thead>
<tbody><tr>
<td>scode</td>
<td>varchar(4)</td>
<td>학번, 기본키</td>
</tr>
<tr>
<td>sname</td>
<td>varchar(20)</td>
<td>이름</td>
</tr>
<tr>
<td>sdept</td>
<td>varchar(20)</td>
<td>학과</td>
</tr>
<tr>
<td>sphone</td>
<td>varchar(15)</td>
<td>전화번호</td>
</tr>
</tbody></table>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> professor (</span><br><span class="line">    pcode <span class="type">varchar</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    pname <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    pdept <span class="type">varchar</span>(<span class="number">12</span>),</span><br><span class="line">    pphone <span class="type">varchar</span>(<span class="number">8</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="table-student"><a href="#table-student" class="headerlink" title="table student"></a>table student</h5><blockquote>
<p>파일 Python-Database-class-student.sql</p>
<table>
<thead>
<tr>
<th>컬럼명</th>
<th>테이터 타입</th>
<th>비고</th>
</tr>
</thead>
<tbody><tr>
<td>scode</td>
<td>varchar(4)</td>
<td>학번, 기본키</td>
</tr>
<tr>
<td>sname</td>
<td>varchar(20)</td>
<td>이름</td>
</tr>
<tr>
<td>sdept</td>
<td>varchar(20)</td>
<td>학과</td>
</tr>
<tr>
<td>sphone</td>
<td>varchar(15)</td>
<td>전화번호</td>
</tr>
</tbody></table>
</blockquote>
<p>create student table</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student (</span><br><span class="line">    scode <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    sname <span class="type">char</span>(<span class="number">10</span>),</span><br><span class="line">    sdept <span class="type">char</span>(<span class="number">12</span>),</span><br><span class="line">    sphone <span class="type">char</span>(<span class="number">8</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="table-course"><a href="#table-course" class="headerlink" title="table course"></a>table course</h5><blockquote>
<p>파일 Python-Database-class-student.sql</p>
<table>
<thead>
<tr>
<th>컬럼명</th>
<th>테이터 타입</th>
<th>비고</th>
</tr>
</thead>
<tbody><tr>
<td>ccode</td>
<td>varchar(4)</td>
<td>과목코드, 기본키</td>
</tr>
<tr>
<td>cname</td>
<td>varchar(20)</td>
<td>과목명</td>
</tr>
<tr>
<td>ctime</td>
<td>int</td>
<td>강의 시수</td>
</tr>
<tr>
<td>croom</td>
<td>varchar(15)</td>
<td>강의실</td>
</tr>
</tbody></table>
</blockquote>
<p>create course table</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> course (</span><br><span class="line">    ccode <span class="type">varchar</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    cname <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    ctime <span class="type">integer</span>,</span><br><span class="line">    croom <span class="type">varchar</span>(<span class="number">8</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="table-lecture"><a href="#table-lecture" class="headerlink" title="table lecture"></a>table lecture</h5><blockquote>
<p>파일 Python-Database-class-student.sql</p>
<table>
<thead>
<tr>
<th>컬럼명</th>
<th>테이터 타입</th>
<th>비고</th>
</tr>
</thead>
<tbody><tr>
<td>lpcode</td>
<td>varchar(4)</td>
<td>교수코드, 기본키</td>
</tr>
<tr>
<td>lccode</td>
<td>varchar(4)</td>
<td>과목코드, 기본키</td>
</tr>
</tbody></table>
</blockquote>
<p>create lecture table</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> lecture (</span><br><span class="line">    lpcode <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    lccode <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (lpcode, lccode)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="table-advice"><a href="#table-advice" class="headerlink" title="table advice"></a>table advice</h5><blockquote>
<p>파일 Python-Database-class-student.sql</p>
<table>
<thead>
<tr>
<th>컬럼명</th>
<th>테이터 타입</th>
<th>비고</th>
</tr>
</thead>
<tbody><tr>
<td>apcode</td>
<td>varchar(4)</td>
<td>교수코드, 기본키</td>
</tr>
<tr>
<td>asccode</td>
<td>varchar(4)</td>
<td>학번, 기본키</td>
</tr>
</tbody></table>
</blockquote>
<p>create advice table</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> advise (</span><br><span class="line">    apcode <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    ascode <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (apcode, ascode)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="table-register"><a href="#table-register" class="headerlink" title="table register"></a>table register</h5><blockquote>
<p>파일 Python-Database-class-student.sql</p>
<table>
<thead>
<tr>
<th>컬럼명</th>
<th>테이터 타입</th>
<th>비고</th>
</tr>
</thead>
<tbody><tr>
<td>rscode</td>
<td>varchar(4)</td>
<td>학번, 기본키</td>
</tr>
<tr>
<td>rcccode</td>
<td>varchar(4)</td>
<td>과목코드, 기본키</td>
</tr>
</tbody></table>
</blockquote>
<p>create register table</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> register (</span><br><span class="line">    rscode <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    rccode <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (rscode, rccode)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="데이터-입력"><a href="#데이터-입력" class="headerlink" title="데이터 입력"></a>데이터 입력</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> professor (pcode, pname, pdept, pphone)\</span><br><span class="line">        <span class="keyword">VALUES</span> (<span class="string">&#x27;P001&#x27;</span>,<span class="string">&#x27;김 구&#x27;</span>,<span class="string">&#x27;컴퓨터공학과&#x27;</span>,<span class="string">&#x27;0001&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> professor (pcode, pname, pdept, pphone)\</span><br><span class="line">        <span class="keyword">VALUES</span> (<span class="string">&#x27;P002&#x27;</span>,<span class="string">&#x27;안창호&#x27;</span>,<span class="string">&#x27;컴퓨터공학과&#x27;</span>,<span class="string">&#x27;0002&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> professor (pcode, pname, pdept, pphone)\</span><br><span class="line">        <span class="keyword">VALUES</span> (<span class="string">&#x27;P003&#x27;</span>,<span class="string">&#x27;이육사&#x27;</span>,<span class="string">&#x27;국문학과&#x27;</span>,<span class="string">&#x27;0003&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> professor (pcode, pname, pdept, pphone)\</span><br><span class="line">        <span class="keyword">VALUES</span> (<span class="string">&#x27;P004&#x27;</span>,<span class="string">&#x27;박종화&#x27;</span>,<span class="string">&#x27;국문학과&#x27;</span>,<span class="string">&#x27;0004&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> professor (pcode, pname, pdept, pphone)\</span><br><span class="line">        <span class="keyword">VALUES</span> (<span class="string">&#x27;P005&#x27;</span>,<span class="string">&#x27;심 훈&#x27;</span>,<span class="string">&#x27;사학과&#x27;</span>,<span class="string">&#x27;0005&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> professor (pcode, pname, pdept, pphone)\</span><br><span class="line">        <span class="keyword">VALUES</span> (<span class="string">&#x27;P006&#x27;</span>,<span class="string">&#x27;한용운&#x27;</span>,<span class="string">&#x27;사학과&#x27;</span>,<span class="string">&#x27;0006&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="외부-데이터-파일-이용"><a href="#외부-데이터-파일-이용" class="headerlink" title="외부 데이터 파일 이용"></a>외부 데이터 파일 이용</h4><p>파일에 필드 간의 ‘,’로 구분한 데이터 파일이 있다. 물론 필드 구별 문자는 데이터의 내용에 따라 사용자가 임의로 정 할 수 있다.<br>파일: studens.txt</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">S001, 박소명, 컴퓨터공학과, 123-4567</span><br><span class="line">S002, 최민국, 컴퓨터공학과, 234-5678</span><br><span class="line">S003, 이승호, 국문학과, 345-6789</span><br><span class="line">S004, 정수봉, 국문학과, 456-7890</span><br><span class="line">S005, 김상진, 사학과, 567-8901</span><br><span class="line">S006, 황정숙, 사학과, 678-9012</span><br></pre></td></tr></table></figure>

<p>studnets.txt 파일을 읽어들이는 것은 스크립트 파일을 작성하거나 mysql에서 직접 실행할 수 있다.<br>먼저 스크립트 파일 students.sql은 다음과 같다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mydb;</span><br><span class="line">load data <span class="keyword">local</span> infile &quot;student.txt&quot; <span class="keyword">into</span> <span class="keyword">table</span> student</span><br><span class="line">fields terminated <span class="keyword">by</span> <span class="string">&#x27;,&#x27;</span> ;</span><br></pre></td></tr></table></figure>

<p>이제 mysql 클라이언트에서 데이터를 읽어 들인다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span>source students.sql;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="데이터-조회"><a href="#데이터-조회" class="headerlink" title="데이터 조회"></a>데이터 조회</h3><blockquote>
<p>SELECT [DISTINCT] select _expr essi on<br>FROM table_list<br>WHERE where_definition<br>ORDER BY col_name [ASC|DESC]<br>GROUP BY col _name_list<br>LIMIT [offset ], rows</p>
</blockquote>
<p>예제-1) 전체 교수 리스트를 출력하는 SQL 검색 문을 작성하라.<br>mysql &gt; sel ect * fromprof;</p>
<p>예제-2) 전체 교수 리스트를 이름순서로 출력하는 검색 문을 작성하라.<br>mysql &gt; sel ect * fromprof order by pname;</p>
<p>예제-5) 전체 교수 리스트를 이름 역순으로 출력하는 검색 문을 작성하라.<br>mysql &gt; sel ect * fromprof order by pname desc;</p>
<p>전체 교수 리스트를 학과별로 출력하는 검색 문을 작성하라.<br>mysql &gt; sel ect * fromprof order by pdept, pname;</p>
<p>예제-4) 국문학과 교수 리스트를 이름순서로 출력하는 검색 문을 작성하라.<br>mysql&gt; select * from professor where pdept &#x3D;’국문학과’;</p>
<h4 id="JOIN"><a href="#JOIN" class="headerlink" title="JOIN"></a>JOIN</h4><p>“FROM 테이블명 AS 별명” 구문은 SQL 문장에서 별명으로 테이블을 참조하 는 역할은 한다.</p>
<p>예제-6) MySQL 과목을 강의하는 교수님의 이름, 전화번호와 강의실을 검색 하는 문장을 작성하라.<br>mysql&gt; select p.pname, p.pphone, c.croom from professor p, course c, lecture l<br>where c.cname&#x3D;’MySQL’ and c.ccode&#x3D;l.lccode<br>and l.lpcode&#x3D;p.pcode;</p>
<p>예제-7) ‘김구’ 교수님이 강의하는 과목명, 강의 시수와 강의실을 검색하는 문장을 작성하라.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> c.cname, c.ctime, c.croom</span><br><span class="line"><span class="keyword">from</span> professor <span class="keyword">as</span> p, course <span class="keyword">as</span> c, lecture <span class="keyword">as</span> l</span><br><span class="line"><span class="keyword">where</span> p.pname <span class="operator">=</span> <span class="string">&#x27;김 구&#x27;</span> <span class="keyword">and</span> p.pcode <span class="operator">=</span> l.lpcode</span><br><span class="line">     <span class="keyword">and</span> l.lccode <span class="operator">=</span> c.ccode;</span><br></pre></td></tr></table></figure>

<p>예제-8) 각 학생이 수강 신청한 과목에 대해서 학생이름, 전화번호, 과목명, 강의실, 강의 시수를 검색하는 문장을 작성하라.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> s.sname, s.sphone, c.cname, c.ctime, c.croom</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s , course <span class="keyword">as</span> c, register <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">where</span> s.scode <span class="operator">=</span> r.rscode <span class="keyword">and</span> r.rccode <span class="operator">=</span> c.ccode</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> s.sname, c.cname;</span><br></pre></td></tr></table></figure>

<h4 id="sub-query"><a href="#sub-query" class="headerlink" title="sub-query"></a>sub-query</h4><p>예제-9) 각 학생이 신청한 총 학점을 구하는 검색식을 작성하라.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> s.sname, s.sdept, s.sphone, <span class="built_in">sum</span>(c.ctime)</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> s , course <span class="keyword">as</span> c, register <span class="keyword">as</span> r</span><br><span class="line"><span class="keyword">where</span> s.scode <span class="operator">=</span> r.rscode <span class="keyword">and</span> r.rccode <span class="operator">=</span> c.ccode</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> s.sname;</span><br></pre></td></tr></table></figure>

<ul>
<li>WHERE 조건절에 해당하는 결과를 GROUP BY 구절에 명시된 s.sname 필드에 따라 그룹으로 결과를 분류하고 난 후, SELECT 필드에 SUM(c.cti me) 함수를 사용해서 c.cti me 필드에 대한 합을 구함으로써 각 학 생이 신청한 총 학점를 구할 수 있다.</li>
</ul>
<p>예제-10) 각 학과별 교수님은 몇 분인지 구하는 검색식을 작성하라.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> pdept, <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">from</span> professor</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> pdept;</span><br></pre></td></tr></table></figure>

<h4 id="LIMIT-구절"><a href="#LIMIT-구절" class="headerlink" title="LIMIT 구절"></a>LIMIT 구절</h4><p>예제-11) 페이지 크기가 2 일 때, (예제-8)의 결과에서 두 번째 페이지를 검색하는 SQL문장은 작성하라.<br>select s.sname, s.sphone, c.cname, c.ctime, c.croom fromstudent as s , course as c, regi ster as r<br>where s.scode &#x3D; r.rscode and r.rccode &#x3D; c.ccode order by s.sname, c.cname<br>￼￼limit 2, 2;</p>
<ul>
<li>마지막 행의 limit 2, 2구절에서, 첫 번째 인자는 오프셋(offset)으로 검 색 결과 레코드들의 순번을 의미한다. 오프셋 값은 0 부터 지정하기 때문에 오프셋값2는전체레코드중에서세번째레코드를가리킨다. 두번째는 인자는 출력하는 레코드 수(rows)를 의미한다. 따라서, 레코드 수 2 는 2 개 의 레코드를 출력하라는 의미가 된다.</li>
</ul>
<h3 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h3><blockquote>
<p>UPDATE tbl_name<br>SET col_name1 &#x3D; expr1, col_name2 &#x3D; expr2, …<br>[WHERE where_definition] [LIMIT rows];</p>
</blockquote>
<p>예제-12) 교수테이블에서 ‘김 구’ 선생님의 이름을 ‘하은용’ 교수님으로 변 경하는 문장을 작성하라.<br>update prof set pname &#x3D;’하은용’ where pname &#x3D;’김구’;</p>
<p>예제-13) 지도 테이블의 교수코드가 ‘P007’ 인 레코드들을 모두 ‘P005’ 로 변경하라.<br>update advise set apcode &#x3D;’P005’ where apcode &#x3D;’P007’;</p>
<p>예제-14) 강의 시수가 2인 과목들의 강의 시수를 하나 증가 시키고, 강의실 을 Lab1로 변경하라.<br>update course set ctime&#x3D;ctime + 1, croom&#x3D;’Lab1’ where ctime&#x3D;2;</p>
<h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><blockquote>
<p>DELETE FROM tbl_name<br>[WHERE where_definition] [LIMIT rows]</p>
</blockquote>
<p>예제-15 ) 국문학과 학생 레코드를 삭제하는 문장을 작성하라.<br>delete fromstudent where sdept &#x3D;’국문학과’;</p>
<h2 id="PyMySQL-튜토리얼"><a href="#PyMySQL-튜토리얼" class="headerlink" title="PyMySQL 튜토리얼"></a>PyMySQL 튜토리얼</h2><p>PyMySQL 설치</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install PyMySQL</span><br></pre></td></tr></table></figure>

<blockquote>
<p>만약 pip 로 설치가 안되면 다음 같이 setup.py를 이용해 직접 설치 할 수 있다.<br>$ # X.X is the desired PyMySQL version (e.g. 0.5 or 0.6).<br>$ curl -L <a target="_blank" rel="noopener" href="https://github.com/PyMySQL/PyMySQL/tarball/pymysql-X.X">https://github.com/PyMySQL/PyMySQL/tarball/pymysql-X.X</a> | tar xz<br>$ cd PyMySQL*<br>$ python setup.py install<br>$ # The folder PyMySQL* can be safely removed now.</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (</span><br><span class="line">    <span class="string">&#x27;id&#x27;</span> <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span> <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span> <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin AUTO_INCREMENT<span class="operator">=</span><span class="number">1</span> ;</span><br></pre></td></tr></table></figure>

<p>데이터베이스 삭제</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop database mydb;</span><br></pre></td></tr></table></figure>

<h4 id="사용자-비밀번호-변경"><a href="#사용자-비밀번호-변경" class="headerlink" title="사용자 비밀번호 변경"></a>사용자 비밀번호 변경</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> password <span class="keyword">for</span> <span class="string">&#x27;&#x27;</span>myid<span class="string">&#x27;&#x27;</span>@<span class="string">&#x27;&#x27;</span>localhost<span class="string">&#x27;&#x27;</span> <span class="operator">=</span> password(<span class="string">&#x27;&#x27;</span>password<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="테이블-생성"><a href="#테이블-생성" class="headerlink" title="테이블 생성"></a>테이블 생성</h4><p>show 명령으로 데이터베이스 자원 현환을 볼 수 있다.</p>
<blockquote>
<p>mysql&gt; help show</p>
</blockquote>
<p>다음은 데이터베이스 목록을 보고, ‘mydb’를 사용합니다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> databases;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> Database           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> information_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mydb               <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> performance_schema <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span>use mydb</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>테이블 현황</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_mydb <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> test           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>테이블 만들기</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> users (\</span><br><span class="line">    id <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,\</span><br><span class="line">    email <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span>,\</span><br><span class="line">    password <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">COLLATE</span> utf8_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span>,\</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id)\</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_bin\</span><br><span class="line">AUTO_INCREMENT<span class="operator">=</span><span class="number">1</span> ;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>mysql&gt; 터미널에서 여러 줄의 명령을 입력하기 위해서 줄의 끝에 ‘&#39;를 사용해서 여러줄을 입력했다.</li>
</ul>
<p>이럴게 만들어진 테이블은 show 명령으로 작성 스크립트를 확인할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create table <span class="built_in">users</span>;</span><br><span class="line">| Table | Create Table                                                         | <span class="built_in">users</span> | CREATE TABLE `<span class="built_in">users</span>` (</span><br><span class="line">  `<span class="built_in">id</span>` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `email` varchar(255) COLLATE utf8_bin NOT NULL,</span><br><span class="line">  `password` varchar(255) COLLATE utf8_bin NOT NULL,</span><br><span class="line">  PRIMARY KEY (`<span class="built_in">id</span>`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin |</span><br><span class="line"></span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>테이블의 구성 요소는 desc 명령을 확인할 수 있다.</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">desc</span> users;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------+------+-----+---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> Field    <span class="operator">|</span> Type         <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------+------+-----+---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> id       <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>)      <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span> auto_increment <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> email    <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">255</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> password <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">255</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------+------+-----+---------+----------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h4 id="데이터-입력-1"><a href="#데이터-입력-1" class="headerlink" title="데이터 입력"></a>데이터 입력</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> users <span class="keyword">values</span> (<span class="number">0</span>, <span class="string">&#x27;aaa@example.com&#x27;</span>, <span class="string">&#x27;sldfjslfj&#x27;</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> users <span class="keyword">values</span> (<span class="number">0</span>, <span class="string">&#x27;bbb@example.com&#x27;</span>, <span class="string">&#x27;sldfjslfj&#x27;</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> users <span class="keyword">values</span> (<span class="number">0</span>, <span class="string">&#x27;ccc@example.com&#x27;</span>, <span class="string">&#x27;sldfjslfj&#x27;</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> users <span class="keyword">values</span> (<span class="number">0</span>, <span class="string">&#x27;ddd@example.com&#x27;</span>, <span class="string">&#x27;sldfjslfj&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="Alter"><a href="#Alter" class="headerlink" title="Alter"></a>Alter</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> #컬럼 추가</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> users <span class="keyword">add</span> first_name <span class="type">varchar</span>(<span class="number">10</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> users <span class="keyword">add</span> last_name <span class="type">char</span>(<span class="number">10</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> users <span class="keyword">add</span> point <span class="type">int</span>(<span class="number">5</span>);</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> users <span class="keyword">add</span> gener <span class="type">int</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> #컬럼 삭제</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> users <span class="keyword">drop</span> gener;</span><br></pre></td></tr></table></figure>

<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><ul>
<li><a target="_blank" rel="noopener" href="https://pythonschool.net/category/databases.html">https://pythonschool.net/category/databases.html</a></li>
</ul>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/categories/Programming/Database/">이전</a></div><div class="pagination-next"><a href="/categories/Programming/Database/page/3/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/categories/Programming/Database/">1</a></li><li><a class="pagination-link is-current" href="/categories/Programming/Database/page/2/">2</a></li><li><a class="pagination-link" href="/categories/Programming/Database/page/3/">3</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/qkboo_400.png" alt="Gangtai"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Gangtai</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Paju, South Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">171</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">19</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">253</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/thinkbee" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/gangtaigoh"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-03-11T00:00:00.000Z">2025-03-11</time></p><p class="title"><a href="/python-mamba-micromamba-install-135c207e8538/">mamba / micromamba 요약 정리</a></p><p class="categories"><a href="/categories/Programming-Python/">Programming, Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-02-02T01:00:00.000Z">2025-02-02</time></p><p class="title"><a href="/llama-model-bench-rtx3080ti-e1cdcf8d9cee/">Local LLM 실험: RTX 3080Ti 에서 bench mark 결과</a></p><p class="categories"><a href="/categories/AI/">AI</a> / <a href="/categories/AI/LLM/">LLM</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-02-01T00:00:00.000Z">2025-02-01</time></p><p class="title"><a href="/llama_deepseekr1_distill_llama8b_rtx3080ti-4ab221cf05b4/">Local LLM 실험: DeepSeek-R1-Distill-Llama-8B, RTX 3080 TI</a></p><p class="categories"><a href="/categories/AI/">AI</a> / <a href="/categories/AI/LLM/">LLM</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-31T10:00:00.000Z">2025-01-31</time></p><p class="title"><a href="/llama_qwen2_5_rtx3080ti-929883fc2d56/">Local LLM 실험: Qwen2.5-32B-Instruct, RTX 3080 TI</a></p><p class="categories"><a href="/categories/AI/">AI</a> / <a href="/categories/AI/LLM/">LLM</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-31T00:00:00.000Z">2025-01-31</time></p><p class="title"><a href="/llama_billossom_rtx3080ti-e816dc0fd375/">Local LLM 실험: llama-3-Korean-Bllossom-8B, RTX 3080 TI</a></p><p class="categories"><a href="/categories/AI/">AI</a> / <a href="/categories/AI/LLM/">LLM</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1465716454138955" data-ad-slot="4441624809" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI/"><span class="level-start"><span class="level-item">AI</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/AI/LLM/"><span class="level-start"><span class="level-item">LLM</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/ETC/"><span class="level-start"><span class="level-item">ETC</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/IT/"><span class="level-start"><span class="level-item">IT</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/"><span class="level-start"><span class="level-item">OS</span></span><span class="level-end"><span class="level-item tag">56</span></span></a><ul><li><a class="level is-mobile" href="/categories/OS/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/Raspberry-Pi/"><span class="level-start"><span class="level-item">Raspberry Pi</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/Windows/"><span class="level-start"><span class="level-item">Windows</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">90</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Angularjs/"><span class="level-start"><span class="level-item">Angularjs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/C-C/"><span class="level-start"><span class="level-item">C/C++</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Nodejs/"><span class="level-start"><span class="level-item">Nodejs</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/R/"><span class="level-start"><span class="level-item">R</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Programming-Python/"><span class="level-start"><span class="level-item">Programming, Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/github/"><span class="level-start"><span class="level-item">github</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/thinkbee_logo.png" alt="IT Tech blogging" height="28"></a><p class="is-size-7"><span>&copy; 2025 Gangtai Goh</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>