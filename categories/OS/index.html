<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>카테고리: OS - IT Tech blogging</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="thinkbee blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="thinkbee blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"><meta property="og:type" content="website"><meta property="og:title" content="IT Tech blogging"><meta property="og:url" content="https://blog.thinkbee.kr/"><meta property="og:site_name" content="IT Tech blogging"><meta property="og:description" content="Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://blog.thinkbee.kr/img/og_image.png"><meta property="article:author" content="Gangtai Goh"><meta property="article:tag" content="Machine learning, Deep learning, Python, Data science, Android, Ubuntu, Linux, macOS"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.thinkbee.kr/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.thinkbee.kr"},"headline":"IT Tech blogging","image":["https://blog.thinkbee.kr/img/og_image.png"],"author":{"@type":"Person","name":"Gangtai Goh"},"publisher":{"@type":"Organization","name":"IT Tech blogging","logo":{"@type":"ImageObject","url":"https://blog.thinkbee.kr/images/thinkbee_logo.png"}},"description":"Machine learning, Deep learning, Python, Data science and Mobile Programming like Android"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs2015.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-5ZH90CZ414" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-5ZH90CZ414');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-1465716454138955" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/thinkbee_logo.png" alt="IT Tech blogging" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Blog</a><a class="navbar-item" href="/documents">Doc</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-four-fifths-tablet is-four-fifths-desktop is-four-fifths-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">카테고리</a></li><li class="is-active"><a href="#" aria-current="page">OS</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-07-17T18:00:00.000Z" title="7/18/2023, 3:00:00 AM">2023-07-18</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-08-04T23:39:35.454Z" title="8/5/2023, 8:39:35 AM">2023-08-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Linux/">Linux</a></span><span class="level-item">4분안에 읽기 (약 635 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/ubuntu-20.04-cheat_sheet-230a7dc631bf/">Ubuntu 20.04 - Cheat sheet</a></p><div class="content"><p>Ubuntu 20.04 를 설치&#x2F;운영하면서 필요한 팁&#x2F;트릭과 쓸모있는 사용법을 정리한다.</p>
<p>비슷한 문서:</p>
<ul>
<li><a href="/docker_cli_summary-84ee2a15f3e2/">Docker CLI Cheat sheet</a></li>
<li><a href="/linux-system-cheat-2be979083953/">Linux system cheat</a></li>
<li><a href="/2017-05-05-tmux-cheatsheet-38c090793298/">Tmux cheat sheet, 2017</a></li>
</ul>
<h1 id="Timezone-관련"><a href="#Timezone-관련" class="headerlink" title="Timezone 관련"></a>Timezone 관련</h1><p>CLI에서 설정을 할 수 있다.</p>
<p><code>timedatectl</code> timedatectl 명령으로</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ timedatectl list-timezones</span><br><span class="line">...</span><br><span class="line">Asia/Seoul</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">$ sudo timedatectl set-timezone Asia/Seoul</span><br></pre></td></tr></table></figure>

<p>만약 손으로 수정을 한다면, </p>
<p><code>timedatectl</code> 로 지정되는 설정 <strong>Timezone</strong>은 <code>/etc/localtime</code> 이라는 바이너리로 저장되므로<br>명령행에서 지원하는 timezone을 복사할 수 도 있다고 한다..</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo cp /usr/share/zoneinfo/Europe/London /etc/localtime</span><br></pre></td></tr></table></figure>

<h1 id="LCD-x2F-Screen-off"><a href="#LCD-x2F-Screen-off" class="headerlink" title="LCD&#x2F;Screen off"></a>LCD&#x2F;Screen off</h1><p>기존에 글 <a href="/2017-11-01-ubuntu-maintain-power-edfaa7d1d4f6/">Ubuntu&#x2F;시스템 전원관리, 2017년</a> 에서 Ubuntu 18.x 에서 디스플레이(특히 노트북 LCD)를 끄기 위해서 사용되던 직접 vbetool 명령으로 동작하지 않는다. </p>
<p>그래서 Ubuntu 20.04 에서는 링크 <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1277533/ubuntu-20-04-on-a-laptop-is-there-any-way-toturn-off-the-screen">ubuntu-20-04-on-a-laptop-is-there-any-way-toturn-off-the-screen</a> 에 있는 방법으로 사용하고 있다.</p>
<p>디스플레이를 끄려면 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o remount,exec /dev</span><br><span class="line">sudo vbetool dpms off</span><br><span class="line">sudo mount -o remount,noexec /dev</span><br></pre></td></tr></table></figure>

<p>다시 디스플레이를 켜려면</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o remount,exec /dev</span><br><span class="line">sudo vbetool dpms on</span><br><span class="line">sudo mount -o remount,noexec /dev</span><br></pre></td></tr></table></figure>

<h1 id="Network-상태-확인"><a href="#Network-상태-확인" class="headerlink" title="Network 상태 확인"></a>Network 상태 확인</h1><h2 id="ss-명령"><a href="#ss-명령" class="headerlink" title="ss 명령"></a>ss 명령</h2><p>ss 명령은 Socket Statistics 를 출력해 준다. open 된 소켓에 대한 정보를 표시한다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ss [-a -t -u -l -p -n] [filter]</span><br><span class="line"></span><br><span class="line">-a:</span><br><span class="line">-t: TCP</span><br><span class="line">-u: UDP</span><br><span class="line">-l: LISTEN 상태 포트</span><br><span class="line">-n: 호스트/포트/사용자 이름을 숫자로 표시</span><br><span class="line">-p: 프로세스 이름</span><br><span class="line">-r, --resolve:  resolve host names</span><br><span class="line">-w, --raw    :  display only RAW sockets</span><br><span class="line">-x, --unix   :  display only Unix domain sockets</span><br><span class="line">-4, --ipv4   :  display only IP version 4 sockets</span><br><span class="line">-6, --ipv6   :  display only IP version 6 sockets</span><br><span class="line">-m, --memory :  show socket memory usage</span><br></pre></td></tr></table></figure>

<h3 id="LISTEN-Port-확이"><a href="#LISTEN-Port-확이" class="headerlink" title="LISTEN Port 확이"></a>LISTEN Port 확이</h3><p>netstat 같이 LISTEN 상태 프로세스를 확인할 수 있다. 다음은 t: tcp 포트, l: LISTEN 상태의 소켓 정보를 출력한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">ss -lntu</span></span><br><span class="line">Netid      State       Recv-Q      Send-Q                   Local Address:Port            Peer Address:Port     Process</span><br><span class="line">udp        UNCONN      0           0                        127.0.0.53%lo:53                   0.0.0.0:*</span><br><span class="line">udp        UNCONN      0           0                12.42.168.213%enp3s0:68                   0.0.0.0:*</span><br><span class="line">tcp        LISTEN      0           511                            0.0.0.0:80                   0.0.0.0:*</span><br><span class="line">tcp        LISTEN      0           4096                     127.0.0.53%lo:53                   0.0.0.0:*</span><br><span class="line">tcp        LISTEN      0           10                           127.0.0.1:9000                0.0.0.0:*</span><br><span class="line">tcp        LISTEN      0           511                            0.0.0.0:443                  0.0.0.0:*</span><br><span class="line">tcp        LISTEN      0           128                            0.0.0.0:53000                0.0.0.0:*</span><br><span class="line">tcp        LISTEN      0           128                            0.0.0.0:2020                 0.0.0.0:*</span><br></pre></td></tr></table></figure>

<h3 id="IPv4-IPv6-소켓"><a href="#IPv4-IPv6-소켓" class="headerlink" title="IPv4, IPv6 소켓"></a>IPv4, IPv6 소켓</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ss -tl4</span><br><span class="line">State         Recv-Q        Send-Q               Local Address:Port                 Peer Address:Port        Process</span><br><span class="line">LISTEN        0             511                        0.0.0.0:http                      0.0.0.0:*</span><br><span class="line">LISTEN        0             511                        0.0.0.0:https                     0.0.0.0:*</span><br><span class="line">$</span><br><span class="line">$ ss -tl6</span><br><span class="line">State         Recv-Q        Send-Q               Local Address:Port                 Peer Address:Port        Process</span><br><span class="line">LISTEN        0             128                           [::]:2020                         [::]:*</span><br><span class="line">q</span><br></pre></td></tr></table></figure>


<h2 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h2><p>Linux에서 open file을 확인하는데 사용되는 lsof 명령입니다. Unix&#x2F;Linux의 모든 것은 파일로 이루어져있기때문에 스트림이나 네트워크 파일도 lsof 로 확인할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ lsof -i</span><br><span class="line">$ lsof -l</span><br></pre></td></tr></table></figure>


<h1 id="—"><a href="#—" class="headerlink" title="—"></a>—</h1><p> <a href="/2017-11-01-ubuntu-maintain-power-edfaa7d1d4f6/">Ubuntu&#x2F;시스템 전원관리, 2017년</a> </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-14T06:00:00.000Z" title="5/14/2023, 3:00:00 PM">2023-05-14</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-08-04T22:10:28.743Z" title="8/5/2023, 7:10:28 AM">2023-08-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Linux/">Linux</a></span><span class="level-item">7분안에 읽기 (약 1118 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/docker_cli_summary-84ee2a15f3e2/">Docker CLI 요약</a></p><div class="content"><p>docker cli 명령을 정리</p>
<p><img src='https://www.simplilearn.com/ice9/free_resources_article_thumb/DockerArchitecture_1.png' width=600 alt='docker architecture'> <a target="_blank" rel="noopener" href="https://www.simplilearn.com/tutorials/docker-tutorial/docker-architecture">이미지 소스</a></p>
<p>비슷한 문서:</p>
<ul>
<li><a href="/ubuntu-20.04-cheat_sheet-230a7dc631bf/">Ubuntu 20.04 - Cheat sheet</a></li>
<li><a href="/linux-system-cheat-2be979083953/">Linux system cheat</a></li>
<li><a href="/2017-05-05-tmux-cheatsheet-38c090793298/">Tmux cheat sheet, 2017</a></li>
</ul>
<h2 id="docker-cli"><a href="#docker-cli" class="headerlink" title="docker cli"></a>docker cli</h2><p>docker cli는 <code>docker</code> 명령 뒤에 docker commands 로 도커를 제어한다. 그리고 대상 컨테이너를 지정하고 컨테이너에서 실행 할 수 있는 명령형식으로 구성되어 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker [docker commands] [container] [container <span class="built_in">command</span>] </span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/cli/">Use the Docker command line docker</a></p>
<h2 id="search-이미지-검색"><a href="#search-이미지-검색" class="headerlink" title="search 이미지 검색"></a>search 이미지 검색</h2><p>Docker hub에서 이미지를 검색한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search busybox</span><br></pre></td></tr></table></figure>

<p>Docker hub에서 상위 몇개 정도만 검색하고 싶을때 limit 옵션을 사용한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search busybox --<span class="built_in">limit</span> 5</span><br></pre></td></tr></table></figure>

<p>Docker hub에서는 이미지 중 별점을 검색한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 최소 별정 50인 이미지</span></span><br><span class="line">docker search busybox --filter=stars=50</span><br><span class="line"></span><br><span class="line"><span class="comment"># 별점이 3인 이미지</span></span><br><span class="line">docker search --filter stars=50 busybox</span><br></pre></td></tr></table></figure>

<p>정규 빌드 버전만 지시하려면 <code>is-official</code> 옵션 사용</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search --filter is-official=true --filter stars=50 busybox</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>--format</code> 옵션을 사용해 출력되는 내용을 필터링 할 수 있다. 다음은 별점만 출력하는 예이다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search --format &quot;&#123;&#123;.Name&#125;&#125;: &#123;&#123;.StarCount&#125;&#125;&quot; nginx</span><br></pre></td></tr></table></figure>


<h2 id="pull-이미지를-다운로드-한다"><a href="#pull-이미지를-다운로드-한다" class="headerlink" title="pull 이미지를 다운로드 한다"></a>pull 이미지를 다운로드 한다</h2><p>Docker image를 내려 받는다. 이미지 이름 뒤에 <code>:[version]</code> 을 붙이면 지정한 버전을 내려 받고, latest 를 붙이면 최신 버전을 대상으로 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx:latest</span><br></pre></td></tr></table></figure>


<h2 id="images-다운로드-이미지"><a href="#images-다운로드-이미지" class="headerlink" title="images 다운로드 이미지"></a>images 다운로드 이미지</h2><p>Docker에서 다운로드 받는 이미지를 확인한다. docker images는 모든 이미지를 보여준다. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker images</span></span><br></pre></td></tr></table></figure>


<p>특정 이미지만 지시할 수 있다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker images nginx</span></span><br></pre></td></tr></table></figure>

<h2 id="run-이미지를-컨테이너로-실행한다"><a href="#run-이미지를-컨테이너로-실행한다" class="headerlink" title="run 이미지를 컨테이너로 실행한다."></a>run 이미지를 컨테이너로 실행한다.</h2><p>Docker image를 컨테이너로 생성하고, 실행합니다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 8080:8080 nginx</span><br></pre></td></tr></table></figure>

<p>옵션:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">`-p`: Local과 Container 와 port를 연결하는 옵션</span><br><span class="line">`-i`: interactive (대화방식)</span><br><span class="line">`-t`: Pseudo-tty (콘솔 및 터미널 환경)</span><br><span class="line">`— name`: 실행 컨테이너 이름을 지정합니다.</span><br><span class="line">`-d`: 백그라운드에서 실행되는 옵션입니다.</span><br></pre></td></tr></table></figure>

<p>docker image를 실행하고 bash 쉘을 연다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t --name nginx nginx bash</span><br></pre></td></tr></table></figure>

<h2 id="ps-컨테이너-목록을-확인"><a href="#ps-컨테이너-목록을-확인" class="headerlink" title="ps 컨테이너 목록을 확인"></a>ps 컨테이너 목록을 확인</h2><p>Docker 컨테이너 목록을 확인합니다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker ps</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">docker ps -a</span></span><br></pre></td></tr></table></figure>

<p>옵션:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`-a` : 실행 중이 아닌 컨테이너까지 확인</span><br><span class="line">`-q` : 컨테이너의 CONTAINER ID 만 표시</span><br></pre></td></tr></table></figure>

<h2 id="start-컨테이너를-시작한다"><a href="#start-컨테이너를-시작한다" class="headerlink" title="start 컨테이너를 시작한다."></a>start 컨테이너를 시작한다.</h2><p>중단되어 있는 컨테이너를 실행합니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker start nginx</span><br><span class="line">nginx</span><br></pre></td></tr></table></figure>


<h2 id="attach-컨테이너-연결"><a href="#attach-컨테이너-연결" class="headerlink" title="attach 컨테이너 연결"></a>attach 컨테이너 연결</h2><p>실행중인 Docker Container 의  standard input, output,  error streams 에 연결한다. </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach nginx</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/attach/">docker attach</a> 명령 사용 사례.</p>
<h2 id="exec-컨테이너-명령-실행"><a href="#exec-컨테이너-명령-실행" class="headerlink" title="exec 컨테이너 명령 실행"></a>exec 컨테이너 명령 실행</h2><p>Docker Container의 쉘의 명령어을 실행할 수 있다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec nginx ls</span><br></pre></td></tr></table></figure>

<p>옵션</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-d, --detach : 명령을 detach mode, 백그라운드로 실행</span><br><span class="line">-e, --env : 환경변수 설정하고 실행</span><br><span class="line">-it [SHELL]: iteractive tty 옵션. 사용할 shell을 지시한다, 보통  bash</span><br><span class="line">-u, --user: User ID, UID</span><br><span class="line">-w, --workdir: 작업 디렉토리 지정</span><br></pre></td></tr></table></figure>

<p>다음은 nginx 컨테이너의 bash 쉘을 실행한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it nginx bash</span><br></pre></td></tr></table></figure>

<p>다음은 nginx 컨테이너를 qkboo 사용자 쉘로 연결한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it -u qkboo nginx bash</span><br></pre></td></tr></table></figure>


<h2 id="inspect-컨테이너-상세-정보"><a href="#inspect-컨테이너-상세-정보" class="headerlink" title="inspect 컨테이너 상세 정보"></a>inspect 컨테이너 상세 정보</h2><p>Docker Container에 상세 정보를 확인 한다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect nginx</span><br></pre></td></tr></table></figure>

<p>옵션</p>
<p><code>--format</code> : 필터링</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect  --format=&#x27;&#123;&#123;range .NetworkSettings.Networks&#125;&#125;</span><br></pre></td></tr></table></figure>


<h2 id="logs-명령"><a href="#logs-명령" class="headerlink" title="logs 명령"></a>logs 명령</h2><p>Docker 컨테이너에서 sysout 또는 syserr 로그를 보려면 logs 명령을 사용한다.</p>
<p>docker logs <container_id></p>
<h2 id="stop-컨테이너-종료"><a href="#stop-컨테이너-종료" class="headerlink" title="stop 컨테이너 종료"></a>stop 컨테이너 종료</h2><p>ps 명령으로 실행중인 컨테이너 아이디와 이름을 확인하고 아이디를 준다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br><span class="line"></span><br><span class="line">docker stop e417951d25fd</span><br></pre></td></tr></table></figure>


<p>이름으로 종료시  <code>--name</code> 옵션 사용</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop --name nginx2</span><br></pre></td></tr></table></figure>


<h2 id="rm-컨테이너를-삭제한다"><a href="#rm-컨테이너를-삭제한다" class="headerlink" title="rm 컨테이너를 삭제한다."></a>rm 컨테이너를 삭제한다.</h2><p>Docker Container 삭제합니다. 삭제할때는 실행 상태가 아닌 컨테이너만 가능합니다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm nginx</span><br></pre></td></tr></table></figure>

<p>강제 삭제시 <code>-f</code> 옵션 사용.</p>
<h2 id="rmi-이미지를-삭제한다"><a href="#rmi-이미지를-삭제한다" class="headerlink" title="rmi 이미지를 삭제한다."></a>rmi 이미지를 삭제한다.</h2><p>Docker image를 삭제 하는데 이미지가 중첩된 경우가 많기 때문에 링크 같이 untag 한 후 사용한다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/rmi/#examples">rim example</a></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rmi fd484f19954f</span><br><span class="line"></span><br><span class="line">docker rmi test2:latest</span><br></pre></td></tr></table></figure>

<p>혹은 <code>-f</code> 옵션으로 중첩된 이미지를 모두 함께 삭제 할 수 있다.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f fd484f19954f</span><br></pre></td></tr></table></figure>


<hr>
<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/cli/">Use the Docker command line docker</a></li>
<li><a target="_blank" rel="noopener" href="https://medium.com/@jyson88/docker-cli-%EC%A0%95%EB%A6%AC-cb031c281e2f">Docker CLI 정리, blog</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-28T00:00:00.000Z" title="4/28/2023, 9:00:00 AM">2023-04-28</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-14T06:09:15.183Z" title="5/14/2023, 3:09:15 PM">2023-05-14</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Linux/">Linux</a></span><span class="level-item">7분안에 읽기 (약 1032 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/20230428-HTTPS_Private_SSL-4271241fb2d7/">HTTPS 를 위한 Private SSL</a></p><div class="content"><p>Web server certificates 과정</p>
<img src='https://ronnyvandenbroeck.files.wordpress.com/2019/10/web-server-certificate.png' width=600>


<h1 id="Securing-a-web-site-with-a-server-certificate-단계"><a href="#Securing-a-web-site-with-a-server-certificate-단계" class="headerlink" title="Securing a web site with a server certificate 단계"></a>Securing a web site with a server certificate 단계</h1><ol>
<li>비밀키를 생성한다.</li>
<li>비밀키로 CSR certificate siging requests 을 생성한다.</li>
<li>CSR 을 CA 로 사인한다.</li>
<li>사인한 CERT 를 받고 설치한다.</li>
</ol>
<h2 id="1-비밀키를-생성한다"><a href="#1-비밀키를-생성한다" class="headerlink" title="1. 비밀키를 생성한다."></a>1. 비밀키를 생성한다.</h2><p>rsa 를 사용해 4096크기 비밀키를 생성한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cd /etc/ssl/private </span></span><br><span class="line"><span class="comment"># openssl genrsa -out my_rsa.key 4096</span></span><br><span class="line">Generating RSA private key, 4096 bit long modulus (2 primes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># chmod 0600 private/my_rsa.key</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># chmod 0600 private/my_rsa.key</span></span><br></pre></td></tr></table></figure>


<h2 id="Public-Key-생성"><a href="#Public-Key-생성" class="headerlink" title="Public Key 생성"></a>Public Key 생성</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">명령: openssl rsa -in [private key 파일명] -pubout -out [파일명]</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openssl rsa -in my_rsa.key -pubout -out my_rsa.pub </span></span><br></pre></td></tr></table></figure>



<h2 id="2-Create-a-CSR-certificate-signing-request-from-this-key"><a href="#2-Create-a-CSR-certificate-signing-request-from-this-key" class="headerlink" title="2. Create a CSR(certificate signing request) from this key,"></a>2. Create a CSR(certificate signing request) from this key,</h2><p>인증서 발급을 위한 필요한 정보를 담고 있는 인증서 신청서를 작성한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">명령어 : openssl req -new -key [private key 파일명] -out [파일명]</span><br></pre></td></tr></table></figure>


<p>비밀키에서 CSR 파일 작성을 요청하면 아래 내용을 묻는다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openssl req -new -sha256 -key ./my_rsa.key -out ./my_rsa.csr </span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># openssl req -new -key private.key -out private.csr</span></span><br></pre></td></tr></table></figure>

<p>인증서 발급을 위한 필요한 정보를 담고 있는 인증서 신청 형식 데이터 이다. </p>
<ul>
<li>Country Name (국가코드) 	 KR</li>
<li>State or Province Name (시&#x2F;도의 전체이름)	 Seoul</li>
<li>Locality Name (시&#x2F;군&#x2F;구 등의 이름)	 Songpa-gu </li>
<li>Organization (회사이름)	 XXXX</li>
<li>Organization Unit (부서명)	 Server</li>
<li>Common Name (SSL 인증서를 설치할 서버의 Full Domain)	 <a target="_blank" rel="noopener" href="http://www.xxxx.com/">www.xxxx.com</a><ul>
<li><ul>
<li>Common Name 에는 인증서를 설치할 사이트의 도메인의 이름을 넣어야 한다. (ip, port, http, https 포함불가능)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="4-CA-인증한-CRT-인증서-만들기"><a href="#4-CA-인증한-CRT-인증서-만들기" class="headerlink" title="4. CA 인증한 CRT 인증서 만들기"></a>4. CA 인증한 CRT 인증서 만들기</h2><p>CSR 을 CA에서 인증해 CRT 파일을 생성한다. 여기서는 비밀키와 CSR 요청서를 바탕으로 CRT 인증서를 생성한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">명령어 : openssl req -x509 -days [기간] -key [private key 파일명] -in [csr 파일명] -out [파일명] -days [기간]</span><br></pre></td></tr></table></figure>

<p>x509 를 이용하고 365일 사용 가능한 crt 인증서를 생성한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -days 365 -key my_rsa.key -<span class="keyword">in</span> my_rsa.csr -out my_rsa.crt -days 365</span><br></pre></td></tr></table></figure>

<p>생성한 혹은 CA에서 받은 CRT 파일은 아래 같이 확인해 볼 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -text -<span class="keyword">in</span> yourdomain.crt -noout</span><br></pre></td></tr></table></figure>

<h2 id="5-CRT-파일을-PEM-파일로-변환한다"><a href="#5-CRT-파일을-PEM-파일로-변환한다" class="headerlink" title="5. CRT 파일을 PEM 파일로 변환한다."></a>5. CRT 파일을 PEM 파일로 변환한다.</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> mycommoncrt.crt -out mycommonpem.pem -outform PEM </span><br></pre></td></tr></table></figure>


<h2 id="Tip-인증서-Config-파일-test-conf"><a href="#Tip-인증서-Config-파일-test-conf" class="headerlink" title="[Tip] 인증서 Config 파일 (test.conf)"></a>[Tip] 인증서 Config 파일 (test.conf)</h2><p>위에서 만들다 보면 계속 같은 내용을 써야 한다. 그래서 그 부분을 파일로 만들어 놓고 csr, crt 생성할때 사용하면 된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[req]</span><br><span class="line">default_bits = 2048</span><br><span class="line">prompt = no</span><br><span class="line">default_md = sha256</span><br><span class="line">req_extensions = req_ext</span><br><span class="line">distinguished_name = dn</span><br><span class="line"></span><br><span class="line">[dn]</span><br><span class="line">C=KR</span><br><span class="line">ST=Seoul</span><br><span class="line">L=Seoul</span><br><span class="line">O=COMPANY</span><br><span class="line">OU=DEV</span><br><span class="line">emailAddress=test@test.com</span><br><span class="line">CN = testmachine</span><br><span class="line"></span><br><span class="line">[req_ext]</span><br><span class="line">subjectAltName = @alt_names</span><br><span class="line"></span><br><span class="line">[alt_names]</span><br><span class="line">IP.1 = 111.111.111.111</span><br><span class="line">DNS.1 = test.com</span><br></pre></td></tr></table></figure>

<p>csr 을 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key private.key -out private.csr -config test.conf</span><br></pre></td></tr></table></figure>

<p>csr, crt 파일을 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -days 365 -key private.key -<span class="keyword">in</span> private.csr -out mycommoncrt.crt -days 365 -config test.conf</span><br></pre></td></tr></table></figure>


<p>그리고 이렇게 해서 인증서를 만들었을때 subjectAltName 이 안들어간다 . 그 부분이 필요할 경우에는 이렇게 명령어를 사용하면 된다. </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -x509 -days 365 -key private.key -<span class="keyword">in</span> private.csr -out mycommoncrt.crt -days 365 -config test.conf -extensions req_ext</span><br></pre></td></tr></table></figure>


<h2 id="openssl-팁-몇가지"><a href="#openssl-팁-몇가지" class="headerlink" title="openssl 팁 몇가지"></a>openssl 팁 몇가지</h2><h3 id="CRT-파일-확인"><a href="#CRT-파일-확인" class="headerlink" title="CRT 파일 확인"></a>CRT 파일 확인</h3><p>openssl x509 -text -noout -in &lt;인증서파일&gt;  : 인증서 내용을 볼수 있다.</p>
<h3 id="Verifying-Your-Keys-Match"><a href="#Verifying-Your-Keys-Match" class="headerlink" title="Verifying Your Keys Match"></a>Verifying Your Keys Match</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openssl pkey -pubout -<span class="keyword">in</span> .\private.key | openssl sha256</span><br><span class="line">openssl req -pubkey -<span class="keyword">in</span> .\request.csr -noout | openssl sha256</span><br><span class="line">openssl x509 -pubkey -<span class="keyword">in</span> .\certificate.crt -noout | openssl sha256</span><br></pre></td></tr></table></figure>


<h1 id="NGINX-웹-서버-TLS-암호화-추가"><a href="#NGINX-웹-서버-TLS-암호화-추가" class="headerlink" title="NGINX 웹 서버 TLS 암호화 추가"></a>NGINX 웹 서버 TLS 암호화 추가</h1><p>개인키와 TLS 인증서 crt 파일을 사용한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkdir /etc/nginx/tls/private</span><br><span class="line">$ mv my_rsa.key my_rsa.crt /etc/nginx/tls/private</span><br></pre></td></tr></table></figure>

<ol>
<li>개인 키는 &#x2F;etc&#x2F;nginx&#x2F;tls&#x2F;private&#x2F;my_rsa.key 파일에 저장됩니다.</li>
<li>개인 키 및 CSR(인증서 서명 요청) 생성 및 CA(인증 기관)에서 인증서 TLS 인증서는 <ul>
<li>&#x2F;etc&#x2F;nginx&#x2F;tls&#x2F;private&#x2F;example.com.crt 파일에 저장됩니다.</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen              443 ssl;</span><br><span class="line">    server_name         www.thinkbee.kr;</span><br><span class="line">    root                /home/qkboo/Home/www/thinkbee.kr/;</span><br><span class="line">    ssl_certificate     /etc/nginx/tls/private/my_rsa.crt;</span><br><span class="line">    ssl_certificate_key /etc/nginx/tls/private/my_rsa.key;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<br>

<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ol>
<li><a target="_blank" rel="noopener" href="https://blog.ronnyvdb.net/2019/10/02/howto-install-company-signed-web-server-certificate/">Howto – Install a self signed web server certificate</a></li>
<li><a target="_blank" rel="noopener" href="https://www.digicert.com/kb/ssl-support/openssl-quick-reference-guide.htm">openssl quick reference guide</a></li>
<li><a target="_blank" rel="noopener" href="https://blusky10.tistory.com/352">Openssl로 SSL 을 위한 인증서 발급하기 (HTTPS),blog</a></li>
<li><a href="/2017/04/04/linux/2017-04-04-ubuntu-nginx-ssl/">Nginx - HTTPS and Certificate SSL,blog</a></li>
<li><a href="/2017/04/01/nodejs/nodejs-nginx/">NodeJS와 Nginx 웹 서버,blog</a></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-05T00:00:00.000Z" title="4/5/2023, 9:00:00 AM">2023-04-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-14T06:06:19.743Z" title="5/14/2023, 3:06:19 PM">2023-05-14</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Linux/">Linux</a></span><span class="level-item">5분안에 읽기 (약 824 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/linux-disk-partition_format-a1ed845ba2be/">parted로 Partition, Format하기</a></p><div class="content"><p>새 디스크 &#x2F; USB 저장장치를 리눅스 계열에서 사용하고자 할 때.</p>
<h2 id="디스크-확인-lsblk"><a href="#디스크-확인-lsblk" class="headerlink" title="디스크 확인 lsblk"></a>디스크 확인 lsblk</h2><p>lsblk 명령은 디바이스 장치가 마운트 된 곳을 출력해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NAME                      MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">loop0                       7:0    0  63.3M  1 loop /snap/core20/1828</span><br><span class="line">loop1                       7:1    0  91.8M  1 loop /snap/lxd/23991</span><br><span class="line">sda                         8:0    0 119.2G  0 disk</span><br><span class="line">├─sda1                      8:1    0     1M  0 part</span><br><span class="line">├─sda2                      8:2    0     1G  0 part /boot</span><br><span class="line">└─sda3                      8:3    0 118.2G  0 part</span><br><span class="line">  └─ubuntu--vg-ubuntu--lv 253:0    0 118.1G  0 lvm  /</span><br></pre></td></tr></table></figure>

<p>새 디스크 장치(SSD, HDD, USB 등) 를 붙이고 다시 확인하면 새로운 디스크는 sd[a-z] 형식으로 표현된다.</p>
<blockquote>
<p>아래 sdb 는 현재 파티션이 1개 존재하는 상태이다.</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br><span class="line">NAME                      MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">loop0                       7:0    0  63.3M  1 loop /snap/core20/1828</span><br><span class="line">loop1                       7:1    0  91.8M  1 loop /snap/lxd/23991</span><br><span class="line">sda                         8:0    0 119.2G  0 disk</span><br><span class="line">├─sda1                      8:1    0     1M  0 part</span><br><span class="line">├─sda2                      8:2    0     1G  0 part /boot</span><br><span class="line">└─sda3                      8:3    0 118.2G  0 part</span><br><span class="line">  └─ubuntu--vg-ubuntu--lv 253:0    0 118.1G  0 lvm  /</span><br><span class="line">sdb                         8:16   0 931.5G  0 disk</span><br><span class="line">└─sdb1                      8:17   0 931.5G  0 part</span><br></pre></td></tr></table></figure>

<p><strong>[USB 장치]</strong></p>
<p>USB 장치는 <code>mmcblk[0-9]</code> 형식으로 표시된다. 참고 <a href="/2019/07/12/raspberrypi/sdcard-mmcblk/">Raspberry Pi:mmcblk</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br><span class="line">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda           8:0    0 119.2G  0 disk</span><br><span class="line">├─sda1        8:1    0  84.5G  0 part</span><br><span class="line">└─sda6        8:6    0  28.9G  0 part /</span><br><span class="line">mmcblk0     179:0    0   7.5G  0 disk</span><br><span class="line">├─mmcblk0p2 179:2    0   6.8G  0 part /media/qkboo/ROOT</span><br><span class="line">├─mmcblk0p3 179:3    0 486.1M  0 part</span><br><span class="line">└─mmcblk0p1 179:1    0   200M  0 part /media/qkboo/EFI</span><br></pre></td></tr></table></figure>


<h2 id="parted-사용"><a href="#parted-사용" class="headerlink" title="parted 사용"></a>parted 사용</h2><p>파티션 및 포맷을 위해 마운트된 파티션을 언마운트 한다. parted 는 상호작용 프롬프트에서 사용하거나 단일 명령어로 사용할 수 있다.</p>
<h3 id="parted-프롬프트-사용"><a href="#parted-프롬프트-사용" class="headerlink" title="parted 프롬프트 사용"></a>parted 프롬프트 사용</h3><p><strong>[ext4 파티션 생성]</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sudo parted /dev/sdb</span><br><span class="line">(parted) <span class="built_in">print</span></span><br><span class="line">Number  Start   End     Size    File system  Name     Flags</span><br><span class="line"> 1      0.00GB  32.0GB  32.0GB</span><br><span class="line"></span><br><span class="line">(parted) mklabel gpt</span><br><span class="line">Warning: The existing disk label on /dev/sda will be destroyed and all data on</span><br><span class="line">this disk will be lost. Do you want to <span class="built_in">continue</span>?</span><br><span class="line">Yes/No? y</span><br><span class="line"></span><br><span class="line">(parted) unit GB</span><br><span class="line">(parted) mkpart primary 0 1000.0GB     <span class="comment">#디스크 크기 입력</span></span><br><span class="line"></span><br><span class="line">(parted) <span class="built_in">print</span></span><br><span class="line">Number  Start   End     Size    File system  Name     Flags</span><br><span class="line"> 1      0.00GB  32.0GB  32.0GB               primary  lvm</span><br><span class="line">(parted) quit</span><br></pre></td></tr></table></figure>


<p><strong>[fat32 파티션 생성]</strong></p>
<p>USB 스토리지는 아래 같이 나타난다. 다음은 USB 파티션에 fat32 파일시스템을 프롬프트로 생성하고 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo parted /dev/mmcblk0</span><br><span class="line">(parted) mklabel msdos</span><br><span class="line">(parted) mkpart primary fat32 1MiB 100%</span><br><span class="line">(parted) <span class="built_in">set</span> 1 boot on</span><br><span class="line">(parted) quit</span><br></pre></td></tr></table></figure>



<h3 id="쉘에서-parted-명령-사용"><a href="#쉘에서-parted-명령-사용" class="headerlink" title="쉘에서 parted 명령 사용"></a>쉘에서 parted 명령 사용</h3><p>parted 를 쉘 명령으로 사용해 단계별로 파티션을 생성할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo parted /dev/mmcblk0 <span class="built_in">rm</span> 1</span><br><span class="line">sudo parted /dev/mmcblk0 <span class="built_in">rm</span> 2</span><br><span class="line">sudo parted /dev/sdc mkpart primary ext3 4MiB 100%</span><br></pre></td></tr></table></figure>


<h2 id="Format-Mount-amp-fstab"><a href="#Format-Mount-amp-fstab" class="headerlink" title="Format, Mount &amp; fstab"></a>Format, Mount &amp; fstab</h2><p>생성한 파티션에 시스템 지원 파일 시스템을 생성해야 한다. 해당 파일 시스템으로 파티션을 포맷한 후에 지정한 디렉토리에 마운트를 해서 사용하면 된다. 지속적인 사용을 위해서 <code>/etc/fstab</code> 에 파티션을 마운트 포인트로 등록하면 재시동 후에도 동일한 폴더에 마운트 된다.</p>
<h3 id="mkfs"><a href="#mkfs" class="headerlink" title="mkfs"></a>mkfs</h3><p>mkfs 명령은 파일 시스템에 따랴서 <code>-t</code> 옵션에 파일시스템을 지시하거나 <code>mkfs.[FS]</code> 형식을 명령을 바로 쓰기도 한다.</p>
<p>다음을 sdb1 파티션을 ext4 로 포맷하고 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkfs -t ext4 /dev/sdb1</span><br></pre></td></tr></table></figure>


<p><strong>[USB vfat 파일시스템 생성]</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mkfs -V -t vfat /dev/mmcblk0p1</span><br></pre></td></tr></table></figure>

<h3 id="fstab-에-등록"><a href="#fstab-에-등록" class="headerlink" title="fstab 에 등록"></a>fstab 에 등록</h3><p>&#x2F;etc&#x2F;fstab 에 새로 포맷한 디스크 경로를 추가 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># HDD</span><br><span class="line">/dev/sdb1           /Home2 ext4 defaults 0 1</span><br><span class="line"></span><br><span class="line"># USB LV volume</span><br><span class="line">/dev/vg_usb/dbvol   /data ext4 defaults 0 1</span><br><span class="line">/dev/vg_usb/workvol /home/pi/work ext4 defaults 0 1</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ul>
<li><a href="/2019/07/12/raspberrypi/sdcard-mmcblk/">Raspberry Pi:mmcblk, qkboo</a></li>
<li><a href="/2016/12/20/raspberrypi/sdcard-usage/">SD Card 포맷 및 디스크 이미지 사용하기, qkboo</a></li>
<li><a href="/2017/04/03/linux/2017-04-03-odroid-lvm2/">Linux LVM2,qkboo</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-01-25T06:00:00.000Z" title="1/25/2023, 3:00:00 PM">2023-01-25</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2024-01-14T23:15:01.268Z" title="1/15/2024, 8:15:01 AM">2024-01-15</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Windows/">Windows</a></span><span class="level-item">13분안에 읽기 (약 1990 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/wsl2-usage-2b45762ab581/">WSL2 잘 사용하기</a></p><div class="content"><p>WSL2 이용 Linux 사용시 쓸만한 팁</p>
<ol>
<li>wsl 사용 명령</li>
<li>WSL 쉘 사용</li>
<li>wsl 하위 시스템 디렉토리</li>
<li>wsl 구성 파일</li>
<li>wsl 외부 디스크 마운트 하기</li>
<li>wsl 배포본 이름 변경하기</li>
</ol>
<br>

<h1 id="1-wsl-사용-명령"><a href="#1-wsl-사용-명령" class="headerlink" title="1. wsl 사용 명령"></a>1. wsl 사용 명령</h1><h4 id="윈도우즈-하위-시스템-목록"><a href="#윈도우즈-하위-시스템-목록" class="headerlink" title="윈도우즈 하위 시스템 목록"></a>윈도우즈 하위 시스템 목록</h4><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Linux용 Windows 하위 시스템의 목록</span></span><br><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-l</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  Linux용 Windows 하위 시스템의 상태를 표시</span></span><br><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">--status</span></span><br></pre></td></tr></table></figure>

<h4 id="wsl-재시작"><a href="#wsl-재시작" class="headerlink" title="wsl 재시작"></a>wsl 재시작</h4><p>혹은 윈도우 서비스를 재시작할 수 있다. Windows에서 PowerShell을 관리자 권한으로 열고 다음 명령을 실행하면 됩니다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; <span class="built_in">Restart-Service</span> LxssManager</span><br></pre></td></tr></table></figure>


<h4 id="wsl-종료"><a href="#wsl-종료" class="headerlink" title="wsl 종료"></a>wsl 종료</h4><p>하위 시스템 배포본을 지정해 종료하려면 <code>-t &lt;Distro&gt;</code> 명령을 사용한다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-l</span></span><br><span class="line">Ubuntu<span class="literal">-20</span>.<span class="number">04</span>(기본값)</span><br><span class="line"></span><br><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-t</span> Ubuntu<span class="literal">-20</span>.<span class="number">04</span></span><br></pre></td></tr></table></figure>


<h4 id="wsl-shutdown"><a href="#wsl-shutdown" class="headerlink" title="wsl shutdown"></a>wsl shutdown</h4><p>모든 하위 시스템을 종료 시키려면 <code>--shutdown</code> 명령을 사용한다. <code>--shutdown</code> 명령은 실행 중인 모든 배포과 WSL 2 경량 유틸리티 가상 머신을 즉시 종료한다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">--shutdown</span></span><br></pre></td></tr></table></figure>

<h4 id="Unregister"><a href="#Unregister" class="headerlink" title="Unregister"></a>Unregister</h4><p>Window store 에서 설치한 배포본을 삭제해도 wsl 의 Distro 목록에는 남아 있다. 이것은 <code>--unregistre</code> 명령으로 제거할 수 있다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-l</span> <span class="literal">--all</span></span><br><span class="line">Linux용 Windows 하위 시스템 배포:</span><br><span class="line">Ubuntu<span class="literal">-20</span>.<span class="number">04</span>(기본값)</span><br><span class="line">Ubuntu<span class="literal">-22</span>.<span class="number">04</span></span><br></pre></td></tr></table></figure>

<p><code>--unregistre</code> 명령으로 제거한 Distro 등록을 해제한다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">--unregister</span> Ubuntu<span class="literal">-22</span>.<span class="number">04</span></span><br><span class="line">등록 취소 중입니다.</span><br><span class="line">작업을 완료했습니다.</span><br><span class="line"></span><br><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-l</span></span><br><span class="line">Linux용 Windows 하위 시스템 배포:</span><br><span class="line">Ubuntu<span class="literal">-20</span>.<span class="number">04</span>(기본값)</span><br></pre></td></tr></table></figure>


<br>

<h1 id="2-WSL-쉘-사용"><a href="#2-WSL-쉘-사용" class="headerlink" title="2. WSL 쉘 사용"></a>2. WSL 쉘 사용</h1><p><code>--system</code> : 현재 시스템의 distro의 셸을 시작한다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">--system</span></span><br><span class="line">wslg [ /<span class="type">mnt</span>/<span class="type">c</span>/<span class="type">Users</span>/<span class="type">daddy</span> ]<span class="variable">$</span> <span class="built_in">cd</span></span><br><span class="line">wslg [ ~ ]<span class="variable">$</span></span><br><span class="line">wslg [ ~ ]<span class="variable">$</span> <span class="keyword">exit</span></span><br><span class="line">logout</span><br></pre></td></tr></table></figure>

<p><code>--exec</code>, <code>-e</code>: 시스템 distro의 명령을 현재 PowerShell에서 실행한다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-e</span> bash</span><br><span class="line">()qkboo:/mnt/c/Users/daddy<span class="variable">$</span> <span class="built_in">cd</span></span><br><span class="line">()qkboo:~<span class="variable">$</span></span><br></pre></td></tr></table></figure>


<br>

<h1 id="2-WSL-하위-시스템-디렉토리"><a href="#2-WSL-하위-시스템-디렉토리" class="headerlink" title="2. WSL 하위 시스템 디렉토리"></a>2. WSL 하위 시스템 디렉토리</h1><p>윈도우즈와 하위 시스템의 디렉토리를 Host 의 프로그램 들에서 사용할 수 있다.</p>
<h3 id="탐색기에서-직접-접근하기"><a href="#탐색기에서-직접-접근하기" class="headerlink" title="탐색기에서 직접 접근하기"></a>탐색기에서 직접 접근하기</h3><p>윈도우즈에서 네트워크 경로로 WSL 하위 시스템 디렉토리를 접근할 수 있다. </p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\wsl<span class="variable">$</span>\&lt;Distribution&gt;:</span><br></pre></td></tr></table></figure>

<p>예를 들어 하위 시스템 이름이 Ubuntu-20.04 이고 계정이 qkboo 이라면 탐색기에서 qkboo 계정의 홈디렉토리를 이렇게 접그할 수 있다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\\wsl<span class="variable">$</span>\Ubuntu<span class="literal">-20</span>.<span class="number">04</span>\home\qkboo</span><br></pre></td></tr></table></figure>

<p>아래는 윈도우즈 탐색기에서 wsl 홈디렉토리를 접근한 캡쳐 화면인다.</p>
<img src='/images/programming/wsl-home-dir.png'>



<h3 id="터미널에서-홈디렉토리-탐색기-열기"><a href="#터미널에서-홈디렉토리-탐색기-열기" class="headerlink" title="터미널에서 홈디렉토리 탐색기 열기"></a>터미널에서 홈디렉토리 탐색기 열기</h3><p>터미널에서 윈도우즈 탐색기를 직접 열 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ explorer.exe .</span><br></pre></td></tr></table></figure>

<p>VisualStudio Code 에서 현재 디렉토리를 연다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ code.exe .</span><br></pre></td></tr></table></figure>

<br>

<h1 id="3-WSL-고급-설정-구성"><a href="#3-WSL-고급-설정-구성" class="headerlink" title="3. WSL 고급 설정 구성"></a>3. WSL 고급 설정 구성</h1><p>배포본 구성 파일 wsl.conf 와 전역 구성 파일 .wslconfig 이 있다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/ko-kr/windows/wsl/wsl-config">wsl config file</a></li>
</ul>
<h3 id="전역-구성-파일-wslconfig"><a href="#전역-구성-파일-wslconfig" class="headerlink" title="전역 구성 파일 .wslconfig"></a>전역 구성 파일 <code>.wslconfig</code></h3><ul>
<li>위치: <code>C:\Users\&lt;UserName&gt;\.wslconfig</code></li>
<li>커널</li>
<li>메모리 크기</li>
<li>프로세서 개수</li>
<li>스왑</li>
<li>디버그 콘솔 등등.</li>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/ko-kr/windows/wsl/wsl-config#wslconfig">https://learn.microsoft.com/ko-kr/windows/wsl/wsl-config#wslconfig</a></li>
</ul>
<p>wslconfig 예제 파일</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Settings apply across all Linux distros running on WSL 2</span></span><br><span class="line">[wsl2]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Limits VM memory to use no more than 4 GB, this can be set as whole numbers using GB or MB</span></span><br><span class="line">memory=4GB </span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets the VM to use two virtual processors</span></span><br><span class="line">processors=2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Specify a custom Linux kernel to use with your installed distros. The default kernel used can be found at https://github.com/microsoft/WSL2-Linux-Kernel</span></span><br><span class="line">kernel=C:\\temp\\myCustomKernel</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets additional kernel parameters, in this case enabling older Linux base images such as Centos 6</span></span><br><span class="line">kernelCommandLine = vsyscall=<span class="built_in">emulate</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets amount of swap storage space to 8GB, default is 25% of available RAM</span></span><br><span class="line">swap=8GB</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets swapfile path location, default is %USERPROFILE%\AppData\Local\Temp\swap.vhdx</span></span><br><span class="line">swapfile=C:\\temp\\wsl-swap.vhdx</span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable page reporting so WSL retains all allocated memory claimed from Windows and releases none back when free</span></span><br><span class="line">pageReporting=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Turn off default connection to bind WSL 2 localhost to Windows localhost</span></span><br><span class="line">localhostforwarding=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Disables nested virtualization</span></span><br><span class="line">nestedVirtualization=<span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Turns on output console showing contents of dmesg when opening a WSL 2 distro for debugging</span></span><br><span class="line">debugConsole=<span class="literal">true</span></span><br></pre></td></tr></table></figure>


<h3 id="배포본-구성-파일-wsl-conf"><a href="#배포본-구성-파일-wsl-conf" class="headerlink" title="배포본 구성 파일 wsl.conf"></a>배포본 구성 파일 <code>wsl.conf</code></h3><ul>
<li>위치: <code>/etc/wsl.conf</code></li>
<li>wsl1, wsl2 배포본에 대한 구성을 지정한다.</li>
<li>단, Windows 빌드 17093 이상에서만 사용할 수 있다.</li>
<li>systemd 지원</li>
<li>automount 지원<br>DrvFS 지원<br>interop 설정 등등</li>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/ko-kr/windows/wsl/wsl-config#configuration-settings-for-wslconf">wsl.conf 구성 설정</a></li>
</ul>
<p>wsl.conf 예제</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Automatically mount Windows drive when the distribution is launched</span></span><br><span class="line">[automount]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set to true will automount fixed drives (C:/ or D:/) with DrvFs under the root directory set above. Set to false means drives won&#x27;t be mounted automatically, but need to be mounted manually or with fstab.</span></span><br><span class="line">enabled = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets the directory where fixed drives will be automatically mounted. This example changes the mount location, so your C-drive would be /c, rather than the default /mnt/c. </span></span><br><span class="line">root = /</span><br><span class="line"></span><br><span class="line"><span class="comment"># DrvFs-specific options can be specified.  </span></span><br><span class="line">options = <span class="string">&quot;metadata,uid=1003,gid=1003,umask=077,fmask=11,case=off&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets the `/etc/fstab` file to be processed when a WSL distribution is launched.</span></span><br><span class="line">mountFsTab = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Network host settings that enable the DNS server used by WSL 2. This example changes the hostname, sets generateHosts to false, preventing WSL from the default behavior of auto-generating /etc/hosts, and sets generateResolvConf to false, preventing WSL from auto-generating /etc/resolv.conf, so that you can create your own (ie. nameserver 1.1.1.1).</span></span><br><span class="line">[network]</span><br><span class="line">hostname = DemoHost</span><br><span class="line">generateHosts = <span class="literal">false</span></span><br><span class="line">generateResolvConf = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set whether WSL supports interop process like launching Windows apps and adding path variables. Setting these to false will block the launch of Windows processes and block adding $PATH environment variables.</span></span><br><span class="line">[interop]</span><br><span class="line">enabled = <span class="literal">false</span></span><br><span class="line">appendWindowsPath = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the user when launching a distribution with WSL.</span></span><br><span class="line">[user]</span><br><span class="line">default = DemoUser</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set a command to run when a new WSL instance launches. This example starts the Docker container service.</span></span><br><span class="line">[boot]</span><br><span class="line"><span class="built_in">command</span> = service docker start</span><br></pre></td></tr></table></figure>

<br>

<h1 id="4-wsl-외부-디스크-마운트-하기"><a href="#4-wsl-외부-디스크-마운트-하기" class="headerlink" title="4. wsl 외부 디스크 마운트 하기"></a>4. wsl 외부 디스크 마운트 하기</h1><p>윈도우즈 wsl 에서 리눅스 파티션 혹은 USB 파티션 디스크를 마운트해서 사용하려고 한다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows/wsl/wsl2-mount-disk">https://learn.microsoft.com/en-us/windows/wsl/wsl2-mount-disk</a></li>
</ul>
<ol>
<li>관리자 모드에서 Powershell 을 연다.</li>
</ol>
<p>파워쉘에서 연결된 디스크 목록을 확인한다.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; <span class="built_in">GET-CimInstance</span> <span class="literal">-query</span> <span class="string">&quot;SELECT * from Win32_DiskDrive&quot;</span></span><br><span class="line"></span><br><span class="line">DeviceID           Caption                         Partitions Size          Model</span><br><span class="line"><span class="literal">--------</span>           <span class="literal">-------</span>                         <span class="literal">----------</span> <span class="literal">----</span>          <span class="literal">-----</span></span><br><span class="line">\\.\PHYSICALDRIVE0 ST2000DM008<span class="literal">-2FR102</span>              <span class="number">1</span>          <span class="number">2000396321280</span> ST2000DM008<span class="literal">-2FR102</span></span><br><span class="line">\\.\PHYSICALDRIVE1 WDS500G3X0C<span class="literal">-00SJG0</span>              <span class="number">4</span>          <span class="number">500105249280</span>  WDS500G3X0C<span class="literal">-00SJG0</span></span><br><span class="line">\\.\PHYSICALDRIVE2 ATA HGST HTS721010A9 USB Device <span class="number">1</span>          <span class="number">1000202273280</span> ATA HGST HTS721010A9...</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>관리자 모드 PowerShell 에서 마운트할 Device ID를 마운트 한다.</li>
</ol>
<p><code>--bare</code> 를 사용해 마운트 여부를 확인할 수 있다.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">--mount</span> \\.\PHYSICALDRIVE2 <span class="literal">--bare</span></span><br></pre></td></tr></table></figure>


<ol start="3">
<li>WSL 리눅스 터미널에서 디스크를 확인한다.</li>
</ol>
<p>아래 같이 마운트를 실행한다.</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">--mount</span> \\.\PHYSICALDRIVE2 <span class="literal">-type</span> ext4</span><br><span class="line">디스크가 <span class="string">&#x27;/mnt/wsl/PHYSICALDRIVE2&#x27;</span>(으)로 탑재되었습니다.</span><br><span class="line">참고: /etc/wsl.conf에서 automount.root 설정을 수정한 경우 위치가 달라집니다.</span><br><span class="line">디스크를 분리하고 분리하려면 <span class="string">&#x27;wsl.exe --unmount \\.\PHYSICALDRIVE2&#x27;</span>을 실행하십시오.</span><br></pre></td></tr></table></figure>

<p>파티션을 마운트 한다면</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">--mount</span> \\.\PHYSICALDRIVE2 <span class="literal">-p</span> <span class="number">1</span>   <span class="comment"># partition 1</span></span><br><span class="line">디스크가 <span class="string">&#x27;/mnt/wsl/PHYSICALDRIVE2p1&#x27;</span>(으)로 탑재되었습니다.</span><br><span class="line">참고: /etc/wsl.conf에서 automount.root 설정을 수정한 경우 위치가 달라집니다.</span><br><span class="line">디스크를 분리하고 분리하려면 <span class="string">&#x27;wsl.exe --unmount \\.\PHYSICALDRIVE2&#x27;</span>을 실행하십시오.</span><br></pre></td></tr></table></figure>


<p>연결된 디스크가 sdd 에 표시된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~$ lsblk</span><br><span class="line">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda      8:0    0 363.1M  1 disk</span><br><span class="line">sdb      8:16   0     8G  0 disk [SWAP]</span><br><span class="line">sdc      8:32   0   256G  0 disk /mnt/wslg/distro</span><br><span class="line">sdd      8:48   0 931.5G  0 disk</span><br><span class="line">└─sdd1   8:49   0 931.5G  0 part</span><br></pre></td></tr></table></figure>

<p>어떠 파일 시스템인지 확인하려면 lsblk -f 명령을 사용한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">~$ lsblk -f</span><br><span class="line">NAME   FSTYPE LABEL UUID                                 FSAVAIL FSUSE% MOUNTPOINT</span><br><span class="line">sda    ext4</span><br><span class="line">sdb    swap         44bcbb9a-3a2c-44db-99e4-9c14dec69098                [SWAP]</span><br><span class="line">sdc    ext4         3255683f-53a2-4fdf-91cf-b4c1041e2a62  159.1G    32% /mnt/wslg/distro</span><br><span class="line">sdd</span><br><span class="line">└─sdd1 ext4         9b3c51ab-a49b-41c7-a105-fb9d47a86476</span><br><span class="line">(3.11.1)qkboo@desktop-goyangi:~$</span><br></pre></td></tr></table></figure>

<p>df 명령으로 확인해 보자,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">s$ <span class="built_in">df</span> -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">none             16G  4.0K   16G   1% /mnt/wsl</span><br><span class="line">drivers         465G  397G   69G  86% /usr/lib/wsl/drivers</span><br><span class="line">none             16G     0   16G   0% /usr/lib/wsl/lib</span><br><span class="line">/dev/sdc        251G   80G  160G  34% /</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">/dev/sdd1       917G  852G   19G  98% /mnt/wsl/PHYSICALDRIVE2p1</span><br></pre></td></tr></table></figure>

<h1 id="6-배포본-이름-변경하기"><a href="#6-배포본-이름-변경하기" class="headerlink" title="6. 배포본 이름 변경하기"></a>6. 배포본 이름 변경하기</h1><ol>
<li>먼저 모든 WSL 실행 배포본을 종료한다.</li>
</ol>
<p>현재 배포본 Ubuntu 20.04 인데 <code>do-os-relase</code> 업그레이드로 22.04 로 완료된 상태이다. 하지만 배포본 이름은 20.04 라서 이름을 22.04 로 변경하려고 한다.</p>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-l</span></span><br><span class="line">Linux용 Windows 하위 시스템 배포:</span><br><span class="line">Ubuntu<span class="literal">-20</span>.<span class="number">04</span>(기본값)</span><br></pre></td></tr></table></figure>


<ol start="2">
<li>레지스트리 편집기를 열고 다음 위치로 이동한다.</li>
</ol>
<p><code>HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Lxss</code></p>
<ol start="3">
<li>Lxss 항목 중 배포본 레지스트리를 선택하면 아래 같은 내용에서 *<strong>DistributionName</strong> 을 찾아 변경한 배포본 이름으로 바꾸고 저장한다.</li>
</ol>
<img src='/images/windows/wsl_rename_registry.png'>

<ol start="4">
<li>변경된 이름을 저장하고 wsl 배포본 목록을 확인한다.</li>
</ol>
<figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PS</span>&gt; wsl <span class="literal">-l</span></span><br><span class="line">Linux용 Windows 하위 시스템 배포:</span><br><span class="line">Ubuntu<span class="literal">-22</span>.<span class="number">04</span>(기본값)</span><br></pre></td></tr></table></figure>

<br>

<h1 id="—-참고"><a href="#—-참고" class="headerlink" title="— 참고"></a>— 참고</h1><ol>
<li>WSL 시작하기: <a target="_blank" rel="noopener" href="https://github.com/wslhub/wsl-firststep/">https://github.com/wslhub/wsl-firststep/</a></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-05T01:00:00.000Z" title="12/5/2022, 10:00:00 AM">2022-12-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-12-23T06:00:00.000Z" title="12/23/2022, 3:00:00 PM">2022-12-23</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Windows/">Windows</a></span><span class="level-item">8분안에 읽기 (약 1193 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/WSL2-NVIDIA_CUDA-2209b855eeb4/">WSL 에서 CUDA 사용을 위한 User Guide</a></p><div class="content"><h1 id="CUDA-on-WSL-User-Guide"><a href="#CUDA-on-WSL-User-Guide" class="headerlink" title="CUDA on WSL User Guide"></a>CUDA on WSL User Guide</h1><blockquote>
<p>2021&#x2F;12&#x2F;05 일 현재</p>
</blockquote>
<h1 id="1-WSL-이란"><a href="#1-WSL-이란" class="headerlink" title="1. WSL 이란"></a>1. WSL 이란</h1><p>네이티브 리눅스 앱을 Windows 11 and later OS build 에서 실행할 수 있는 Windows Subsystem for Linux 이다.</p>
<h3 id="WSL-1-vs-WSL-2"><a href="#WSL-1-vs-WSL-2" class="headerlink" title="WSL 1 vs. WSL 2"></a>WSL 1 vs. WSL 2</h3><p>WSL2 is the second generation of WSL that offers the following benefits:</p>
<ul>
<li><p>Linux applications can run as is in WSL2. WSL 2 is characteristically a VM with a Linux WSL Kernel in it that provides full compatibility with mainstream Linux kernel allowing support for native Linux applications including popular Linux distros.</p>
</li>
<li><p>Faster file system support and that’s more performant.</p>
</li>
<li><p>WSL 2 is tightly integrated with the Microsoft Windows operating system, which allows it to run Linux applications alongside and even interop with other Windows desktop and modern store apps.</p>
</li>
</ul>
<h1 id="2-NVIDIA-GPU-Accelerated-Computing-on-WSL-2"><a href="#2-NVIDIA-GPU-Accelerated-Computing-on-WSL-2" class="headerlink" title="2. NVIDIA GPU Accelerated Computing on WSL 2"></a>2. NVIDIA GPU Accelerated Computing on WSL 2</h1><p>WSL 2에서 마이크로소프트는 NVIDIA CUDA 및 기타 컴퓨팅 프레임워크와 기술과 함께 데이터 과학, 머신러닝 및 추론 솔루션을 위한 GPU 가속 컴퓨팅을 가능하게 하는 GPU 반가상화 기술을 도입했다. WSL 유사 환경 또는 WSL 2에서 CPU 개입을 줄이면서 GPU에서 더 많은 병렬 작업을 파이프라인으로 수행할 수 있으므로 거의 네이티브에 가까운 성능을 제공한다. NVIDIA 드라이버 지원은 CUDA 및 관련 컴퓨팅 소프트웨어 스택에서 멈추지 않습니다. 다이렉트 ML 지원과 함께 DX12 API를 지원하여 WSL 2에서 그래픽을 활성화하는 DirectX 지원이 있습니다.</p>
<p>Illustration of the possibilities with NVIDIA CUDA software stack on WSL 2</p>
<img src='https://developer.nvidia.com/sites/default/files/akamai/cuda/images/WSL-launch-stack-diagram-HR-r4.png' width='400'>

<h1 id="3-WSL2-시작"><a href="#3-WSL2-시작" class="headerlink" title="3. WSL2 시작"></a>3. WSL2 시작</h1><h4 id="WSL2-요구사항"><a href="#WSL2-요구사항" class="headerlink" title="WSL2 요구사항"></a>WSL2 요구사항</h4><ul>
<li>Geforce, Quadro 제품 계열에서 Pascal 또는 최신 GPU 구조를 WDDM모드로 SKU를 사용할 수 있다.</li>
<li>최신 WSL 커널 로 5.10.16.3 이상을 권장한다. (최소 4.19.121+ 이상)</li>
<li>Windows 11 에서는 윈도우 인사이더 프로그램 가입이 필요 없다.</li>
<li>Windows 10 에서는 윈도우 인사이더 프리뷰 프로그램이 필요하다.</li>
</ul>
<h3 id="Step-1-Install-NVIDIA-Driver-for-GPU-Support"><a href="#Step-1-Install-NVIDIA-Driver-for-GPU-Support" class="headerlink" title="Step 1: Install NVIDIA Driver for GPU Support"></a>Step 1: Install NVIDIA Driver for GPU Support</h3><p>윈도우 11 그래픽 드라이버로 NVIDIA GeForce Game Ready or NVIDIA RTX Quadro 를 설치한다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda/wsl">https://developer.nvidia.com/cuda/wsl</a></li>
<li><u>Do not install any Linux display driver in WSL.</u></li>
</ul>
<h3 id="3-3-Step-2-Install-WSL-2"><a href="#3-3-Step-2-Install-WSL-2" class="headerlink" title="3.3. Step 2: Install WSL 2"></a>3.3. Step 2: Install WSL 2</h3><p>윈도우 터미널 &#x2F; 커맨드 라인 &#x2F; 파워쉘 에서 WSL을 설치</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl.exe --install</span><br></pre></td></tr></table></figure>

<p>Ensure you have the latest WSL kernel:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl.exe --update</span><br></pre></td></tr></table></figure>

<h3 id="3-4-Setting-Up-a-Linux-Development-Environment"><a href="#3-4-Setting-Up-a-Linux-Development-Environment" class="headerlink" title="3.4. Setting Up a Linux Development Environment"></a>3.4. Setting Up a Linux Development Environment</h3><p>기본으로 WSL2는 Ubuntu 가 설치되어 온다. 다른 배포본은 MS store에서 설치. wsl 시작.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl.exe</span><br></pre></td></tr></table></figure>

<p>업데이트를 위한 WSL 명령:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/wsl/install">https://docs.microsoft.com/en-us/windows/wsl/install</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/wsl/basic-commands">https://docs.microsoft.com/en-us/windows/wsl/basic-commands</a></li>
</ul>
<h1 id="4-Getting-Started-with-CUDA-on-WSL-2"><a href="#4-Getting-Started-with-CUDA-on-WSL-2" class="headerlink" title="4. Getting Started with CUDA on WSL 2"></a>4. Getting Started with CUDA on WSL 2</h1><p>WSL2에서 CUDA 를 지원하려면 CUDA Toolkit이 설치되고 cuDNN도 설치해야 한다.</p>
<h2 id="4-1-WSL에서-CUDA-Toolkit을-설치한다"><a href="#4-1-WSL에서-CUDA-Toolkit을-설치한다" class="headerlink" title="4.1 WSL에서 CUDA Toolkit을 설치한다"></a>4.1 WSL에서 CUDA Toolkit을 설치한다</h2><p>WSL 2 에서 CUDA application을 실행하려면 CUDA toolkit for Linux 를 설치해야 한다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&Distribution=WSL-Ubuntu&target_version=2.0&target_type=deb_local">https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=WSL-Ubuntu&amp;target_version=2.0&amp;target_type=deb_local</a></li>
</ul>
<p>CUDA Toolkit 11.5 를 다운로드하고 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin</span><br><span class="line">sudo <span class="built_in">mv</span> cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600</span><br><span class="line">wget https://developer.download.nvidia.com/compute/cuda/11.5.1/local_installers/cuda-repo-wsl-ubuntu-11-5-local_11.5.1-1_amd64.deb</span><br><span class="line">sudo dpkg -i cuda-repo-wsl-ubuntu-11-5-local_11.5.1-1_amd64.deb</span><br><span class="line">sudo apt-key add /var/cuda-repo-wsl-ubuntu-11-5-<span class="built_in">local</span>/7fa2af80.pub</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install cuda</span><br></pre></td></tr></table></figure>

<h2 id="4-2-cudnn-설치"><a href="#4-2-cudnn-설치" class="headerlink" title="4.2 cudnn 설치"></a>4.2 cudnn 설치</h2><p>CUDA Toolkit 버전에 대응하는 cuDNN 을 설치해야 한다.</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/rdp/cudnn-download">https://developer.nvidia.com/rdp/cudnn-download</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html#install-linux">https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html#install-linux</a></p>
<p>11.5 는 최신 cuDNN8.3 을 설치한다.</p>
</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libcudnn8</span><br><span class="line">sudo apt install libcudnn8-dev</span><br><span class="line">sudo apt-get install libcudnn8-samples</span><br></pre></td></tr></table></figure>

<h2 id="4-3-CUDA-애플리케이션"><a href="#4-3-CUDA-애플리케이션" class="headerlink" title="4.3 CUDA 애플리케이션"></a>4.3 CUDA 애플리케이션</h2><p>윈도우에 CUDA 애프리케이션이 있아면 다음 같이 WSL에서 실행해 보자</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /mnt/c/Users/&lt;username&gt;/Desktop</span><br><span class="line">$ <span class="built_in">cp</span> /mnt/c/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v11.5/extras/demo_suite/deviceQuery.exe ~/</span><br><span class="line">$ ./deviceQuery.exe</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(tf25gpu_p39)~$ nvidia-smi</span><br><span class="line">Sun Dec  5 02:29:22 2021</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 510.00       Driver Version: 510.06       CUDA Version: 11.6     |</span><br><span class="line">|-------------------------------+----------------------+----------------------+</span><br><span class="line">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                               |                      |               MIG M. |</span><br><span class="line">|===============================+======================+======================|</span><br><span class="line">|   0  NVIDIA GeForce ...  On   | 00000000:09:00.0  On |                  N/A |</span><br><span class="line">|  0%   43C    P8    20W / 320W |   1179MiB / 11264MiB |     N/A      Default |</span><br><span class="line">|                               |                      |                  N/A |</span><br><span class="line">+-------------------------------+----------------------+----------------------+</span><br><span class="line"></span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                  |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span><br><span class="line">|        ID   ID                                                   Usage      |</span><br><span class="line">|=============================================================================|</span><br><span class="line">|  No running processes found                                                 |</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-4-Building-CUDA-Samples"><a href="#4-4-Building-CUDA-Samples" class="headerlink" title="4.4 Building CUDA Samples"></a>4.4 Building CUDA Samples</h2><p>CUDA 샘플을 빌드해서 실행해 보자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">(tf25gpu_p39)/usr/local/cuda-11.5/samples/4_Finance/BlackScholes$ ./BlackScholes</span><br><span class="line">[./BlackScholes] - Starting...</span><br><span class="line">GPU Device 0: <span class="string">&quot;Pascal&quot;</span> with compute capability 6.1</span><br><span class="line"></span><br><span class="line">Initializing data...</span><br><span class="line">...allocating CPU memory <span class="keyword">for</span> options.</span><br><span class="line">...allocating GPU memory <span class="keyword">for</span> options.</span><br><span class="line">...generating input data <span class="keyword">in</span> CPU mem.</span><br><span class="line">...copying input data to GPU mem.</span><br><span class="line">Data init <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">Executing Black-Scholes GPU kernel (512 iterations)...</span><br><span class="line">Options count             : 8000000</span><br><span class="line">BlackScholesGPU() time    : 0.234201 msec</span><br><span class="line">Effective memory bandwidth: 341.586668 GB/s</span><br><span class="line">Gigaoptions per second    : 34.158667</span><br><span class="line"></span><br><span class="line">BlackScholes, Throughput = 34.1587 GOptions/s, Time = 0.00023 s, Size = 8000000 options, NumDevsUsed = 1, Workgroup = 128</span><br><span class="line"></span><br><span class="line">Reading back GPU results...</span><br><span class="line">Checking the results...</span><br><span class="line">...running CPU calculations.</span><br><span class="line"></span><br><span class="line">Comparing the results...</span><br><span class="line">L1 norm: 1.741792E-07</span><br><span class="line">Max absolute error: 1.192093E-05</span><br><span class="line"></span><br><span class="line">Shutting down...</span><br><span class="line">...releasing GPU memory.</span><br><span class="line">...releasing CPU memory.</span><br><span class="line">Shutdown <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">[BlackScholes] - Test Summary</span><br><span class="line"></span><br><span class="line">NOTE: The CUDA Samples are not meant <span class="keyword">for</span> performance measurements. Results may vary when GPU Boost is enabled.</span><br><span class="line"></span><br><span class="line">Test passed</span><br><span class="line">(tf25gpu_p39)/usr/local/cuda-11.5/samples/4_Finance/BlackScholes$</span><br></pre></td></tr></table></figure>

<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ul>
<li><p><a target="_blank" rel="noopener" href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">https://docs.nvidia.com/cuda/wsl-user-guide/index.html</a></p>
</li>
<li><p>CUDA Toolkit 버전에 대응하는 cuDNN 을 설치해야 한다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.nvidia.com/rdp/cudnn-download">https://developer.nvidia.com/rdp/cudnn-download</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html#install-linux">https://docs.nvidia.com/deeplearning/cudnn/install-guide/index.html#install-linux</a></li>
</ul>
</li>
<li><p>Tensforflow on WSL2: <a target="_blank" rel="noopener" href="https://rosypark.tistory.com/313">https://rosypark.tistory.com/313</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">CUDA WSL User Guide</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-10-10T00:00:00.000Z" title="10/10/2022, 9:00:00 AM">2022-10-10</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-12T07:40:09.091Z" title="5/12/2023, 4:40:09 PM">2023-05-12</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Windows/">Windows</a></span><span class="level-item">3분안에 읽기 (약 377 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Win-Powershell_ssh_server-efe30db39ed6/">Windows Powershell: 관리자 administrator 계정 활성화와 Openssh 서버 활성화</a></p><div class="content"><p>외부에서 원격접속해서 관리자 명령을 실행하려면 관리자 권한이 필요하다. 윈도우 파워쉘에서 openssh 설치하고 시작&#x2F;재시작 등의 작업을 위해서는 administrator 계정이 활성화 되어야 한다.</p>
<ol>
<li>openssh windows server 설치</li>
<li>administrator 계정 활성화</li>
<li>원격 ssh 접속</li>
</ol>
<blockquote>
</blockquote>
<h2 id="Powershell-Openssh-설치"><a href="#Powershell-Openssh-설치" class="headerlink" title="Powershell Openssh 설치"></a>Powershell Openssh 설치</h2><p>윈도우 파워쉘에서 openssh 설치</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/ko-kr/windows-server/administration/openssh/openssh_install_firstuse">https://docs.microsoft.com/ko-kr/windows-server/administration/openssh/openssh_install_firstuse</a></li>
</ul>
<h2 id="administrator-계정"><a href="#administrator-계정" class="headerlink" title="administrator 계정"></a><code>administrator</code> 계정</h2><p>명령행을 관리자 권한으로 실행하고 아래 명령 수행. 어드민 계정이 활성화 상태로 변경됩니다.<br>어드민 계정이 활성화되어 있기 때문에 Administrator 계정으로 로그인이 가능해집니다.</p>
<h2 id="윈도우즈-administrator-활성화"><a href="#윈도우즈-administrator-활성화" class="headerlink" title="윈도우즈 administrator 활성화"></a>윈도우즈 administrator 활성화</h2><p>administrator 게정을 활성화 하려면</p>
<ol>
<li>파웨쉘을 관리자로 실행해 다음 같이 실행한다.</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; net user administrator /active:yes</span><br></pre></td></tr></table></figure>

<p>패스워드 변경은 사용자 계정 변경에서 ‘다른 계정 관리’</p>
<img src='https://i.imgur.com/Uugt5CA.png'>

<ol start="2">
<li>관리자 권한으로 실행할 명령 앞에 <code>runas</code> 명령을 붙여 실행한다.</li>
</ol>
<p>파워쉘에서 관리자로 명령을 실행하려면 <code>runas</code> 명령을 사용한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">runas.exe /savecred /user:administrator <span class="string">&quot;%sysdrive%\testScripts\testscript1.ps1&quot;</span></span><br></pre></td></tr></table></figure>

<blockquote>
</blockquote>
<hr>
<h1 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h1><ol>
<li>openssh 서버 구성: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/ko-kr/windows-server/administration/openssh/openssh_server_configuration">https://docs.microsoft.com/ko-kr/windows-server/administration/openssh/openssh_server_configuration</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/ko-kr/powershell/scripting/learn/remoting/ssh-remoting-in-powershell-core?view=powershell-7.1">https://docs.microsoft.com/ko-kr/powershell/scripting/learn/remoting/ssh-remoting-in-powershell-core?view=powershell-7.1</a></li>
<li>윈도우즈 서비스 만들기: <a target="_blank" rel="noopener" href="https://docs.microsoft.com/ko-kr/dotnet/framework/windows-services/walkthrough-creating-a-windows-service-application-in-the-component-designer">https://docs.microsoft.com/ko-kr/dotnet/framework/windows-services/walkthrough-creating-a-windows-service-application-in-the-component-designer</a></li>
</ol>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-04T23:00:00.000Z" title="3/5/2022, 8:00:00 AM">2022-03-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2024-01-17T21:36:36.501Z" title="1/18/2024, 6:36:36 AM">2024-01-18</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Windows/">Windows</a></span><span class="level-item">3분안에 읽기 (약 423 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/WSL-%ED%8C%8C%EC%9D%BC-84a78bae5a8c/">WSL 파일시스펨, 네트워크</a></p><div class="content"><h1 id="WSL-파일시스템"><a href="#WSL-파일시스템" class="headerlink" title="WSL 파일시스템"></a>WSL 파일시스템</h1><p>윈도우와 WSL 사이의 파일 시스템 공유</p>
<h3 id="WSL-데이터-공간"><a href="#WSL-데이터-공간" class="headerlink" title="WSL 데이터 공간"></a>WSL 데이터 공간</h3><p>Windows에 WSL 패키지는 아래의 Packages 폴더 안의 어딘가에 위치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\[사용자명]\AppData\Local\Packages\</span><br></pre></td></tr></table></figure>

<p>Ubuntu 깔았다면 Packages폴더 아래에 Ubuntu라는 단어가 들어간 폴더명이 보일 것이다. 바로 그 폴더가 Ubuntu WSL의 위치다.</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\daddy&gt; ls .\AppData\Local\Packages\</span><br><span class="line"></span><br><span class="line"><span class="built_in">Mode</span>                 LastWriteTime         Length Name</span><br><span class="line">----                 -------------         ------ ----</span><br><span class="line">d-----      <span class="number">2020</span>-<span class="number">11</span>-<span class="number">01</span>  오후 <span class="number">10</span>:<span class="number">45</span>                <span class="number">1527</span>c705-<span class="number">839</span>a-<span class="number">4832</span>-<span class="number">9118</span>-<span class="number">54</span>d4Bd6a0c89_cw5n1h2txyewy</span><br><span class="line">d-----      <span class="number">2020</span>-<span class="number">11</span>-<span class="number">01</span>  오후 <span class="number">10</span>:<span class="number">31</span>                ActiveSync</span><br><span class="line">d-----      <span class="number">2020</span>-<span class="number">11</span>-<span class="number">12</span>   오전 <span class="number">8</span>:<span class="number">07</span>                adobe.acrobatreaderdc.protectedmode</span><br><span class="line">d-----      <span class="number">2020</span>-<span class="number">11</span>-<span class="number">01</span>  오후 <span class="number">10</span>:<span class="number">45</span>                c5e2524a-ea46-<span class="number">4</span>f67-<span class="number">841</span>f-<span class="number">6</span>a9465d9d515_cw5n1h2txyewy</span><br><span class="line">d-----      <span class="number">2021</span>-<span class="number">02</span>-<span class="number">16</span>   오후 <span class="number">7</span>:<span class="number">52</span>                CanonicalGroupLimited.Ubuntu18.<span class="number">04</span>onWindows_79rhkp1fndgsc</span><br><span class="line">d-----      <span class="number">2021</span>-<span class="number">02</span>-<span class="number">17</span>   오후 <span class="number">4</span>:<span class="number">58</span>                CanonicalGroupLimited.Ubuntu20.<span class="number">04</span>onWindows_79rhkp1fndgsc</span><br><span class="line">d-----      <span class="number">2020</span>-<span class="number">11</span>-<span class="number">01</span>  오후 <span class="number">10</span>:<span class="number">45</span>                E2A4F912-<span class="number">2574</span>-<span class="number">4</span>A75-<span class="number">9</span>BB0-<span class="number">0</span>D023378592B_cw5n1h2txyewy</span><br></pre></td></tr></table></figure>

<p>위 패키지 경로에서 LocalState 폴더 안의 rootfs 폴더가 바로 WSL1의 Root와 동일한 경로이다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PS C:\Users\daddy&gt; ls .\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\LocalState\</span><br><span class="line"></span><br><span class="line">Mode                 LastWriteTime         Length Name</span><br><span class="line">----                 -------------         ------ ----</span><br><span class="line">-a----      2021-02-17   오후 5:34     1206910976 ext4.vhdx</span><br></pre></td></tr></table></figure>

<h3 id="권한문제"><a href="#권한문제" class="headerlink" title="권한문제"></a>권한문제</h3><p>윈도우와 리눅스는 서로 다른 권한 매커니즘을 가지므로 윈도우 탐색기 상에서 그냥 WSL 경로로 파일을 옮기면 권한이 이상해진다. 가능하면 WSL 로그인후에 사용한다.</p>
<h3 id="탐색기로-홈디렉토리-열기"><a href="#탐색기로-홈디렉토리-열기" class="headerlink" title="탐색기로 홈디렉토리 열기"></a>탐색기로 홈디렉토리 열기</h3><p>현재 Working Directory를 네크워크를 통해 Windows 탐색기로 여는 방법<br>아래의 명령어를 WSL에서 실행하면 현재 작업 중인 위치를 네트워크 연결을 통해서 Windows에서 열어준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explorer.exe .</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="WSL-네트워크"><a href="#WSL-네트워크" class="headerlink" title="WSL 네트워크"></a>WSL 네트워크</h1><h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network">https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network</a></p>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a target="_blank" rel="noopener" href="https://coding-groot.tistory.com/101">https://coding-groot.tistory.com/101</a></li>
<li><a target="_blank" rel="noopener" href="https://webdir.tistory.com/545?category=754606">https://webdir.tistory.com/545?category=754606</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.aaronroh.org/118">https://blog.aaronroh.org/118</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network">https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-03T23:00:00.000Z" title="3/4/2022, 8:00:00 AM">2022-03-04</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2024-01-17T21:37:08.961Z" title="1/18/2024, 6:37:08 AM">2024-01-18</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Windows/">Windows</a></span><span class="level-item">4분안에 읽기 (약 601 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/WSL%EC%84%A4%EC%B9%98_%EC%82%AC%EC%9A%A9-bd026a3e939e/">WSL 설치</a></p><div class="content"><h1 id="WLS-설치"><a href="#WLS-설치" class="headerlink" title="WLS 설치"></a>WLS 설치</h1><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/ko-kr/windows/wsl/install-win10#manual-installation-steps">https://docs.microsoft.com/ko-kr/windows/wsl/install-win10#manual-installation-steps</a></p>
<p><a target="_blank" rel="noopener" href="https://www.44bits.io/ko/post/wsl2-install-and-basic-usage">https://www.44bits.io/ko/post/wsl2-install-and-basic-usage</a></p>
<h1 id="WSL-에러"><a href="#WSL-에러" class="headerlink" title="WSL 에러"></a>WSL 에러</h1><h3 id="가상머신-에러"><a href="#가상머신-에러" class="headerlink" title="가상머신 에러"></a>가상머신 에러</h3><p><code>wsl2 코드 4294967295</code></p>
<p>Windows 기능 추가&#x2F;삭제를 이용해 1 Linux 하위시스템, 2 가상머신 껏다 켜는 방법<br><a target="_blank" rel="noopener" href="https://bluenotes.kr/272">https://bluenotes.kr/272</a></p>
<p>wls2 삭제후 재 설치<br><a target="_blank" rel="noopener" href="https://hyelmy.github.io/%EB%81%84%EC%A0%81%EB%81%84%EC%A0%81/honeytips2/">https://hyelmy.github.io/%EB%81%84%EC%A0%81%EB%81%84%EC%A0%81/honeytips2/</a></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p><a target="_blank" rel="noopener" href="https://blogger.pe.kr/853">https://blogger.pe.kr/853</a></p>
<h2 id="재시작"><a href="#재시작" class="headerlink" title="재시작"></a>재시작</h2><p>여러가지 방법이 있지만 대부분의 Windows에서 동작하는 방법은 먼저 PowerShell을 관리자 권한으로 열고 다음 명령을 실행하면 됩니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Restart-Service LxssManager</span><br></pre></td></tr></table></figure>

<p>Windows 10 버전 1903&#x2F;19H1 (빌드 18362) 이상 부터는 명령 프롬프트(CMD)를 열고 다음 명령어만 간단히 입력함으로서 WSL 시스템을 종료할 수 있습니다.</p>
<p>wsl -t [배포판 이름]<br>예를 들어 Ubuntu 20.04를 설치하였다면 wsl -t ubuntu를, Debian을 설치하였다면 wsl -t debian과 같이 사용하시면 됩니다.</p>
<p>추가로 Windows 10 버전 2004&#x2F;20H1 (빌드 18917) 이상 부터는 명령 프롬프트에서 다음 명령어를 사용하여 모든 WSL 시스템을 한 번에 종료할 수 있습니다. 가령 Ubuntu와 Debian 머신이 구동되고 있다면 아래 명령어로 모두 종료 시킬 수 있습니다.</p>
<p>wsl –shutdown</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(base) PS C:\Users\daddy&gt; wsl -l</span><br><span class="line">Linux용 Windows 하위 시스템 배포:</span><br><span class="line">Ubuntu-20.04(기본값)</span><br><span class="line">(base) PS C:\Users\daddy&gt; wsl -t Ubuntu-20.04</span><br><span class="line">(base) PS C:\Users\daddy&gt;</span><br><span class="line">(base) PS C:\Users\daddy&gt; wsl -t Ubuntu-20.04 --shutdown</span><br><span class="line">(base) PS C:\Users\daddy&gt;</span><br></pre></td></tr></table></figure>

<h1 id="주요-명령"><a href="#주요-명령" class="headerlink" title="주요 명령"></a>주요 명령</h1><ol>
<li>WSL 버전 확인하기 (cmd창에서)</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wsl -l -v</span><br><span class="line"></span><br><span class="line">wsl -- list --verbose</span><br></pre></td></tr></table></figure>

<p>우분투 배포판 버전 변경하는 명령어</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --set-version Ubuntu-20.04 2</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>우분투 종료 명령어<br>wsl -t Ubuntu-20.04</li>
</ol>
<ul>
<li>새로 설치하는 리눅스 배포판에 wsl2로 변경</li>
</ul>
<p>wsl –set-default-version 2</p>
<ol start="4">
<li>WSL2 활성화 (Power shell 상)<br>dism.exe &#x2F;online &#x2F;enable-feature &#x2F;featurename:Microsoft-Windows-Subsystem-Linux &#x2F;all &#x2F;norestart<br>dism.exe &#x2F;online &#x2F;enable-feature &#x2F;featurename:VirtualMachinePlatform &#x2F;all &#x2F;norestart</li>
</ol>
<p>wsl IP 주소</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl hostname -I</span><br></pre></td></tr></table></figure>

<h1 id="네트워크"><a href="#네트워크" class="headerlink" title="네트워크"></a>네트워크</h1><h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><p><a target="_blank" rel="noopener" href="https://learn.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse?tabs=gui">https://learn.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse?tabs=gui</a></p>
<h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network">https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network</a></p>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a target="_blank" rel="noopener" href="https://blog.aaronroh.org/118">https://blog.aaronroh.org/118</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network">https://stackoverflow.com/questions/61002681/connecting-to-wsl2-server-via-local-network</a></li>
</ul>
<h2 id="고정-IP"><a href="#고정-IP" class="headerlink" title="고정 IP"></a>고정 IP</h2><p><a target="_blank" rel="noopener" href="https://netmarble.engineering/wsl2-static-ip-scheduler-settings/">https://netmarble.engineering/wsl2-static-ip-scheduler-settings/</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.dalso.org/linux/wsl2/11430">https://blog.dalso.org/linux/wsl2/11430</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>배치 파일을 만들어서 작업 스케쥴러에 추가해 재시동시 다시 설정한다.</p>
<figure class="highlight ps1"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wsl <span class="literal">-d</span> Ubuntu<span class="literal">-20</span>.<span class="number">04</span> <span class="literal">-u</span> root ip addr add <span class="number">192.168</span>.<span class="number">254.10</span>/<span class="number">24</span> broadcast <span class="number">192.168</span>.<span class="number">10.255</span> dev eth0 label eth0:<span class="number">1</span></span><br><span class="line">netsh interface portproxy add v4tov4 listenport=<span class="number">8585</span> listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span> connectport=<span class="number">8585</span> connectaddress=<span class="number">192.168</span>.<span class="number">254.10</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-02-02T09:00:00.000Z" title="2/2/2020, 6:00:00 PM">2020-02-02</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2023-05-14T06:14:22.603Z" title="5/14/2023, 3:14:22 PM">2023-05-14</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/OS/">OS</a><span> / </span><a class="link-muted" href="/categories/OS/Linux/">Linux</a></span><span class="level-item">16분안에 읽기 (약 2336 단어)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/Lets_Encrypt%EB%B0%9C%EA%B8%89-c616baa21b02/">HTTPS를 위한 공인인증서 - Let&#039;s Encrypt 발급</a></p><div class="content"><blockquote>
<p>2020-06-02: 매뉴얼 방식 수정<br><br>2020-02-02: 최초 작성<br>{:.right-history}</p>
</blockquote>
<p>Nginx 서버에서 HTTPS 사용할 수 있는 공인인증서를 발급해 설치하려고 한다.</p>
<ul>
<li>여기서는 Lets Encrypt 무료 공인인증서 발급을 다룬다.</li>
<li>letsecrypt 공인인증서는 3개월 정도 기간만 사용 가능하고 갱신해야 한다.</li>
<li>**<em>단독 도메인을 호스팅하는 개인 서버에서 Nginx</em>**에 적용해 본다.</li>
</ul>
<p>인증서는 <strong>개별 도메인</strong> 혹은 <strong>와일드카드 인증서</strong> 로 도메인 안의 모든 호스트를 포함하는 두 종류로 발급이 가능하다.</p></div><a class="article-more button is-small is-size-7" href="/Lets_Encrypt%EB%B0%9C%EA%B8%89-c616baa21b02/#more">자세히 보기</a></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/categories/OS/page/0/">이전</a></div><div class="pagination-next"><a href="/categories/OS/page/2/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/categories/OS/">1</a></li><li><a class="pagination-link" href="/categories/OS/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/categories/OS/page/6/">6</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/qkboo_400.png" alt="Gangtai"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Gangtai</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Paju, South Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">163</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">17</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">241</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/thinkbee" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/gangtaigoh"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-05T10:00:00.000Z">2024-03-05</time></p><p class="title"><a href="/mariadb-transfer_to_other-a78fa3ae97d8/">MariaDb 10 이전하기</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-03-05T00:00:00.000Z">2024-03-05</time></p><p class="title"><a href="/mariadb_install_on_linux-42c7d6483e3f/">MariaDB 설치</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-02-08T00:00:00.000Z">2024-02-08</time></p><p class="title"><a href="/python_sphinx-487d92e77816/">Python - 문서화 도구 Sphinx</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-26T13:00:00.000Z">2024-01-26</time></p><p class="title"><a href="/git_autocrlf-4760600f2cc5/">git 에서 줄바꿈 문제 - CRLF, LF</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/git/">git</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-25T00:40:00.000Z">2023-10-25</time></p><p class="title"><a href="/git-swallow-branch-e1aedce9cb6d/">[git] Swallow clone 과 브랜치</a></p><p class="categories"><a href="/categories/Programming/">Programming</a> / <a href="/categories/Programming/git/">git</a></p></div></article></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1465716454138955" data-ad-slot="4441624809" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI/"><span class="level-start"><span class="level-item">AI</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/ETC/"><span class="level-start"><span class="level-item">ETC</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/IT/"><span class="level-start"><span class="level-item">IT</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/"><span class="level-start"><span class="level-item">OS</span></span><span class="level-end"><span class="level-item tag">55</span></span></a><ul><li><a class="level is-mobile" href="/categories/OS/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/Raspberry-Pi/"><span class="level-start"><span class="level-item">Raspberry Pi</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/categories/OS/Windows/"><span class="level-start"><span class="level-item">Windows</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">90</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Angularjs/"><span class="level-start"><span class="level-item">Angularjs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/C-C/"><span class="level-start"><span class="level-item">C/C++</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Nodejs/"><span class="level-start"><span class="level-item">Nodejs</span></span><span class="level-end"><span class="level-item tag">20</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">28</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/R/"><span class="level-start"><span class="level-item">R</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/git/"><span class="level-start"><span class="level-item">git</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/github/"><span class="level-start"><span class="level-item">github</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/thinkbee_logo.png" alt="IT Tech blogging" height="28"></a><p class="is-size-7"><span>&copy; 2024 Gangtai Goh</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-right",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>