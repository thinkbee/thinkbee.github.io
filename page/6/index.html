<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Blogging through Programming</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="thinkbee blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="thinkbee blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="website"><meta property="og:title" content="Blogging through Programming"><meta property="og:url" content="https://blog.thinkbee.kr/"><meta property="og:site_name" content="Blogging through Programming"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://blog.thinkbee.kr/img/og_image.png"><meta property="article:author" content="Gangtai"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.thinkbee.kr"},"headline":"Blogging through Programming","image":["https://blog.thinkbee.kr/img/og_image.png"],"author":{"@type":"Person","name":"Gangtai"},"publisher":{"@type":"Organization","name":"Blogging through Programming","logo":{"@type":"ImageObject","url":"https://blog.thinkbee.kr/images/thinkbee_logo.png"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-1465716454138955" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 6.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/thinkbee_logo.png" alt="Blogging through Programming" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-03T00:10:00.000Z" title="2017-4-3 9:10:00">2017-04-03</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:15:34.958Z" title="2022-2-25 1:15:34">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a></span><span class="level-item">8분안에 읽기 (약 1154 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/04/03/linux-2017-04-03-ubuntu-nginx/">Nginx - Install, WebDAV, Proxy on Ubuntu/Debian</a></h1><div class="content"><p><code>nginx</code>를 사용해서 일반 웹 서비스, SSL, WebDav 서비스와 다른 외부 웹 서비스와 연동하는 설정을 해보자.</p>
<ul>
<li>여기서 <code>node.js</code> 애플리케이션을 연동한다.</li>
</ul>
<br/>
## Nginx 설치와 구성

<p>우분투&#x2F;데비안 계열에서 <code>apt-get install</code> 명령으로 설치한다.</p>
<h3 id="Nginx-설치"><a href="#Nginx-설치" class="headerlink" title="Nginx 설치"></a>Nginx 설치</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install nginx</span><br></pre></td></tr></table></figure>

<p>우분투&#x2F;데비안 계열은 <code>/etc/nginx</code> 밑에 nginx 설정 파일이 위치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nginx/</span><br><span class="line">├── conf.d/</span><br><span class="line">├── htpasswd</span><br><span class="line">├── nginx.conf</span><br><span class="line">├── sites-available/</span><br><span class="line">│   └── default</span><br><span class="line">├── sites-enabled/</span><br><span class="line">│   └── default -&gt; /etc/nginx/sites-available/default</span><br><span class="line">└── ssl/</span><br></pre></td></tr></table></figure>
<ul>
<li>htpasswd: apache-utils의 <code>htpasswd</code> 유틸리티로 생성한 Basic auth 계정 파일</li>
<li>ssl&#x2F; : SSL 인증서 파일</li>
<li>nginx.conf : nginx의 전역 설정 파일, 사이트 설정 및 가상 호스트 설정은 sites-available 에 선언.</li>
<li>sits-available: 웹 사이트 설정 파일</li>
<li>sites-enabled: </li>
<li></li>
</ul>
<h3 id="새-사이트-정의"><a href="#새-사이트-정의" class="headerlink" title="새 사이트 정의"></a>새 사이트 정의</h3><p>가장 좋은 방법은 기존 default 설정 파일을 복사해 수정한 후 사용한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /etc/nginx/</span><br><span class="line">$ <span class="built_in">cp</span> site-available/default <span class="built_in">cp</span> site-available/my-site</span><br></pre></td></tr></table></figure>

<h4 id="my-site"><a href="#my-site" class="headerlink" title="my-site"></a>my-site</h4><p>가상 호스트 파일을 &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F; 폴더에 추가하고 site-enabled에 링크를 해주면 된다. 아래 내용으로 &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;my-site 파일을 다음 같이 추가해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80 default_server;</span><br><span class="line">    listen [::]:80 default_server;</span><br><span class="line"></span><br><span class="line">    root /home/qkboo/my-site;</span><br><span class="line"></span><br><span class="line">    index index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">    server_name my-site.localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ =404;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>사이트 활성화는 &#x2F;etc&#x2F;nginx&#x2F;site-enabled 폴더에 소프트 링크를 걸어준ㄷ.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">ln</span> -s /etc/nginx/sites-available/my-site /etc/nginx/sites-enabled/my-site </span><br><span class="line">$ sudo service nginx reload <span class="comment"># 설정 다시 가져오기</span></span><br></pre></td></tr></table></figure>

<p>Debian, Ubuntu 계열은 Ubuntu 15.x, Debian Wizzy 이후? 시스템 서비스를 <code>systemd</code> 로 다룬다. nginx도 systemd 스크립트로 관리할 수 있다. systemd 관련 내용 참조 - [^6]</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl reload nginx.service</span><br><span class="line">$ sudo systemctl status nginx.service</span><br></pre></td></tr></table></figure>


<p>만약 설정 파일에 문제가 있으면 <code>systemctl status nginx.service</code> 결과에 어느 줄에서 문제가 있는지 확인할 수 있다.</p>
<h3 id="Nginx-for-Node-js"><a href="#Nginx-for-Node-js" class="headerlink" title="Nginx for Node.js"></a>Nginx for Node.js</h3><p>Nginx를 메인 웹 서버로 사용하고 여기에 연결되는 URL, Location에 따라 nginx 외부의 다른 서비스에서 처리하게 하는 방법을 proxy 를 연결하는 것이다. 즉, nginx에서 Node.js, Django, Tomcat 같은 웹 서비스의 통로로 사용한다.</p>
<p><a target="_blank" rel="noopener" href="http://www.albertauyeung.com/post/setup-jupyter-nginx-supervisor/">http://www.albertauyeung.com/post/setup-jupyter-nginx-supervisor/</a></p>
<h4 id="proxy"><a href="#proxy" class="headerlink" title="proxy"></a>proxy</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line"></span><br><span class="line">    listen 80;</span><br><span class="line">    server_name test.example.com;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      proxy_set_header Host $http_host;</span><br><span class="line">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">      proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">      proxy_set_header X-NginX-Proxy true;</span><br><span class="line"></span><br><span class="line">      proxy_pass http://127.0.0.1:52222/;</span><br><span class="line">      proxy_redirect off;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    log_not_found off;</span><br><span class="line"></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_comp_level 2;</span><br><span class="line">    gzip_proxied any;</span><br><span class="line">    gzip_min_length  1000;</span><br><span class="line">    gzip_disable &quot;MSIE [1-6]\.(?!.*SV1)&quot;;</span><br><span class="line">    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/javascript text/x-js;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>설정 파일이 제대로 구성됐는지 테스트해본다. <code>sudo nginx -t</code> [^1]</p>
<br/>
<br/>
## WebDAV

<p>Nginx에서 WebDAV는 <code>nginx-extras</code> 패키지를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install nginx nginx-extras</span><br><span class="line">$ sudo <span class="built_in">mkdir</span> /home/qkboo/WebDav</span><br><span class="line">$ sudo <span class="built_in">chown</span> www-data /home/qkboo/WebDav</span><br></pre></td></tr></table></figure>

<p>혹은 chgrp로 그룹만 변경할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">chgrp</span> www-data /home/qkboo/WebDav</span><br></pre></td></tr></table></figure>


<h3 id="Basic-Auth"><a href="#Basic-Auth" class="headerlink" title="Basic Auth"></a>Basic Auth</h3><p>HTTP Auth 는 htpasswd 유틸리티로 사용자 이름과 아이디를 등록해서 사용한다. [^5]</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install apache2-utils</span><br><span class="line">$ sudo htpasswd -c /etc/nginx/htpasswd exampleuser</span><br></pre></td></tr></table></figure>

<h3 id="WebDav용-설정"><a href="#WebDav용-설정" class="headerlink" title="WebDav용 설정"></a>WebDav용 설정</h3><p>위에서 사용한 my-site 설정에 다음 같이 WebDav 디렉토리 위치를 추가한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    # SSL configuration</span><br><span class="line"></span><br><span class="line">    listen 443 ssl http2 default_server;</span><br><span class="line">    listen [::]:443 ssl http2 default_server;</span><br><span class="line"></span><br><span class="line">    ssl on;</span><br><span class="line"></span><br><span class="line">    #... 생략</span><br><span class="line"></span><br><span class="line">    # WebDav directory and URL</span><br><span class="line">    location /myfiles &#123;</span><br><span class="line">        alias /home/qkboo/WebDav;</span><br><span class="line">        #root /home/qkboo/;</span><br><span class="line"></span><br><span class="line">        #client_body_temp_path /var/dav/temp;</span><br><span class="line">        dav_methods     PUT DELETE MKCOL COPY MOVE;</span><br><span class="line">        dav_ext_methods   PROPFIND OPTIONS;</span><br><span class="line">        create_full_put_path  on;</span><br><span class="line">        dav_access    user:rw group:rw all:rw;</span><br><span class="line">        autoindex     on;</span><br><span class="line"></span><br><span class="line">        # Basic auth</span><br><span class="line">        auth_basic &quot;restricted&quot;;</span><br><span class="line">        auth_basic_user_file /etc/nginx/htpasswd;</span><br><span class="line"></span><br><span class="line">        send_timeout  36000s;</span><br><span class="line"></span><br><span class="line">        proxy_connect_timeout  36000s;</span><br><span class="line">        proxy_read_timeout  36000s;</span><br><span class="line">        proxy_send_timeout  36000s;</span><br><span class="line">        # large file uploads</span><br><span class="line">        proxy_request_buffering off;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="more-configures"><a href="#more-configures" class="headerlink" title="more configures"></a>more configures</h2><p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http">http://nginx.org/en/docs/http</a> 에 있는 세부 설정중 사용한 것.</p>
<h3 id="Upload-size"><a href="#Upload-size" class="headerlink" title="Upload size"></a>Upload size</h3><p>POST로 multi-part 업로드시에 다음 에러가 보이면 nginx의 기본 업로드 크기를 2M 이하로 설정되어 그렇다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[error] 31354#0: *10899 client intended to send too large body: 1198151 bytes, client: &lt;IP address&gt;, server: example.com, request: “POST /wp-admin/async-upload.php HTTP/1.1”, host: “example.com”, referrer: “http://example.com/wp-admin/post.php?post=&lt;post id&gt;&amp;action=edit”</span><br></pre></td></tr></table></figure>

<p><code>client_max_body_size</code> 속성을 server, location 에 설정해 준다:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">client_max_body_size 20M;</span><br></pre></td></tr></table></figure>


<h3 id="limit-rate"><a href="#limit-rate" class="headerlink" title="limit_rate"></a>limit_rate</h3><p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#limit_rate">limit_rate</a>, limit_rate_after 는 함께 사용</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location /flv/ &#123;</span><br><span class="line">    flv;</span><br><span class="line">    limit_rate_after 500k;</span><br><span class="line">    limit_rate       50k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<br/>
<br/>
## 참조

<p>[^1]: <a target="_blank" rel="noopener" href="https://www.nginx.com/resources/wiki/start/topics/tutorials/commandline/">nginx command</a><br>[^5]: <a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/how-to-set-up-http-authentication-with-nginx-on-ubuntu-12-10">Http Auth</a><br>[^6]: <a target="_blank" rel="noopener" href="http://www.codeok.net/%EC%84%9C%EB%B2%84%20%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EB%A5%BC%20%EA%B4%80%EB%A6%AC%ED%95%98%EB%8A%94%20%EC%98%AC%EB%B0%94%EB%A5%B8%20%EB%B0%A9%EB%B2%95">서버 프로세스 관리에 대해</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-03T00:00:00.000Z" title="2017-4-3 9:00:00">2017-04-03</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:19:11.807Z" title="2022-2-25 6:19:11">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">9분안에 읽기 (약 1411 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/04/03/python-2017-04-03-virtualenv-linux/">Python - Install virtualenv on Linux</a></h1><div class="content"><p>Python 개발환경을 위해서 시스템에 설치된 python2.7, python3.x 에서 사용하는 패키지 모듈을 <code>pip</code>를 사용해서 패키지를 관리할 수 있다. 그리고 시스템 모듈과 별도의 버전 환경으로 버전 관리 도구인 <code>virtualenv</code>와 <code>virtualenvwrapper</code> 를 사용해 파이썬 가상 개발 환경을 구성하는 방법을 설명한다.</p>
<br/>

<h2 id="Python-virtualenv-개발환경-구축하기"><a href="#Python-virtualenv-개발환경-구축하기" class="headerlink" title="Python virtualenv 개발환경 구축하기"></a>Python virtualenv 개발환경 구축하기</h2><p>최근 리눅스 배포본은 python2.7, python3.x 버전이 내장되어 있다.</p>
<ul>
<li>raspbian-wheezy에는 Python 2.7과 Python 3.2가 설치되어 있다</li>
<li>raspbian jessie에는 Python 2.7과 Python 3.3이 설치되어 있다.</li>
<li>armbian Debian Jessie, Ubuntu Xenial 에도 Python 2.7과 Python3.3 이 설치되어 있다.</li>
</ul>
<p>파이썬 개발환경은 <code>virtualenv</code> 를 기반으로 사용하는 것을 권장한다. 그리고 가상 개발 환경은,</p>
<ul>
<li>시스템 개발자 모듈 설치</li>
<li>시스템 Python pip 설치</li>
<li>pip에서 시스템 Python virtualenv, virtualenvwrapper 설치</li>
<li>가상환경 만들기</li>
</ul>
<p>순서로 구성할 수 있다.</p>
<h3 id="Python-가상-개발-환경-설치"><a href="#Python-가상-개발-환경-설치" class="headerlink" title="Python 가상 개발 환경 설치"></a>Python 가상 개발 환경 설치</h3><p>다양한 파이썬 버전을 위해 환경 구성을 해주는 유틸리티.</p>
<ul>
<li><p><strong>pyenv</strong> : “Simple Python Version Management”, 로컬에 다양한 파이썬 버전을 설치하고 사용할 수 있도록 한다. pyenv를 사용함으로써 파이썬 버전에 대한 의존성을 해결할 수 있다.</p>
</li>
<li><p><strong>virtualenv</strong> : “Virtual Python Environment builder”, 로컬에 다양한 파이썬 환경을 구축하고 사용할 수 있도록 한다. 일반적으로 Python Packages라고 부르는 ( pip install을 통해서 설치하는 ) 패키지들에 대한 의존성을 해결할 수 있다.</p>
</li>
<li><p><strong>autoenv</strong> : 만약 pyenv와 virtualenv를 통해서 의존성을 해결한다고 하더라도 작업할때마다 설정해주는 것은 귀찮은 작업이다. 특정 프로젝트 폴더로 들어가면 자동으로 개발 환경을 설정해주는 autoenv라는 스크립트를 활용할 수 있다.</p>
</li>
</ul>
<h4 id="pyenv"><a href="#pyenv" class="headerlink" title="pyenv"></a>pyenv</h4><p><a target="_blank" rel="noopener" href="http://pythonstudy.xyz/python/article/506-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD">http://pythonstudy.xyz/python/article/506-파이썬-가상환경</a></p>
<p>여기서는 <code>virtualenv</code>와 <code>virtualenvwrapper</code>를 사용해서 모듈을 설치하고 관리한다. <code>pip</code> 모듈을 사용해서 virtualenv 와 virtualenvwrapper 를 설치한다.</p>
<h4 id="virtualenv-단독-사용"><a href="#virtualenv-단독-사용" class="headerlink" title="virtualenv 단독 사용"></a>virtualenv 단독 사용</h4><p>다음 참조. <a target="_blank" rel="noopener" href="http://dgkim5360.tistory.com/entry/python-virtualenv-on-linux-ubuntu-and-windows">http://dgkim5360.tistory.com/entry/python-virtualenv-on-linux-ubuntu-and-windows</a></p>
<p><code>virtualenv</code>는 가상환경이 설치된 위치로 이동해서, 설치한 폴더에서 <code>source</code> 명령을 통해 환경을 활성화해야 한다. 이런 점을 보완해 쉘 명령을 제공하는 <code>virtualenvwrapper</code>와 함께 쓰는 것을 권한다.</p>
<p>여기서는 <code>pip</code>로 <code>virtualenv</code>와 <code>virtualenvwrapper</code>를 설치해서 사용한다.</p>
<h4 id="virtualenv와-virtualenvwrapper"><a href="#virtualenv와-virtualenvwrapper" class="headerlink" title="virtualenv와 virtualenvwrapper"></a>virtualenv와 virtualenvwrapper</h4><p>virtualenv는 가상의 파이썬 작업환경을 만들어 준다. 작업환경을 따로따로 만들어, 시스템 파이썬 모듈이나 다른 가상의 작업환경에게 영향을 주지 않는다. 또한 <code>pip</code>는 시스템의 site-packages 폴더 &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages에 모듈을 설치하는데 virtualenv를 이용하면 분리할 수 있다.</p>
<p>이제 <code>pip</code>로 <code>virtualenv</code>와 <code>virtualenvwrapper</code>를 설치한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install virtualenv</span><br><span class="line">$ pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure>

<p><code>virtualenvwrapper</code>는 <code>virtualenv</code> 통합 환경을 쉽게 다룰 수 있게 해준다. 쉘 프로파일 <code>.bashrc</code>, <code>.profile</code> 등에 다음 라인을 추가한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> WORKON_HOME=<span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"><span class="built_in">export</span> PROJECT_HOME=<span class="variable">$HOME</span>/Devel</span><br><span class="line"><span class="built_in">source</span> /usr/local/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure>

<p>그리고 쉘 환경을 로딩하기 위해서 다시 로그인 하거나 다음 같이 source 명령을 이용해도 좋다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> .profile</span><br><span class="line">ebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Fri Oct 23 18:17:41 2015 from 192.168.219.103</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/premkproject</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postmkproject</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/initialize</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/premkvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postmkvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/prermvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postrmvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/predeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postdeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/preactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/get_env_details</span><br></pre></td></tr></table></figure>


<p>다음 에러가 발생하면 쉘에 VIRTUALENVWRAPPER_PYTHON 를 추가해 준다.</p>
<blockquote>
<p>&#x2F;usr&#x2F;bin&#x2F;python: No module named virtualenvwrapper<br>virtualenvwrapper.sh: There was a problem running the initialization hooks.</p>
<p>If Python could not import the module virtualenvwrapper.hook_loader,<br>check that virtualenvwrapper has been installed for<br>VIRTUALENVWRAPPER_PYTHON&#x3D;&#x2F;usr&#x2F;bin&#x2F;python and that PATH is</p>
</blockquote>
<h4 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick-Start"></a>Quick-Start</h4><p>새로운 가상환경은 <code>mkvirtualenv</code> 명령으로 만든다. 가상환경으로 전환시 프롬프트가 <code>(NAME) $</code> 형태로 표시된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv django2   <span class="comment">#기본 python 버전의 환경 생성</span></span><br><span class="line">...</span><br><span class="line">(django2):~$               <span class="comment"># 실행 가상 환경 쉘</span></span><br></pre></td></tr></table></figure>

<p><code>mkvirtualenv</code> 명령은 <code>-p</code> 옵션으로 파이썬 버전을 명시할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv -p python3 django3</span><br></pre></td></tr></table></figure>

<p><code>--system-site-packages</code> 옵션은 site-package 시스템 버전을 사용하게 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv --system-site-packages -p python3 django3</span><br></pre></td></tr></table></figure>


<p><strong>workon</strong> 명령으로 설치한 가상 환경 목록을 보거나 혹은 해당 가상환경으로 전환할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ workon </span><br><span class="line">django2 django3</span><br><span class="line">$ workon django3</span><br><span class="line">...</span><br><span class="line">(django3):~$</span><br></pre></td></tr></table></figure>


<p>프로젝트 환경을 빠져 나오려면 <code>deactivate</code>를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(django3):~$ deactivate</span><br></pre></td></tr></table></figure>

<h4 id="가상환경-복사하기"><a href="#가상환경-복사하기" class="headerlink" title="가상환경 복사하기"></a>가상환경 복사하기</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cpvirtualenv django3 new_djang4</span><br><span class="line">$ rmvirtualenv django3</span><br></pre></td></tr></table></figure>


<h3 id="pyvenv"><a href="#pyvenv" class="headerlink" title="pyvenv"></a>pyvenv</h3><p>3.3에서부터 pyvenv에 기본으로 설치되어 있다. 다만 3.3에서는 pip를 가상 환경을 만들 때마다 설치해주어야 한다. 3.4에서는 pip까지 기본으로 설치되어 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> django_tests</span><br><span class="line">$ <span class="built_in">cd</span> django_tests</span><br><span class="line">$ pyvenv-3.4 <span class="built_in">env</span></span><br><span class="line">$ <span class="built_in">source</span> <span class="built_in">env</span>/bin/activate   <span class="comment"># env의 파이썬 활성화</span></span><br><span class="line">(<span class="built_in">env</span>)$ deactivate           <span class="comment"># 시스템 파이썬으로 복귀</span></span><br></pre></td></tr></table></figure>


<h3 id="System-service"><a href="#System-service" class="headerlink" title="System service"></a>System service</h3><p>Virtualevn 환경을 시스템 시작 스크립, 크론, 파이썬 스크립에서 사용하려면 해당 가상 환경 위치의 python 혹은 가상환경의 jupyter-notebook 같은 명령 위치를 지정하면 된다.</p>
<p><a target="_blank" rel="noopener" href="https://serverfault.com/questions/821575/systemd-run-a-python-script-at-startup-virtualenv">https://serverfault.com/questions/821575/systemd-run-a-python-script-at-startup-virtualenv</a></p>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><p><a target="_blank" rel="noopener" href="https://virtualenvwrapper.readthedocs.io/en/latest/">virtualenvwrapper</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-02T01:10:00.000Z" title="2017-4-2 10:10:00">2017-04-02</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:15:34.955Z" title="2022-2-25 1:15:34">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a></span><span class="level-item">17분안에 읽기 (약 2587 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/04/02/linux-2017-04-02-odroid-install-linux/">Odroid - Install Linux</a></h1><div class="content"><blockquote>
<p>2018-07-10: UART 정보 추가<br>2017-07-24: exFAT 추가<br>{:.right-history}</p>
</blockquote>
<h2 id="Odroid-C2-Install-Armbian"><a href="#Odroid-C2-Install-Armbian" class="headerlink" title="Odroid C2 - Install Armbian"></a>Odroid C2 - Install Armbian</h2><p><img src="http://odroid.com/dokuwiki/lib/exe/fetch.php?tok=53e4d9&media=http://dn.odroid.com/homebackup/201602/ODROID-C2.png">{: width&#x3D;”600”}</p>
<figure>[그림. armv8 Odroid C2]</figure>


<p>다음은 Odroid C2에 Ubuntu 16.04 minimal 버전, 그리고 Ambian Jessie를 설치하고, 처음 설정에 대한 것이다.</p>
<ul>
<li>Odroid에서 제공하는 64bit Ubuntu 설치</li>
<li>Ambian 64bit Debian jessi 설치</li>
<li>sudoer 사용자 사용</li>
<li>hostname 설정</li>
<li>swap 사용</li>
</ul>
<h3 id="Ambian-for-Odroid"><a href="#Ambian-for-Odroid" class="headerlink" title="Ambian for Odroid"></a>Ambian for Odroid</h3><p>Armbian에서 데스크탑 버전으로 Ubuntu 와 서버 버전으로 Debian Jessie를 다운로드 가능하다.</p>
<p><img src="/images/odroid/odroidc2-armbian-download.png">{: width&#x3D;”600”}</p>
<p>여기서는 Debian Jessie 버전을 사용한다.</p>
<h4 id="준비사항"><a href="#준비사항" class="headerlink" title="준비사항"></a>준비사항</h4><p>Micro SD Card를 사용하면 가능하면 <strong>UHX-1 Class 10</strong> 를 사용하도록 한다.</p>
<p>Odroid C2는 Micro SD Card 혹은 eMMC Card로 부팅 디스크를 구성할 수 있다.</p>
<ul>
<li>Micro SD Card: <strong>UHX-1 Class 10</strong> 이상</li>
<li>SDHX Class 8에서 사용중인데, 큰 문제는 없지만 SD Card에 영향을 받는 듯 하다.</li>
</ul>
<h4 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h4><p><a target="_blank" rel="noopener" href="http://www.armbian.com/download/">Ambian Download</a> 에서 <a target="_blank" rel="noopener" href="https://www.armbian.com/odroid-c2/">Odroid C2 이미지</a> 에서 <em>Debian server</em>를 다운 받는다. </p>
<p>서버는 7z 파일로 되어 있어서 </p>
<ul>
<li>Windows에서는 <strong>7-Zip</strong> 프로그램, macOS에서는 <strong>Keka</strong></li>
<li>Linux에서 <strong>7z</strong></li>
</ul>
<p>linux 7z은  <code>apt-get install p7zip-full</code> 으로 설치한다.</p>
<p>모든 플랫폼에서 사용 가능한 저수준 이미지 쓰기 프로그램 **<a target="_blank" rel="noopener" href="https://etcher.io/">Etcher</a>**도 권장한다.</p>
<h4 id="Etcher-사용"><a href="#Etcher-사용" class="headerlink" title="Etcher 사용"></a>Etcher 사용</h4><p>모든 플랫폼에서 이미지 쓰기가 가능한 <a target="_blank" rel="noopener" href="https://etcher.io/">Etcher</a> 사용을 권장한다.</p>
<p>다운로드한 Debian_jessie_default.7z 이미지 파일을 선택하고 선택한 SD Card에 이미지를 쓴다.</p>
<p><img src="/images/opensuse/etcher-image-writing.png">{: width&#x3D;”600”}</p>
<h4 id="dd-사용"><a href="#dd-사용" class="headerlink" title="dd 사용"></a>dd 사용</h4><p>다운로드한 Debian_jessie_default.7z 이미지를 압축 해제하고, SD Card를 슬롯에 넣고, SD Card의 디스크 번호를 확인하고, 마운트를 해제한다.</p>
<p>여기서 macOS를 사용하고 Disk Utility 를 이용한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ diskutil list                           #디스크 번호 확인</span><br><span class="line">$ diskutil unmountDisk /dev/disk1         #마운트 해제</span><br></pre></td></tr></table></figure>

<p>dd를 사용해 오에스이미지를 쓴다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=Debian_jessie_default.img of=/dev/rdisk1 bs=1M conv=fsync</span><br></pre></td></tr></table></figure>


<h4 id="Verifying-the-burned-image-with-Linux"><a href="#Verifying-the-burned-image-with-Linux" class="headerlink" title="Verifying the burned image with Linux"></a>Verifying the burned image with Linux</h4><p>오에스 이미지 파일의 md5 값과 디스크에 쓴 이미지의 해시 값을 비교할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=&lt;/dev/path/of/card&gt; bs=512 count=$((`stat -c%s &lt;my/odroid/image.img&gt;`/512)) | md5sum</span><br><span class="line">167742+0 records in</span><br><span class="line">167742+0 records out</span><br><span class="line">85883904 bytes (86 MB, 82 MiB) copied, 0.153662 s, 559 MB/s</span><br><span class="line">9b085251a00ad7ae16fe42fbfb25c042  -</span><br><span class="line">$</span><br><span class="line">$ dd if=&lt;my/odroid/image.img&gt; bs=512 count=$((`stat -c%s &lt;my/odroid/image.img&gt;`/512)) | md5sum</span><br><span class="line">167742+0 records in</span><br><span class="line">167742+0 records out</span><br><span class="line">85883904 bytes (86 MB, 82 MiB) copied, 0.140843 s, 610 MB/s</span><br><span class="line">9b085251a00ad7ae16fe42fbfb25c042  - </span><br></pre></td></tr></table></figure>

<p>두 값이 일치해야 한다.</p>
<p>OS를 쓴 SD Card 로 부팅하고 시스템 구성과 설정을 할 수 있다. 사용자 인터페이스로 사용하기 위해 HDMI, Keyboard 그리고 마우스가 필요하다.</p>
<p>만약 GUI 인터페이스 사용이 여의치 않으면 다음 같이 Serial Console을 이용해 접근할 수 있다.</p>
<h4 id="Serial-Console-이용"><a href="#Serial-Console-이용" class="headerlink" title="Serial Console 이용"></a>Serial Console 이용</h4><p>Odroid C2는 아래 같이 Serial Port 를 제공하고 있다. <a target="_blank" rel="noopener" href="https://wiki.odroid.com/odroid-c2/hardware/hardware">^1</a></p>
<p><img src="/images/odroid/odroidc2-uart.png">{: width&#x3D;”6400”}</p>
<figure>[그림. Odroid C2 의 UART (그림. wiki.odroid.com)]</figure>



<h3 id="시스템-설정"><a href="#시스템-설정" class="headerlink" title="시스템 설정"></a>시스템 설정</h3><p>기본 아이디 root &#x2F; 1234 로 로그인 가능하고 즉시 비밀번호를 변경해야 한다. 또한 사용자 계정을 만들어 사용해야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">Welcome to ARMBIAN Ubuntu 16.04 LTS 3.4.112-sun8i</span><br><span class="line"></span><br><span class="line">System load:   1.17             Up time:       2 min</span><br><span class="line">IP:            192.168.11.122</span><br><span class="line">CPU temp:      51°C</span><br><span class="line">Usage of /:    17% of 7.3G</span><br><span class="line"></span><br><span class="line">Changing password for root.</span><br><span class="line">(current) UNIX password:</span><br><span class="line">Enter new UNIX password:</span><br><span class="line">Retype new UNIX password:</span><br><span class="line"></span><br><span class="line">Thank you for choosing Armbian! Support: www.armbian.com</span><br><span class="line"></span><br><span class="line">Creating new account. Please provide a username (eg. your forename): qkboo</span><br><span class="line">Adding user `qkboo&#x27; ...</span><br><span class="line">Adding new group `qkboo&#x27; (1000) ...</span><br><span class="line">Adding new user `qkboo&#x27; (1000) with group `qkboo&#x27; ...</span><br><span class="line">Creating home directory `/home/qkboo&#x27; ...</span><br><span class="line">Copying files from `/etc/skel&#x27; ...</span><br><span class="line">Enter new UNIX password:</span><br><span class="line">Retype new UNIX password:</span><br><span class="line">passwd: password updated successfully</span><br><span class="line">Changing the user information for qkboo</span><br><span class="line">Enter the new value, or press ENTER for the default</span><br><span class="line">    Full Name []: Qkboo</span><br><span class="line">    Room Number []:</span><br><span class="line">    Work Phone []:</span><br><span class="line">    Home Phone []:</span><br><span class="line">    Other []:</span><br><span class="line">Is the information correct? [Y/n] y</span><br><span class="line"></span><br><span class="line">Dear Qkboo, your account qkboo has been created and is sudo enabled.</span><br><span class="line">Please use this account for your daily work from now on.</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="upgrade"><a href="#upgrade" class="headerlink" title="upgrade"></a>upgrade</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt update &amp;&amp; apt dist-upgrade &amp;&amp; apt upgrade</span><br></pre></td></tr></table></figure>

<p>업그레이드 중 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The following packages have been kept back:   linux-image-c2</span><br></pre></td></tr></table></figure>

<p>기존 리눅스 이미지를 지우고 업그리이드 중 에러가 나서 이미지 업그레이드가 안되었으므로, 이전 버전 이미지를 찾아 삭제해 주면 다시 업그레이드가 된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># apt --installed list |grep linux</span><br><span class="line"></span><br><span class="line">linux-image-3.14.65-73/unknown,now 20160802 arm64 [installed,automatic]</span><br><span class="line">linux-image-3.14.79-94/unknown,now 20161121 arm64 [installed,automatic]</span><br><span class="line">linux-image-c2/now 73-1 arm64 [installed,upgradable to: 94-1]</span><br><span class="line">linux-libc-dev/xenial-updates,xenial-security,now 4.4.0-51.72 arm64 [installed]</span><br><span class="line">util-linux/xenial-updates,now 2.27.1-6ubuntu3.1 arm64 [installed]</span><br></pre></td></tr></table></figure>


<p>이전 버전 이미지를 지운다. 업그레이드 후 uname 확인</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@odroid64:~# apt autoremove linux-image-3.14.65-73</span><br><span class="line">...</span><br><span class="line">Preparing to unpack .../linux-image-c2_94-1_arm64.deb ...</span><br><span class="line">Unpacking linux-image-c2 (94-1) over (73-1) ...</span><br><span class="line">Setting up linux-image-c2 (94-1) ...</span><br><span class="line"></span><br><span class="line"># uname -a</span><br><span class="line">Linux odroid64 3.14.79-94 #1 SMP PREEMPT Mon Nov 21 17:13:27 BRST 2016 aarch64 aarch64 aarch64 GNU/Linux</span><br></pre></td></tr></table></figure>


<h4 id="hostname"><a href="#hostname" class="headerlink" title="hostname"></a>hostname</h4><p>debian 계열에서 hostname을 변경하려면 <code>hostnamectl</code> 을 사용한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ sudo -s</span><br><span class="line"># hostnamectl set-hostname dlp</span><br><span class="line"># show settings</span><br><span class="line">root@debian:~# hostnamectl </span><br><span class="line">   Static hostname: dlp</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 5f47b11299ed4689a48a7f78197e452a</span><br><span class="line">           Boot ID: bdeed3b6c079405bb45d79eff3e870a5</span><br><span class="line">    Virtualization: vmware</span><br><span class="line">  Operating System: Debian GNU/Linux 8 (jessie)</span><br><span class="line">            Kernel: Linux 3.16.0-4-amd64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Timezone"><a href="#Timezone" class="headerlink" title="Timezone"></a>Timezone</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># dpkg-reconfigure tzdata</span><br></pre></td></tr></table></figure>



<h4 id="bash-completion"><a href="#bash-completion" class="headerlink" title="bash-completion"></a>bash-completion</h4><p>minimal 버전에는 bash-completion 을 다시 설치해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install bash-completion --reinstall</span><br></pre></td></tr></table></figure>


<h4 id="Swap-추가"><a href="#Swap-추가" class="headerlink" title="Swap 추가"></a>Swap 추가</h4><p>여유 디스크에 swap을 추가하려면 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkswap /dev/sda1</span><br><span class="line">$ sudo swapon /dev/sda1</span><br><span class="line">$ sudo swapon -s</span><br></pre></td></tr></table></figure>

<p>swap 파일로 만들려면 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=/dev/zero of=/data/swap4G bs=1G count=4</span><br><span class="line">$ sudo chmod 600 /swapfile</span><br><span class="line">$ sudo mkswap /swapfile</span><br><span class="line">$ sudo swapon /swapfile</span><br><span class="line">$ sudo swapon -s</span><br></pre></td></tr></table></figure>

<h5 id="swapoff"><a href="#swapoff" class="headerlink" title="swapoff"></a>swapoff</h5><p>swap 을 지우려면</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swapoff /swapfile</span><br><span class="line">rm /swapfile</span><br></pre></td></tr></table></figure>


<br>
## Ubuntu 16.04 설치

<p>Micro SD Card를 사용하면 가능하면 <strong>UHX-1 Class 10</strong> 를 사용하도록 한다.</p>
<h3 id="준비사항-1"><a href="#준비사항-1" class="headerlink" title="준비사항"></a>준비사항</h3><p>Odroid C2는 Micro SD Card 혹은 eMMC Card로 부팅 디스크를 구성할 수 있다.</p>
<ul>
<li>Micro SD Card: <strong>UHX-1 Class 10</strong> 이상</li>
<li>SDHX Class 8에서 사용중인데, 큰 문제는 없지만 SD Card에 영향을 받는 듯 하다.</li>
</ul>
<p>다운로드 사이트에서 <a target="_blank" rel="noopener" href="http://dn.odroid.com/S905/Ubuntu/">Download</a> 한다.</p>
<h4 id="Write-a-image"><a href="#Write-a-image" class="headerlink" title="Write a image"></a>Write a image</h4><p>macOS를 사용하고 있어서 macOS의 diskutil 명령을 사용해 SD Card에 접근했다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskutil list                        <span class="comment"># 디스크 목록에서 SD Card의 디바이스 파일 찾는다.</span></span><br></pre></td></tr></table></figure>

<p>그리고 쓸려는 SD Card를 Unmount 해준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diskutil unmountDisk /dev/disk1</span><br></pre></td></tr></table></figure>

<p>다운받은 xz 파일을 dd 명령으로 SD Card 메모리 디스크에 쓴다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xzcat ubuntu64-16.04-minimal-odroid-c2-20160815.img.xz | sudo dd of=/dev/rdisk1 bs=1M conv=fsync</span><br></pre></td></tr></table></figure>

<blockquote>
<p>macOS는 &#x2F;dev&#x2F;disk[1,2..] 의 디바이스 파일과 &#x2F;dev&#x2F;rdisk[1,2…]의 raw disk 디바이스 파일이 있다. 실제 쓸때 rdisk 파일을 사용하도록 권장하고 있다.</p>
</blockquote>
<h4 id="Verifying-the-burned-image-with-Linux-1"><a href="#Verifying-the-burned-image-with-Linux-1" class="headerlink" title="Verifying the burned image with Linux"></a>Verifying the burned image with Linux</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=&lt;/dev/path/of/card&gt; bs=512 count=$((`stat -c%s &lt;my/odroid/image.img&gt;`/512)) | md5sum</span><br><span class="line">167742+0 records in</span><br><span class="line">167742+0 records out</span><br><span class="line">85883904 bytes (86 MB, 82 MiB) copied, 0.153662 s, 559 MB/s</span><br><span class="line">9b085251a00ad7ae16fe42fbfb25c042  -</span><br><span class="line">$ dd if=&lt;my/odroid/image.img&gt; bs=512 count=$((`stat -c%s &lt;my/odroid/image.img&gt;`/512)) | md5sum</span><br><span class="line">167742+0 records in</span><br><span class="line">167742+0 records out</span><br><span class="line">85883904 bytes (86 MB, 82 MiB) copied, 0.140843 s, 610 MB/s</span><br><span class="line">9b085251a00ad7ae16fe42fbfb25c042  - </span><br></pre></td></tr></table></figure>


<h3 id="첫번째-부팅"><a href="#첫번째-부팅" class="headerlink" title="첫번째 부팅"></a>첫번째 부팅</h3><p>기본 유저는 root&#x2F;odroid 로 설정되어 있다. <strong>root의 기본 패스워드를 변경</strong>하고, <strong>sudo 사용자</strong>를 추가해 사용하도록 하자.</p>
<h4 id="upgrade-1"><a href="#upgrade-1" class="headerlink" title="upgrade"></a>upgrade</h4><p>upgrade시 <code>dist-upgrade</code> 는 꼭 해주도록 하자. kernel 관련 업그레이드를 완성시켜 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt update &amp;&amp; apt dist-upgrade &amp;&amp; apt upgrade</span><br></pre></td></tr></table></figure>

<p>업그레이드 하는 도중 아래 같은 에러가 발생하면,</p>
<blockquote>
<p>The following packages have been kept back:   linux-image-c2</p>
</blockquote>
<p>기존 리눅스 이미지를 지우고 업그리이드 중 에러가 나서 이미지 업그레이드가 중단되어서 그렇다. 이전 버전 이미지를 찾아 삭제해 주면 다시 업그레이드가 된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># apt --installed list |grep linux</span><br><span class="line"></span><br><span class="line">linux-image-3.14.65-73/unknown,now 20160802 arm64 [installed,automatic]</span><br><span class="line">linux-image-3.14.79-94/unknown,now 20161121 arm64 [installed,automatic]</span><br><span class="line">linux-image-c2/now 73-1 arm64 [installed,upgradable to: 94-1]</span><br><span class="line">linux-libc-dev/xenial-updates,xenial-security,now 4.4.0-51.72 arm64 [installed]</span><br><span class="line">util-linux/xenial-updates,now 2.27.1-6ubuntu3.1 arm64 [installed]</span><br></pre></td></tr></table></figure>


<p>이전 버전 이미지를 지운다. 업그레이드 후 uname 확인</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@odroid64:~# apt autoremove linux-image-3.14.65-73</span><br><span class="line">...</span><br><span class="line">Preparing to unpack .../linux-image-c2_94-1_arm64.deb ...</span><br><span class="line">Unpacking linux-image-c2 (94-1) over (73-1) ...</span><br><span class="line">Setting up linux-image-c2 (94-1) ...</span><br><span class="line"></span><br><span class="line"># uname -a</span><br><span class="line">Linux odroid64 3.14.79-94 #1 SMP PREEMPT Mon Nov 21 17:13:27 BRST 2016 aarch64 aarch64 aarch64 GNU/Linux</span><br></pre></td></tr></table></figure>

<p>Odroid의 Ubuntu는 root 계정을 기본으로 제공하고 있다. 일반 사용자를 등록해 sudoer로 사용하도록 한다.</p>
<h3 id="sudo-새-사용자-등록"><a href="#sudo-새-사용자-등록" class="headerlink" title="sudo 새 사용자 등록"></a>sudo 새 사용자 등록</h3><p>sudo 사용자를 추가해서 사용하려면, adduser 혹은 useradd 명령을 사용해서 사용자를 등록 할 수 있다. </p>
<h4 id="새-사용자-등록"><a href="#새-사용자-등록" class="headerlink" title="새 사용자 등록"></a>새 사용자 등록</h4><p>먼저 adduser는 추가할 사용자에 대한 정보를 하나씩 물어 가며 등록이 진행되고, 사용자 홈을 생성해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sudo adduser qkboo</span><br><span class="line">Adding user `qkboo&#x27; ...</span><br><span class="line">Adding new group `qkboo&#x27; (1000) ...</span><br><span class="line">Adding new user `qkboo&#x27; (1000) with group `qkboo&#x27; ...</span><br><span class="line">Creating home directory `/home/qkboo&#x27; ...</span><br><span class="line">Copying files from `/etc/skel&#x27; ...</span><br><span class="line">Enter new UNIX password:</span><br><span class="line">Retype new UNIX password:</span><br><span class="line">passwd: password updated successfully</span><br><span class="line">Changing the user information for qkboo</span><br><span class="line">Enter the new value, or press ENTER for the default</span><br><span class="line">        Full Name []: Gangtai</span><br><span class="line">        Room Number []:</span><br><span class="line">        Work Phone []:</span><br><span class="line">        Home Phone []:</span><br><span class="line">        Other []:</span><br><span class="line">Is the information correct? [Y/n] y</span><br></pre></td></tr></table></figure>


<p><code>useradd</code> 는 홈 디렉토리, 쉘 등에 대한 옵션을 주고 사용자를 등록한다.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://www.tecmint.com/add-users-in-linux/">http://www.tecmint.com/add-users-in-linux/</a></p>
</blockquote>
<p>‘useradd‘ 명령은 크게 두가지 일을 한다:</p>
<ul>
<li>추가한 사용자에 대한 &#x2F;etc&#x2F;passwd, &#x2F;etc&#x2F;shadow, &#x2F;etc&#x2F;group and &#x2F;etc&#x2F;gshadow 편집</li>
<li>사용자 홈 디렉토리 생성</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sudo  useradd -m qkboo</span><br></pre></td></tr></table></figure>

<p>그리고 패스워드를 등록한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo passwd qkboo</span><br><span class="line">New password:</span><br><span class="line">Retype new password:</span><br><span class="line">passwd: password updated successfully</span><br></pre></td></tr></table></figure>



<h4 id="sudoer-등록"><a href="#sudoer-등록" class="headerlink" title="sudoer 등록"></a>sudoer 등록</h4><p>처음 로그인후 새로운 사용자 등록하고 suders에 직접 권한을 줄 수 있다.<br>새로 등록한 혹은 사용자를 <em>sudo 그룹</em>에 등록해 둔다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># usermod -aG sudo USERNAME</span><br></pre></td></tr></table></figure>


<p>혹은 <strong>visudo</strong> 명령으로 sudoers 파일을 편집할 수 있습니다. sudoer에 있는 root는 제외하고 사용자로 등록한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo visudo</span><br><span class="line"># User privilege specification</span><br><span class="line">root  ALL=(ALL:ALL) ALL</span><br><span class="line">pi  ALL=(ALL:ALL) ALL</span><br></pre></td></tr></table></figure>



<h4 id="기본-에디터-변경"><a href="#기본-에디터-변경" class="headerlink" title="기본 에디터 변경"></a>기본 에디터 변경</h4><p>odroid의 ubuntu 16.04는 기본에디터로 joe가 설치되어 있다. vim 으로 변경한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># update-alternatives --config editor</span><br><span class="line">There are 6 choices for the alternative editor (providing /usr/bin/editor).</span><br><span class="line"></span><br><span class="line">  Selection    Path               Priority   Status</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">* 0            /usr/bin/joe        70        auto mode</span><br><span class="line">  1            /usr/bin/jmacs      50        manual mode</span><br><span class="line">  2            /usr/bin/joe        70        manual mode</span><br><span class="line">  3            /usr/bin/jpico      50        manual mode</span><br><span class="line">  4            /usr/bin/jstar      50        manual mode</span><br><span class="line">  5            /usr/bin/rjoe       25        manual mode</span><br><span class="line">  6            /usr/bin/vim.tiny   10        manual mode</span><br><span class="line"></span><br><span class="line">Press &lt;enter&gt; to keep the current choice[*], or type selection number: 6</span><br></pre></td></tr></table></figure>


<h3 id="exFAT"><a href="#exFAT" class="headerlink" title="exFAT"></a>exFAT</h3><p>리눅스테어 외부 USB 디스크를 <em>exFAT</em>로 포맷하고 사용한다면, <em>exfat-fuse</em>와 <em>exfat-utils</em>를 설치해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install exfat-fuse exfat-utils</span><br></pre></td></tr></table></figure>

<p>그리고 대부분 최신 리눅스 데스크탑은 USB 디스크를 더블클릭하면 자동마운트 해준다.</p>
<p>터미널에서는</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo <span class="built_in">mkdir</span> /media/my_usb</span><br><span class="line">$ sudo mount -t exfat /dev/sdb1 /media/my_usb</span><br><span class="line">$ sudo umount /dev/sdb1</span><br></pre></td></tr></table></figure>


<h3 id="VNC-server"><a href="#VNC-server" class="headerlink" title="VNC server"></a>VNC server</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install tightvncserver</span><br></pre></td></tr></table></figure>

<p>그리고 <code>vncserver</code> 명령으로 기본 패스워드를 생성한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vncserver</span><br></pre></td></tr></table></figure>




<h4 id="grc"><a href="#grc" class="headerlink" title="grc"></a>grc</h4><p>터미널 컬러 처리</p>
<p><a target="_blank" rel="noopener" href="https://github.com/garabik/grc">https://github.com/garabik/grc</a></p>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li>[sudo user create](&gt; <a target="_blank" rel="noopener" href="https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart">https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart</a>)</li>
<li><a target="_blank" rel="noopener" href="https://docs.armbian.com/">armbian docs</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-01T00:00:00.000Z" title="2017-4-1 9:00:00">2017-04-01</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:09:27.779Z" title="2022-2-25 1:09:27">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a><span> / </span><a class="link-muted" href="/categories/Linux/NodeJS/">NodeJS</a></span><span class="level-item">13분안에 읽기 (약 2008 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/04/01/nodejs-2017-04-01-nodejs-install-nvm/">NodeJS / nvm 기반 개발환경 설치</a></h1><div class="content"><p>Node.js를 설치하고 관리할 수 있는 Node Version Manager를 사용한 개발환경 구성에 대해 살펴본다.</p>
<blockquote>
<p>2018-6 <code>npm i</code> 관련 설명 추가<br>{:.right-history}</p>
</blockquote>
<h2 id="버전관리자를-통한-Node-js-개발환경"><a href="#버전관리자를-통한-Node-js-개발환경" class="headerlink" title="버전관리자를 통한 Node.js 개발환경"></a>버전관리자를 통한 Node.js 개발환경</h2><p>Node.js는 커뮤니티 개발을 위주로 업그레이드가 자주 된다. 개발중인 관련 모듈이 업그레이드를 따라가지 못할 경우가 자주 발생할 수 있다. 그래서 실제 개발하는 경우에 Node.js 버전의 변경을 자유롭게 하기 위해서 버전관리자(Node Version Manager) 환경에서 개발을 권장한다. </p>
<p>주요한 버전관리자에는 Nvm, Nodist 등 여러 종류가 있는데, 대부분 리눅스와 맥에서 사용 가능하다. 그리고 윈도우 환경에서는 nvm-windows, nodist를 사용할 수 있다.</p>
<ul>
<li>Linux&#x2F;macOS: <a target="_blank" rel="noopener" href="https://github.com/creationix/nvm">https://github.com/creationix/nvm</a></li>
<li>Windows: <a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist">https://github.com/marcelklehr/nodist</a></li>
</ul>
<p>버전관리자를 설치후 사용 방법은 대동소이 하다. 여기서는 <strong>nvm</strong>을 다룬다.</p>
<p>Shell 은 쉘 프롬프트로 사용자 권한 및 현재 위치를 표시하는데 보통 권한별로 아래 기호를 사용한다.<br/></p>
<ul>
<li><code>$</code> : 사용자 프롬프트</li>
<li><code>#</code> : root 프롬프트</li>
<li><code>~</code> : 사용자 홈 디렉토리</li>
<li><code>/</code> : 루트 디렉토리</li>
<li><code>.</code> : 현재 디렉토리</li>
<li><code>..</code> : 이전 디렉토리</li>
</ul>
<h3 id="nvm-설치"><a href="#nvm-설치" class="headerlink" title="nvm 설치"></a>nvm 설치</h3><p>Linux &#x2F; MacOS는 다음 쉘 스크립을 실행해 설치한다.</p>
<p>curl 이용:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.4/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>wget 이용:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.4/install.sh | bash</span><br></pre></td></tr></table></figure>

<p><em>install.sh</em> 스크립이 설치하는 nvm은 사용자 홈디렉토리 <code>~/.nvm</code> 에 설치된다. (이후 <em>$NVM_HOME</em>이라 하겠다)</p>
<blockquote>
<p><em>$NVM_HOME&#x2F;install.sh</em> 를 실행하면 업그레이드가 진행된다.</p>
</blockquote>
<p>설치후 <em>~&#x2F;.bash_profile</em>, <em>~&#x2F;.profile</em> 등의 프로파일에 <code>nvm.sh</code> 가 실행되도록 아래 스크립이 추가된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; . <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> <span class="comment"># This loads nvm</span></span><br></pre></td></tr></table></figure>


<h4 id="Node-js-설치"><a href="#Node-js-설치" class="headerlink" title="Node.js 설치"></a>Node.js 설치</h4><p>원격 저장소의 node 목록</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote</span><br><span class="line">nvm ls-remote v6        <span class="comment">#v6.x 버전만 검색</span></span><br></pre></td></tr></table></figure>

<p><code>nvm install</code> 은 해당 node version를 다운로드하고 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install v5          <span class="comment"># node version v5.x 버전중 최종버전</span></span><br></pre></td></tr></table></figure>

<p><code>nvm ls</code> 설치된 node 버전을 확인한다</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ nvm <span class="built_in">ls</span></span><br><span class="line">   v0.9.12</span><br><span class="line">   v0.11.0</span><br><span class="line">   v6.9.1</span><br><span class="line">current:    v6.9.1</span><br></pre></td></tr></table></figure>

<p><code>nvm use</code>로 사용할 node version을 지정한다 - 이것은 사용자의 <code>$PATH</code> 환경변수에 <code>node</code> 경로를 추가해준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm use 6.9.1       <span class="comment">#v6 버전을 사용한다.</span></span><br><span class="line">nvm use v7          <span class="comment">#v7 버전중 최종 버번을 선택한다.</span></span><br></pre></td></tr></table></figure>

<p><code>node</code> 경로를 제거하려면,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm deactivate</span><br></pre></td></tr></table></figure>


<p>로그인후 기본 node 환경으로 지정하려면</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">alias</span> default 6.9.1</span><br></pre></td></tr></table></figure>


<h4 id="lts-버전"><a href="#lts-버전" class="headerlink" title="lts 버전"></a>lts 버전</h4><p>Node.js 는 가용 버전이 장기지원을 위해서 <a target="_blank" rel="noopener" href="https://github.com/nodejs/Release">LTS(Long Term Support)</a> 프로그램을 진행하고 있다. 실제 운영 서버는 이런 LTS 버전을 중심으로 가동될 것이다. <strong>nvm</strong> 도 lts 만을 선별해서 설치하고 관리할 수 있다.</p>
<p>현재 LTS 버전중 최신버전만을 출력하려면,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote --lts |grep Latest</span><br></pre></td></tr></table></figure>


<h4 id="전역-패키지-통합"><a href="#전역-패키지-통합" class="headerlink" title="전역 패키지 통합"></a>전역 패키지 통합</h4><p>nvm에서 새로운 node 버전을 설치하면서 기존 node 버전에서 사용중인 패키지를 통합해서 설치 할 수 있다.  예를 들어 최신 8 버전을 설치하며 사용중인 기존 6버전 패키지를 함께 설치하려면,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install v8 --reinstall-packages-from=v8.0.1</span><br></pre></td></tr></table></figure>



<h4 id="Default-alias-잘-못-된-경우"><a href="#Default-alias-잘-못-된-경우" class="headerlink" title="Default alias 잘 못 된 경우"></a>Default alias 잘 못 된 경우</h4><p>새로 로그인 혹은 버전 변경시 다음 메시지 출력,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">N/A: version &quot;N/A -&gt; N/A&quot; is not yet installed.</span><br></pre></td></tr></table></figure>

<p>이 경우 가능성은 제거한 버전이 default 로 지정되서 그런듯 하다, 아래의 경우 default가 v8.7 인데 삭제해서 없기 때문이다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ nvm ls</span><br><span class="line">-&gt;      v6.11.5</span><br><span class="line">        v7.10.1</span><br><span class="line">default -&gt; v8.7.0 (-&gt; N/A)</span><br><span class="line">node -&gt; stable (-&gt; v7.10.1) (default)</span><br><span class="line">stable -&gt; 7.10 (-&gt; v7.10.1) (default)</span><br><span class="line">iojs -&gt; N/A (default)</span><br><span class="line">lts/* -&gt; lts/boron (-&gt; v6.11.5)</span><br><span class="line">lts/argon -&gt; v4.8.5 (-&gt; N/A)</span><br><span class="line">lts/boron -&gt; v6.11.5</span><br></pre></td></tr></table></figure>

<p>그래서 default 를 설치된 버전으로 변경해서 지정해 주면 위 메시지가 나오지 않는다.</p>
<br/>
<br/>
### nodist

<p>Nodist 는 윈도우즈 환경에서 Nvm과 비슷하게 nodejs의 버전을 관리할 수 있다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist">https://github.com/marcelklehr/nodist</a></li>
<li>윈도우즈 인스톨러로 다운로드 가능.</li>
<li>git 혹은 zip 으로 다운로드 가능.</li>
</ul>
<h4 id="인스톨러로-설치시"><a href="#인스톨러로-설치시" class="headerlink" title="인스톨러로 설치시"></a>인스톨러로 설치시</h4><p><a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist/releases">nodist releases</a> 에서 nodist 인스톨러를 다운받아 설치한다.</p>
<h4 id="git으로-설치"><a href="#git으로-설치" class="headerlink" title="git으로 설치"></a>git으로 설치</h4><p>윈도우즈 <code>git</code>으로 clone을 해오고, 윈도우의 환경설정 변수를 설정한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;git clone git://github.com/marcelklehr/nodist.git</span><br><span class="line">C:\&gt;setx /M PATH &quot;C:\users\thinkbee\nodist\bin;%PATH%&quot;</span><br><span class="line">C:\&gt;setx /M NODIST_PREFIX &quot;C:\users\thinkbee\nodist&quot;</span><br></pre></td></tr></table></figure>

<p>이제 <code>cmd</code>에서 <code>nodist</code>의 업데이트를 실행해주고 사용한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;nodist selfupdate</span><br></pre></td></tr></table></figure>

<p>기타 다른 환경에서 설치 및 사용법은 <a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist">nodist</a> 에서 확인한다.</p>
<hr>
<h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><p><code>npm</code> 은 nodejs 패키지 관리자로 선택한 모듈을 설치, 갱신 및 삭제할 수 있고, 스크립팅을 통해 프로세스 관리까지 할 수 있다.</p>
<h4 id="npm-init"><a href="#npm-init" class="headerlink" title="npm init"></a>npm init</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y[--yes]</span><br></pre></td></tr></table></figure>

<p>이렇게 생성된 package.json 은,</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;myproject&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>npm 으로 추가하는 모듈은 package.json에 의존성을 추가할 수 있다. <code>npm install --save</code> 별도의 플래그를 사용한다. 그리고 <code>--dev</code> 플래그를 주면 developer dependency에 추가해 준다.</p>
<h4 id="save"><a href="#save" class="headerlink" title="save"></a>save</h4><p>npm &lt; 5 이하 버전은 <code>-S</code> 혹은 <code>--save</code> 옵션으로 모듈 의존성을 <em>package.json</em> 에 추가한다.</p>
<p><code>node</code>를 설치후 <code>npm</code>을 업그레이드 해준다. npm 자체는 다음 같이 업그레이드 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -g npm</span><br><span class="line">npm install npm@latest -g</span><br></pre></td></tr></table></figure>


<h4 id="Outdated-module"><a href="#Outdated-module" class="headerlink" title="Outdated module"></a>Outdated module</h4><p>현재 package.json 에 설치된 버전과 명시된 버전 그리고 최신 버전과 차이를 알 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm outdated</span><br><span class="line">Package                  Current  Wanted  Latest  Location</span><br><span class="line">body-parser               1.15.2  1.15.2  1.18.2  application-name</span><br><span class="line">debug                      0.7.4   0.7.4   3.1.0  application-name</span><br></pre></td></tr></table></figure>

<p>최신 버전으로 설치를 하려면 package.json을 버전코드로 변경하고 업데이트를 진행한다.</p>
<p>모든 패키지를 업데이트할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br><span class="line">+ mongoose@4.13.1</span><br><span class="line">added 1 package, removed 4 packages and updated 2 packages in 32.975s</span><br></pre></td></tr></table></figure>

<p>특정 모듈만 업데이트하려면 패키지를 명시하면 된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update debug</span><br></pre></td></tr></table></figure>


<h4 id="npm-upgrade"><a href="#npm-upgrade" class="headerlink" title="npm upgrade"></a>npm upgrade</h4><p><code>node</code>를 설치후 <code>npm</code>을 업그레이드 해준다. npm 자체는 다음 같이 업그레이드 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -g npm</span><br><span class="line">npm install npm@latest -g</span><br></pre></td></tr></table></figure>


<h4 id="Outdated-module-1"><a href="#Outdated-module-1" class="headerlink" title="Outdated module"></a>Outdated module</h4><p>현재 package.json 에 설치된 버전과 명시된 버전 그리고 최신 버전과 차이를 알 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm outdated</span><br><span class="line">Package                  Current  Wanted  Latest  Location</span><br><span class="line">body-parser               1.15.2  1.15.2  1.18.2  application-name</span><br><span class="line">debug                      0.7.4   0.7.4   3.1.0  application-name</span><br></pre></td></tr></table></figure>

<p>최신 버전으로 설치를 하려면 package.json을 버전코드로 변경하고 업데이트를 진행한다.<br>혹은 모든 패키지를 업데이트할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br><span class="line">+ mongoose@4.13.1</span><br><span class="line">added 1 package, removed 4 packages and updated 2 packages in 32.975s</span><br></pre></td></tr></table></figure>


<h4 id="npm-in-vs-npm-up"><a href="#npm-in-vs-npm-up" class="headerlink" title="npm in vs. npm up"></a><code>npm in</code> vs. <code>npm up</code></h4><p>install 과 update는 package.json 에 명시된 버전에 대응해 실행된다.</p>
<ul>
<li>npm install installs all modules that are listed on package.json file and their dependencies.</li>
<li>npm update updates all packages in the node_modules directory and their dependencies.</li>
<li>npm install express installs only the express module and its dependencies.</li>
<li>npm update express updates the express module and its dependencies.</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12478679/npm-install-vs-update-whats-the-difference">stackoverflow: npm install vs update</a> 에 따르면 버전 관리에 따른 차이를 보인다.</p>
<p>개별 모듈만 업그레이드 하려면 <code>install @latest</code> 같이 사용한다. 다음 같이 npm outdated 로 프로젝트 버전 상태를 확인해 보면</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ npm outdated</span><br><span class="line">Package                     Current   Wanted      Latest  Location</span><br><span class="line">agenda                        0.9.0    0.9.1       1.0.3  www_app</span><br><span class="line">body-parser                  1.15.2   1.15.2      1.18.2  www_app</span><br><span class="line">charset                       1.0.0    1.0.1       1.0.1  www_app</span><br><span class="line">cheerio                      0.22.0   0.22.0  1.0.0-rc.2  www_app</span><br><span class="line">cookie-parser                 1.3.5    1.3.5       1.4.3  www_app</span><br><span class="line">debug                         2.2.0    2.2.0       3.1.0  www_app</span><br><span class="line">ejs                           2.5.7    2.5.8       2.5.8  www_app</span><br><span class="line">express                      4.14.1   4.14.1      4.16.3  www_app</span><br><span class="line">iconv                         2.2.1    2.3.0       2.3.0  www_app</span><br><span class="line">mongoose                     4.13.2  4.13.12      5.0.13  www_app</span><br><span class="line">morgan                        1.7.0    1.7.0       1.9.0  www_app</span><br><span class="line">multer                        1.2.0    1.3.0       1.3.0  www_app</span><br><span class="line">passport                      0.2.2    0.2.2       0.4.0  www_app</span><br><span class="line">passport-local-mongoose       1.3.0    1.3.0       5.0.0  www_app</span><br><span class="line">pug                      2.0.0-rc.4    2.0.3       2.0.3  www_app</span><br><span class="line">request                      2.83.0   2.85.0      2.85.0  www_app</span><br><span class="line">serve-favicon                 2.3.0    2.3.2       2.5.0  www_app</span><br></pre></td></tr></table></figure>

<p><code>i</code> 명령으로 현재 package.json에 명시된 버전이 설치된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm i mongoose</span><br><span class="line">+ mongoose@4.13.12</span><br><span class="line">updated 7 packages in 17.037s</span><br></pre></td></tr></table></figure>

<p>@latest 제한자로 최신 버전으로 업그레이드 할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i mongoose@latest</span><br><span class="line">+ mongoose@5.0.13</span><br></pre></td></tr></table></figure>


<p>어쨌든 버전 갱신을 목적으로 하면 <code>npm i</code> 를 일반적으로 써도 무방하다. </p>
<h3 id="Process-management"><a href="#Process-management" class="headerlink" title="Process management"></a>Process management</h3><p>다음 <a href=""></a> 글로 좀더 깊은 내용으로 옮겼다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2016-12-20T00:00:00.000Z" title="2016-12-20 9:00:00">2016-12-20</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:16:51.961Z" title="2022-2-25 1:16:51">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Raspberry-Pi/">Raspberry Pi</a><span> / </span><a class="link-muted" href="/categories/Raspberry-Pi/Linux/">Linux</a></span><span class="level-item">17분안에 읽기 (약 2558 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/12/20/raspberrypi-2016-12-20-sdcard-usage/">SD Card 포맷 및 디스크 이미지 사용하기</a></h1><div class="content"><p>SBC, PC 등의 머신에서 SD Card 사용에 필요한 사항을 정리했다.</p>
<blockquote>
<p>2018-08-30: 전체 내용 편집<br>2017-10-30: swap 추가, timezone 수정<br>{:.right-history}</p>
</blockquote>
<br>
## SD Card 와 디스크 이미지 사용하기

<p>SD Card는 Secure Digital의 약자로 Flash memory(비휘발성) 카드 포맷이다.</p>
<p>자세한 내용은 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/SD_%EC%B9%B4%EB%93%9C">Wikipedia: SD Card</a> 를 확인하자.</p>
<h3 id="SD-Card-format"><a href="#SD-Card-format" class="headerlink" title="SD Card format"></a>SD Card format</h3><ol>
<li>Windows</li>
</ol>
<ul>
<li>Disk Utility를 이용한다.</li>
<li>SD Association의 SD Formatter 를 이용한다.</li>
</ul>
<ol start="2">
<li>macOS</li>
</ol>
<ul>
<li>Diskutility 앱을 이용한다.</li>
<li>SD Association의 SD Formatter 를 이용한다.</li>
</ul>
<ol start="3">
<li>Linux</li>
</ol>
<ul>
<li><code>fdisk</code>, <code>parted</code> 명령으로 포맷할 수 있다.</li>
<li><code>dd</code> 명령으로</li>
</ul>
<h4 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h4><p>macOS는 Disk Utility 프로그램을 명령줄에서 <a target="_blank" rel="noopener" href="https://ss64.com/osx/diskutil.html">diskutil</a> 명령으로 디스크에 대한 파티션, 포맷 및 점검을 할 수 있다. GUI 윈도우를 제공하지만 명령줄에서 <code>diskutil</code> 명령으로 파티션, 마운트 및 포맷을 할 수 있다.</p>
<p>명령줄에서 <code>diskutil</code> 명령으로 목록과 파티션 마운트를 해제하고 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ diskutil list</span><br><span class="line"></span><br><span class="line">$ diskutil unmountDisk /dev/diskX</span><br></pre></td></tr></table></figure>

<p>역시 <code>dd</code> 명령을 이용해 <code>/dev/zero</code>, <code>/dev/urandom</code> 을 디스크 전체에 써서 지울 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=/dev/urandom of=/dev/diskX bs=1000000</span><br></pre></td></tr></table></figure>

<p>디스크 파티션은 <code>partitionDisk</code> 를 사용해서 파티션할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo diskutil partitionDisk &lt;Disk&gt; GPT| FAT|exFAT|JHFS+ NAME SIZE</span><br></pre></td></tr></table></figure>

<ul>
<li>SIZE: 0b 전체.</li>
</ul>
<h4 id="zeros"><a href="#zeros" class="headerlink" title="zeros"></a>zeros</h4><p>$ diskutil reformat &#x2F;dev&#x2F;rdisk3</p>
<h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>Ubuntu 등은 SD Card 슬롯에 삽입된 장치는 &#x2F;dev&#x2F;mmcblkX 같이 장치 이름을 붙인다. USB Stick 으로 SD Card 혹은 Micro SD Card를 사용하면 &#x2F;dev&#x2F;sdX 디스크 이름을 사용한다.</p>
<p><code>lsblk</code> 명령은 디바이스 장치가 마운트 된 곳을 출력해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ lsblk</span><br><span class="line">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda           8:0    0 119.2G  0 disk</span><br><span class="line">├─sda1        8:1    0  84.5G  0 part</span><br><span class="line">└─sda6        8:6    0  28.9G  0 part /</span><br><span class="line">mmcblk0     179:0    0   7.5G  0 disk</span><br><span class="line">├─mmcblk0p2 179:2    0   6.8G  0 part /media/qkboo/ROOT</span><br><span class="line">├─mmcblk0p3 179:3    0 486.1M  0 part</span><br><span class="line">└─mmcblk0p1 179:1    0   200M  0 part /media/qkboo/EFI</span><br></pre></td></tr></table></figure>

<p>파티션 및 포맷을 위해 마운트된 파티션을 언마운트 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo umount /dev/mmcblk0p2</span><br><span class="line">$ sudo umount /dev/mmcblk0p1</span><br></pre></td></tr></table></figure>

<p><code>parted</code> 유틸리티로 파티션을 삭제, 생성할 수 있다. 다음은 명령라인에서 옵션을 주어 사용하는 방법이다</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo parted /dev/mmcblk0 rm 1</span><br><span class="line">$ sudo parted /dev/mmcblk0 rm 2</span><br><span class="line">$ sudo parted /dev/sdc mkpart primary ext3 4MiB 100%</span><br></pre></td></tr></table></figure>

<p>결과로 <em>mmcblk0</em> 디스크 드라이브에 <strong>mmcblk0p1</strong> 파티션이 생성된다.</p>
<p>다음은 위와 같은 내용으로 fat32 파티션을 <code>parted</code> 를 Shell로 사용하는 예이다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo parted /dev/mmcblk0</span><br><span class="line">(parted) mklabel msdos</span><br><span class="line">(parted) mkpart primary fat32 1MiB 100%</span><br><span class="line">(parted) set 1 boot on</span><br><span class="line">(parted) quit</span><br></pre></td></tr></table></figure>

<p>마지막으로 파티션을 파일시스템으로 포맷해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mkfs -V -t vfat /dev/mmcblk0p1</span><br></pre></td></tr></table></figure>


<p>역시 <code>dd</code> 명령을 이용해 <code>/dev/zero</code>, <code>/dev/urandom</code> 을 디스크 전체에 써서 지울 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=/dev/zero of=/dev/diskX bs=4M</span><br></pre></td></tr></table></figure>



<h3 id="Disk-clone"><a href="#Disk-clone" class="headerlink" title="Disk clone"></a>Disk clone</h3><p>Linux, macOS 에서 파티션 도구, <code>dd</code> 를 사용해서 디스크 전체, 혹은 파티션을 이미지로 추출해 생성하는 과정을 정리했다.</p>
<h4 id="dd-이용하기"><a href="#dd-이용하기" class="headerlink" title="dd 이용하기"></a><code>dd</code> 이용하기</h4><p><code>dd</code> 로 디스크의 전체를 이미지 파일로 생성할 수 있다. 다만 디스크 전체 섹터를 추출하므로 디스크 용량과 같은 크기를 가진 이미지 파일이 생성된다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd bs=4M if=/dev/sdX of=image.gz conv=fsync</span><br></pre></td></tr></table></figure>


<h4 id="Ubuntu-gparted"><a href="#Ubuntu-gparted" class="headerlink" title="Ubuntu gparted"></a>Ubuntu <code>gparted</code></h4><p>우분투 Live CD에서 <code>gparted</code>는 가능한 사용하지 않는 공간은 빼고 최소 크기로 줄여 줄 수 있다.</p>
<h4 id="압축-이용하기"><a href="#압축-이용하기" class="headerlink" title="압축 이용하기"></a>압축 이용하기</h4><p>전체 디스크 크기의 이미지 파일이 너무 크면,  압축유틸리티를 이용해 저장할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dd bs=4M count=&lt;size_in_MBs&gt; if=/dev/sdX | gzip -c --fast| dd of=image.gz</span><br><span class="line">dd bs=4M count=&lt;size_in_MBs&gt; if=/dev/sdX | xz -c --fast| dd of=image.xz</span><br></pre></td></tr></table></figure>


<p>반대로 압축한 이미지 파일을 디스크로 복원하기 위해서 <code>unzip</code>, <code>gunzip</code>, <code>xz -d</code> 압축을 해제한 결과를 파이프로 <code>dd</code>로 전달한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dd if=/path/to/image.gz | gunzip -c | dd bs=1M of=/dev/sdY</span><br><span class="line">dd if=/path/to/image.xz | xzcat | dd bs=1M of=/dev/sdY</span><br></pre></td></tr></table></figure>


<h4 id="macOS의-Disk-Utility-이용"><a href="#macOS의-Disk-Utility-이용" class="headerlink" title="macOS의 Disk Utility 이용"></a>macOS의 Disk Utility 이용</h4><p>GUI인 Disk Utility에서 SD Card 디스크를 선택하고 macOS의 <em>.dmg</em> 이미지 파일로 저장할 수 있고, 저장시 압축 선택이 가능하다.</p>
<br>
### Disk Image를 SD Card에 쓰기

<p>각 OS에서 <code>dd</code> 같은 Disk clone 도구를 사용해서 디스크 이미지를 SD Card에 쓸 수 있다. </p>
<h4 id="Etcher"><a href="#Etcher" class="headerlink" title="Etcher"></a>Etcher</h4><p>모든 OS  플랫폼을 지원하는 <strong>Etcher</strong> 사용을 권장한다. <a target="_blank" rel="noopener" href="http://etcher.io/">Etcher</a> 을 다운받아 이미지 파일 선택해 대상 SD Card 에 GUI로 쓸 수 있다.</p>
<p><img src="/images/opensuse/etcher-image-writing.png">{:width&#x3D;”640”}</p>
<p><code>dd</code>를 사용한다면 이러지는 <strong>macOS</strong>, <strong>Linux</strong> 섹션을 참조한다.</p>
<h4 id="dd로-이미지-쓰기"><a href="#dd로-이미지-쓰기" class="headerlink" title="dd로 이미지 쓰기"></a><code>dd</code>로 이미지 쓰기</h4><p>디스크 내용을 <code>dd</code> 명령으로 디스크 이미지 형태로 저장할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dd if=opensuse_jeos-20171030.img of=/dev/mmcblk0 bs=4m</span><br></pre></td></tr></table></figure>

<p>압축 이미지로 제공하는 이미지 파일은 <code>zcat</code>, <code>xzcat</code>, <code>gzcat</code> 같은 표출 출력 유틸리티를 사용해, dd 명령에 파이프로 처리할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ xzcat openSUSE-Leap42.2-ARM-JeOS-raspberrypi3.aarch64.raw.xz | sudo dd of=/dev/rdisk1 bs=4m; sync</span><br></pre></td></tr></table></figure>


<p>이제 이미지 SD Card를 보드에 넣고 부팅한 후 시스템 설정을 시작하면 된다.</p>
<p>시스템 구성을 하고, 여러 설정을 한 후 백업, 복사 등을 위해, 설정한 OS 를 디스크 이미지로 복제하는 경우가 많아 이때는 <code>dd</code> 명령을 사용할 수 있다.</p>
<br>
### 이미지 파일 다루기

<p>백업한 디스크 이미지 파티션을 확인하고 폴더에 마운트해서 내용을 확인할 할 수 있다.</p>
<p>이미지 파일의 파티션 정보를 <code>fdisk</code>, <code>parted</code> 명령으로 확인할 수 있다.</p>
<h4 id="fdisk-이용"><a href="#fdisk-이용" class="headerlink" title="fdisk 이용"></a><code>fdisk</code> 이용</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ fdisk -lu opensuse-e20.img</span><br><span class="line">Disk opensuse-e20.img: 14.9 GiB, 16022241280 bytes, 31293440 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel <span class="built_in">type</span>: dos</span><br><span class="line">Disk identifier: 0xe0e3966b</span><br><span class="line"></span><br><span class="line">Device            Boot    Start      End  Sectors   Size Id Type</span><br><span class="line">opensuse-e20.img1          2048   411651   409604   200M  c W95 FAT32 (LBA)</span><br><span class="line">opensuse-e20.img2        413696 30282525 29868830  14.2G 83 Linux</span><br><span class="line">opensuse-e20.img3      30283776 31278554   994779 485.7M 82 Linux swap / Solaris</span><br></pre></td></tr></table></figure>

<h4 id="parted-이용"><a href="#parted-이용" class="headerlink" title="parted 이용"></a><code>parted</code> 이용</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ parted opensuse-42.3-homepi_16GB-firewalld.img</span><br><span class="line">GNU Parted 3.2</span><br><span class="line">Using opensuse-42.3-homepi_16GB-firewalld.img</span><br><span class="line">Welcome to GNU Parted! Type &#x27;help&#x27; to view a list of commands.</span><br><span class="line">(parted) p</span><br><span class="line">Model:  (file)</span><br><span class="line">Disk opensuse-42.3-homepi_16GB-firewalld.img: 16.0GB</span><br><span class="line">Sector size (logical/physical): 512B/512B</span><br><span class="line">Partition Table: msdos</span><br><span class="line">Disk Flags:</span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    Type     File system     Flags</span><br><span class="line"> 1      1049kB  211MB   210MB   primary  fat16           lba</span><br><span class="line"> 2      212MB   15.5GB  15.3GB  primary  ext4</span><br><span class="line"> 3      15.5GB  16.0GB  509MB   primary  linux-swap(v1)</span><br></pre></td></tr></table></figure>

<p>Byte 단위로 보려면</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(parted) unit</span><br><span class="line">Unit?  [compact]? B</span><br><span class="line">(parted) p</span><br><span class="line">Number  Start         End           Size          Type     File system     Flags</span><br><span class="line"> 1      1048576B      210765823B    209717248B    primary  fat16           lba</span><br><span class="line"> 2      211812352B    15504653311B  15292840960B  primary  ext4</span><br><span class="line"> 3      15505293312B  16014620159B  509326848B    primary  linux-swap(v1)</span><br></pre></td></tr></table></figure>


<h4 id="이미지-마운트"><a href="#이미지-마운트" class="headerlink" title="이미지 마운트"></a>이미지 마운트</h4><p>디스크 이미지는 리눅스에서 <code>mount</code> 명령으로 마운트 할 수 있다. mount 명령으로 실제 파티션이 시작하는 위치를 offset으로 지정해서 마운트 한다.</p>
<p>앞서 사용한 opensuse-42.3-homepi_16GB.img 이미지의 파티션 정보가 다음 같다고 하자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Number  Start         End           Size          Type     File system     Flags</span><br><span class="line"> 1      1048576B      210765823B    209717248B    primary  fat16           lba</span><br><span class="line"> 2      211812352B    15504653311B  15292840960B  primary  ext4</span><br><span class="line"> 3      15505293312B  16014620159B  509326848B    primary  linux-swap(v1)</span><br></pre></td></tr></table></figure>

<p>첫번째 파티션 시작 위치 <em>1048576B</em> 를 오프셋으로 삼아서 root 권한으로 <code>mount</code> 명령을 사용한다.</p>
<blockquote>
<p>섹터 정보를 Byte 단위로 변경하려면, 파티션 정보에서 1 sector 크기가 512 를 확인하고, 이미피 파일의 파티션 시작 섹터를 곱해서 offset 범위를 계산한다.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sector size * Start = (in the case) 512 * 8192 = 4194304 (Byte)</span><br></pre></td></tr></table></figure>

<p>이제 마운트 명령 <code>mount -o loop,ro,offset</code> 옵션을 주고, boot와 ROOT 파티션을 마운트 해보자,</p>
<p>Now we have the offsets and we can use those to mount the filesystems using the loopback device:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo mount -o loop,ro,offset=1048576 opensuse-42.3-homepi_16GB.img ~/mnt/boot/</span><br><span class="line">$ sudo mount -o loop,ro,offset=211812352 opensuse-42.3-homepi_16GB.img ~/mnt/ROOT/</span><br></pre></td></tr></table></figure>

<p>마운트가 성공하면 <code>df</code> 명령 혹은 <code>mount</code> 명령으로 마운트한 위치를 확인할 수 있다;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">udev            1.5G     0  1.5G   0% /dev</span><br><span class="line">tmpfs           300M  5.1M  295M   2% /run</span><br><span class="line">/dev/sda6        29G  7.3G   20G  28% /</span><br><span class="line">tmpfs           1.5G  188K  1.5G   1% /dev/shm</span><br><span class="line">tmpfs           5.0M  4.0K  5.0M   1% /run/lock</span><br><span class="line">tmpfs           1.5G     0  1.5G   0% /sys/fs/cgroup</span><br><span class="line">/dev/loop0      200M  4.4M  196M   3% /home/qkboo/mnt/boot</span><br><span class="line">/dev/loop1      200M  4.4M  196M   3% /home/qkboo/mnt/ROOT</span><br></pre></td></tr></table></figure>

<p><em>&#x2F;dev&#x2F;loop0</em> 파일 시스템이 지정한 마운트 위치에 마운트했다는 것을 알 수 있다.</p>
<p>또한 <code>-t [fs_type]</code> 옵션으로 파티션의 파일 시스템을 명시할 수 있다.</p>
<h4 id="이미지에서-한-파티션만-마운트-하기"><a href="#이미지에서-한-파티션만-마운트-하기" class="headerlink" title="이미지에서 한 파티션만 마운트 하기"></a>이미지에서 한 파티션만 마운트 하기</h4><p>이미지에 있는 하나의 파티션만 마운트 할 수 있다. [^3]</p>
<p>앞의 이미지 파일 정보를 <code>/dev/loop0</code> 에 offset을 주고</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo losetup -o 4194304 /dev/loop0 sda.img</span><br></pre></td></tr></table></figure>

<p>Now the partition resides on &#x2F;dev&#x2F;loop0. You can fsck it, mount it etc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo fsck -fv /dev/loop0</span><br><span class="line">sudo mount /dev/loop0 /mnt</span><br></pre></td></tr></table></figure>

<p>Unmount</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt</span><br><span class="line">sudo losetup -d /dev/loop0</span><br></pre></td></tr></table></figure>


<h4 id="Truncate"><a href="#Truncate" class="headerlink" title="Truncate"></a>Truncate</h4><p><a target="_blank" rel="noopener" href="https://raspberrypi.stackexchange.com/questions/7177/image-of-a-16gb-card-containing-unpartitioned-space-at-the-end-truncating-possi">질문, 원래 2GB 데비안 이미지를 16GB SD Card에 썼다. 나머지 14GB 공간을 별도로 파티션 나눌 수 있나?</a>  </p>
<p>먼저 이미지 파티션 정보를 얻는다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ fdisk -lu image.img</span><br><span class="line">Disk image.img: 4096 MB, 4096000000 bytes, 8000000 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk identifier: 0x000a1bc7</span><br><span class="line"></span><br><span class="line">      Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">image.img1              2048     5872026     5869978    b  W95 FAT32</span><br></pre></td></tr></table></figure>

<p>이미지 파티션의 끝 부분이 <em>5872026</em> 으로 <code>5872026 * 512 = 2,8Gb</code> 이고, 나머지는 안쓰는 공간이다.</p>
<p><code>truncate</code> 도구로 현재 파티션에서 빈공간을 잘라낸다. 다만 블럭 수가 0에서 시작하므로 섹터 수에 <em>1</em>을 더해준다.[^2]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ truncate --size=$[(5872026+1)*512] image.img</span><br></pre></td></tr></table></figure>


<h3 id="Repair-amp-Corruption"><a href="#Repair-amp-Corruption" class="headerlink" title="Repair &amp; Corruption"></a>Repair &amp; Corruption</h3><p>프롬프트에서 다음 명령으로 해당 파티션을 점검한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># fsck -fy /dev/mmcblk0p2</span><br><span class="line"># reboo</span><br></pre></td></tr></table></figure>

<p>혹은 다음 부팅시 처리할 수 있도록 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># touch /forcefsck</span><br><span class="line"># reboot</span><br></pre></td></tr></table></figure>


<h4 id="Check-Bad-sector"><a href="#Check-Bad-sector" class="headerlink" title="Check Bad sector"></a>Check Bad sector</h4><p>터미널에서 SD Card 삽입&#x2F;추출 및 점검시 섹터 에러를 확인하기 위해 <code>dmesg</code> 로 감시할 수 있다. 다음 명령은 dmesg 가 발생하면, 내용 중 마지막 15줄을 터미널로 출력해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ watch &quot;dmesg | tail -15&quot;</span><br></pre></td></tr></table></figure>


<h4 id="hdparam"><a href="#hdparam" class="headerlink" title="hdparam"></a><code>hdparam</code></h4><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/hdparm">hdparam</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo hdparm -t /dev/mmcblk0</span><br><span class="line"></span><br><span class="line">/dev/mmcblk0:</span><br><span class="line"> Timing buffered disk reads:  58 MB in  3.09 seconds =  18.80 MB/sec</span><br></pre></td></tr></table></figure>


<h4 id="badblocks"><a href="#badblocks" class="headerlink" title="badblocks"></a>badblocks</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo badblocks -n -v /dev/mmcblk0</span><br></pre></td></tr></table></figure>



<h4 id="Recovering"><a href="#Recovering" class="headerlink" title="Recovering"></a>Recovering</h4><p>GNU ddrescue is a data recovery tool. It copies data from one file or block device (hard disc, cdrom, etc) to another, trying to rescue the good parts first in case of read errors.</p>
<p><a target="_blank" rel="noopener" href="https://www.gnu.org/software/ddrescue/">https://www.gnu.org/software/ddrescue/</a></p>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><p>[^2]: <a target="_blank" rel="noopener" href="https://raspberrypi.stackexchange.com/questions/7177/image-of-a-16gb-card-containing-unpartitioned-space-at-the-end-truncating-possi">Truncate free space at disk image</a></p>
<p>[^3]: <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/69363/mount-single-partition-from-image-of-entire-disk-device">Mount single partition from image of entire disk(device)</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2016-02-10T00:10:00.000Z" title="2016-2-10 9:10:00">2016-02-10</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:15:34.954Z" title="2022-2-25 1:15:34">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a></span><span class="level-item">6분안에 읽기 (약 959 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/02/10/linux-2016-02-10-linux-x-forwarding/">Linux - X Forwarding</a></h1><div class="content"><p>SBC 보드 (raspberry pi, odroid c2 등)를 Terminal 기반으로 사용하려고 할 때 GUI에서 Programming을 확인해야 할 경우 X11, VNC 등을 이용할 수 있다. 여기서는 X Forwarding 기법을 정리하고 있다.</p>
<p>[^1]: Single Board Computer</p>
<h2 id="X11-Forwarding"><a href="#X11-Forwarding" class="headerlink" title="X11 Forwarding"></a>X11 Forwarding</h2><p><strong>X11</strong>은 유닉스&#x2F;리눅스의 전통적 데스크탑 프로토콜로 GUI 데스크탑 환경을 X11 Protocol을 사용해서 로컬 혹은 원격지 컴퓨터에서 이용할 수 있게 설계되어 있다.</p>
<h3 id="X-Windows-X-ming"><a href="#X-Windows-X-ming" class="headerlink" title="X Windows: X ming"></a>X Windows: X ming</h3><p>윈도우즈에서 <a target="_blank" rel="noopener" href="http://www.straightrunning.com/XmingNotes/pixming.php">X ming</a> 환경을 구축하면 X window system을 사용할 수 있다.</p>
<h3 id="X-client-MobaXterm"><a href="#X-client-MobaXterm" class="headerlink" title="X client: MobaXterm"></a>X client: MobaXterm</h3><p>윈도우 플랫폼은 다양한 X window 제품들이 있다. 최근 재미있게 사용해본 것으로 <a href="mobaxterm.mobatek.net">MobaXterm</a>이 있는데, 이 제품은 유료 제품으로 Trial 을 제공하고 있다. 특징적으로  Xserver와 SSH client를 내장하고 있어서 손쉽게 리눅스 제품과 연결해 사용할 수 있다.</p>
<p><img src="http://mobaxterm.mobatek.net/img/slider/RDP.png" alt="MobaXterm 이미지"></p>
<figcaption>[그림. MobaXterm 이미지]</figcaption>

<p>ssh를 이용해 X server에 접속하는 것 만으로도 X client 동작을 수행하고, 탭으로 구분한 ssh client 관리가 장점이며, sftp 를 이용해 서버측 파일을 브라우징 할 수 있는 장점이 있다.</p>
<ul>
<li>단, 기업용은 유료이므로 주의가 필요하다.</li>
</ul>
<br>
### macOS/Linux 데스크탑

<p>X Window를 지원하는 리눅스 데스크탑 혹은 맥오에스에서 <code>ssh</code>로 X11 Forwarding 사용할 수 있다.</p>
<p><img src="/images/linux/rpi-ssh-tunnel.png" alt="SSH와 X11 Tunnel 구조"></p>
<figcaption>[그림. SSH와 X11 Tunnel 구조]</figcaption>

<p>X forwarding을 활성화 해서 ssh를 연결하려면 <code>ssh -X</code> 옵션을 추가해서 접속한다. </p>
<h4 id="Mac에서-X11설정"><a href="#Mac에서-X11설정" class="headerlink" title="Mac에서 X11설정"></a>Mac에서 X11설정</h4><p><strong>Mac OS X</strong>는 OX X 10.5 이후 부터 X11을 포함하고 있지 않는다. Apple은 OS X의 X11을 더 개발하고 지원하기 위한 조직적인 노력으로 <strong>XQuartz 프로젝트</strong>를 만들었습니다. </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://support.apple.com/ko-kr/HT201341">https://support.apple.com/ko-kr/HT201341</a></li>
<li><a target="_blank" rel="noopener" href="http://xquartz.macosforge.org/">http://xquartz.macosforge.org</a></li>
</ul>
<p>XQuartz 를 설치해서 지원을 받아야 한다. xquartz 사이트에서 다운받아 설치한다.</p>
<p><img src="/images/linux/mac-xquartz-download.png" alt="macOS X: Download Xquartz"></p>
<figcaption>[그림. macOS X: Download Xquartz]</figcaption>


<p>설치후 맥에서 로그아웃후 로그인 하면 X11 관련 설정과 응용프로그램을 XQuartz 기반으로 사용할 수 있다.</p>
<h4 id="X11-Forwarding-설정"><a href="#X11-Forwarding-설정" class="headerlink" title="X11 Forwarding 설정"></a>X11 Forwarding 설정</h4><p>맥에서는 <code>sshd</code> 설정이 <em>&#x2F;private&#x2F;etc&#x2F;ssh&#x2F;sshd_config</em> 파일에 있다. 여기에 X11 client 요청을 허용하도록 <em>X11Forwarding</em>을 허용해야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@mac~$ sudo vi /private/etc/sshd_config</span><br></pre></td></tr></table></figure>

<p>내용중에서 <strong>X11Forwarding</strong>를 찾아 다음 같이 허용으로 저장한다</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X11Forwarding yes</span><br></pre></td></tr></table></figure>

<p>마지막으로 Mac에서 외부에서 요청한 X11 연결을 허용해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user@mac~$ xhost +</span><br><span class="line">access control disabled, clients can connect from any host</span><br></pre></td></tr></table></figure>


<h4 id="X11-이용"><a href="#X11-이용" class="headerlink" title="X11 이용"></a>X11 이용</h4><p>이제 리눅스&#x2F;맥 클라이언트에서 원격 서버에 -X 옵션을 이용해서 로그인 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user@mac~$ ssh -X pi@192.168.1.10</span><br></pre></td></tr></table></figure>


<p>이제 원격지에서 X11 응용 프로그램을 실행해 보겠습니다. 다음은 X11 terminal 프로그램을 실행하면 Mac의 화면에 X11 terminal이 실행됩니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pi@raspberrypi ~ $ netsurf-gtk</span><br><span class="line">   OR</span><br><span class="line">pi@raspberrypi ~ $ lxterminal</span><br></pre></td></tr></table></figure>

<p>라즈베리파이의 xterminal 프로그램이 Mac 실행됩니다.</p>
<p><img src="/images/linux/ssh-x11-pi-xterm.png" alt="Ssh와 X Forwarding"></p>
<figcaption>[그림. Ssh와 X Forwarding]</figcaption>


<p>만약 다음 에러를 만나면 접속을 종료하고 Mac의 xhost 접속 허용을 다시 해주어야 한다. </p>
<blockquote>
<p>(lxterminal:20700): Gtk-WARNING **: cannot open display: localhost:10.0</p>
</blockquote>
<p>혹은 원격 서버에 로그인 없이 직접 실행할 수 있습니다</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user@mac~$ ssh -X -f pi@192.168.1.205 lxterminal</span><br><span class="line">pi@192.168.1.205&#x27;s password:</span><br></pre></td></tr></table></figure>


<h4 id="기타-X11-App"><a href="#기타-X11-App" class="headerlink" title="기타 X11 App"></a>기타 X11 App</h4><p>xterminal 이외의 X11 앱을 사용하려면 다음 패키지를 설치해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ $ sudo apt install libnss3</span><br><span class="line">~ $ sudo apt install x11-apps</span><br></pre></td></tr></table></figure>

</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/5/">이전</a></div><div class="pagination-next is-invisible is-hidden-mobile"><a href="/page/7/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/5/">5</a></li><li><a class="pagination-link is-current" href="/page/6/">6</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/qkboo_400.png" alt="Gangtai"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Gangtai</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Paju, South Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">56</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">15</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">103</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/thinkbee" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/gtko"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">링크</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.thinkbee.kr" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Thinkbee.kr</span></span><span class="level-right"><span class="level-item tag">www.thinkbee.kr</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">업데이트 소식 받기</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI/"><span class="level-start"><span class="level-item">AI</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">25</span></span></a><ul><li><a class="level is-mobile" href="/categories/Linux/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/NodeJS/"><span class="level-start"><span class="level-item">NodeJS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/NodeJS/"><span class="level-start"><span class="level-item">NodeJS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/NodeJS/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Photoshop/"><span class="level-start"><span class="level-item">Photoshop</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Angular/"><span class="level-start"><span class="level-item">Angular</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Angularjs/"><span class="level-start"><span class="level-item">Angularjs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Raspberry-Pi/"><span class="level-start"><span class="level-item">Raspberry Pi</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/Raspberry-Pi/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/Raspberry-Pi/Linux/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/jekyll/"><span class="level-start"><span class="level-item">jekyll</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-24T20:50:12.225Z">2022-02-25</time></p><p class="title"><a href="/2022/02/25/hello-world/">blog.thinkbee.kr 이전 작업중입니다.</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-06T00:00:00.000Z">2020-03-06</time></p><p class="title"><a href="/2020/03/06/jekyll-2020-03-06-jekyll-mmtheme-macos/">macOS에서 Jekyll 설치와 Minimalmistake Theme</a></p><p class="categories"><a href="/categories/jekyll/">jekyll</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-02T09:00:00.000Z">2020-02-02</time></p><p class="title"><a href="/2020/02/02/linux-2020-02-02-letsencrypt%EB%B0%9C%EA%B8%89/">HTTPS를 위한 공인인증서 - Let&#039;s Encrypt 발급</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-20T03:00:00.000Z">2019-12-20</time></p><p class="title"><a href="/2019/12/20/linux-2019-12-20-mongodb-config/">MongoDB 구성 설정과 사용자 인증 사용</a></p><p class="categories"><a href="/categories/Linux/">Linux</a> / <a href="/categories/Linux/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-20T01:00:00.000Z">2019-12-20</time></p><p class="title"><a href="/2019/12/20/linux-2019-12-20-mongodb-4-2-install-arm64/">MongoDB Community Edition 4.2 설치 - ARM64 Ubuntu/Debian Armbian</a></p><p class="categories"><a href="/categories/Linux/">Linux</a> / <a href="/categories/Linux/Database/">Database</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">2월 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">3월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">2월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">12월 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">9월 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">10월 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">8월 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">7월 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">6월 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">12월 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/11/"><span class="level-start"><span class="level-item">11월 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">10월 2017</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">9월 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/07/"><span class="level-start"><span class="level-item">7월 2017</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">6월 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">5월 2017</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/04/"><span class="level-start"><span class="level-item">4월 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">12월 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/02/"><span class="level-start"><span class="level-item">2월 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ARM/"><span class="tag">ARM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Armbian/"><span class="tag">Armbian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Artificial-Intelligence/"><span class="tag">Artificial Intelligence</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debian/"><span class="tag">Debian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debian-Strech/"><span class="tag">Debian Strech</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JSON-Web-Token/"><span class="tag">JSON Web Token</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JWT-Toekn/"><span class="tag">JWT Toekn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEAP-15-0/"><span class="tag">LEAP 15.0</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEAP-42-3/"><span class="tag">LEAP 42.3</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odroid/"><span class="tag">Odroid</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odroid-C2/"><span class="tag">Odroid C2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Orange-Pi/"><span class="tag">Orange Pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspberry-Pi/"><span class="tag">Raspberry Pi</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspberry-Pi-3/"><span class="tag">Raspberry Pi 3</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspbian/"><span class="tag">Raspbian</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SD-Card/"><span class="tag">SD Card</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scientific/"><span class="tag">Scientific</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TensorFlow/"><span class="tag">TensorFlow</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript-Tutorials/"><span class="tag">TypeScript Tutorials</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ubuntu/"><span class="tag">Ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/X11/"><span class="tag">X11</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/amd64/"><span class="tag">amd64</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/angular4/"><span class="tag">angular4</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/angularjs/"><span class="tag">angularjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apache/"><span class="tag">apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/arm64/"><span class="tag">arm64</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/armbian/"><span class="tag">armbian</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/banana-pi/"><span class="tag">banana pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bootstrap-4/"><span class="tag">bootstrap 4</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/brew/"><span class="tag">brew</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/certificate-ssl/"><span class="tag">certificate ssl</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clipping-mask/"><span class="tag">clipping-mask</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collages/"><span class="tag">collages</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cross-compiler/"><span class="tag">cross compiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debian/"><span class="tag">debian</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firewall/"><span class="tag">firewall</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firewalld/"><span class="tag">firewalld</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/https/"><span class="tag">https</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/install/"><span class="tag">install</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jasmine/"><span class="tag">jasmine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jekyll/"><span class="tag">jekyll</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter/"><span class="tag">jupyter</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter-notebook/"><span class="tag">jupyter notebook</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter-notebook/"><span class="tag">jupyter-notebook</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/karma/"><span class="tag">karma</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leap-15/"><span class="tag">leap 15</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leap-42-3/"><span class="tag">leap 42.3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lvm/"><span class="tag">lvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lvm2/"><span class="tag">lvm2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macos/"><span class="tag">macos</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markdown/"><span class="tag">markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/micro-SD-Card/"><span class="tag">micro SD Card</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/middleware/"><span class="tag">middleware</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongodb/"><span class="tag">mongodb</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongoose/"><span class="tag">mongoose</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs-tutorials/"><span class="tag">nodejs tutorials</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nvm/"><span class="tag">nvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid/"><span class="tag">odroid</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid-c2/"><span class="tag">odroid c2</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid-c2/"><span class="tag">odroid-c2</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openSUSE/"><span class="tag">openSUSE</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensuse/"><span class="tag">opensuse</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensuse-leap-15/"><span class="tag">opensuse leap 15</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/orange-pi/"><span class="tag">orange pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/photoshop/"><span class="tag">photoshop</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/raspberry-pi/"><span class="tag">raspberry pi</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/security/"><span class="tag">security</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssl/"><span class="tag">ssl</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/synergy/"><span class="tag">synergy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tmux/"><span class="tag">tmux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ubuntu/"><span class="tag">ubuntu</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unit-testing/"><span class="tag">unit testing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/virtualenv/"><span class="tag">virtualenv</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/virtualenvwrapper/"><span class="tag">virtualenvwrapper</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webdav/"><span class="tag">webdav</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%8D%B0%EB%B9%84%EC%95%88/"><span class="tag">데비안</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%8D%B0%EC%9D%B4%EC%95%88/"><span class="tag">데이안</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%9D%BC%EC%A6%88%EB%B2%A0%EB%A6%AC%ED%8C%8C%EC%9D%B4/"><span class="tag">라즈베리파이</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%9D%BC%EC%A6%88%EB%B9%84%EC%95%88/"><span class="tag">라즈비안</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A6%AC%EB%88%85%EC%8A%A4/"><span class="tag">리눅스</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A7%88%ED%81%AC%EB%8B%A4%EC%9A%B4/"><span class="tag">마크다운</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A7%A5%EC%98%A4%EC%97%90%EC%8A%A4/"><span class="tag">맥오에스</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%94%EB%82%98%EB%82%98%ED%8C%8C%EC%9D%B4/"><span class="tag">바나나파이</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%A9%ED%99%94%EB%B2%BD/"><span class="tag">방화벽</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%98%A4%EB%A0%8C%EC%A7%80%ED%8C%8C%EC%9D%B4/"><span class="tag">오렌지파이</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9A%B0%EB%B6%84%ED%88%AC/"><span class="tag">우분투</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9B%B9%ED%86%A0%ED%81%B0/"><span class="tag">웹토큰</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9D%B8%EA%B3%B5%EC%A7%80%EB%8A%A5/"><span class="tag">인공지능</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%A0%84%EC%9B%90%EA%B4%80%EB%A6%AC/"><span class="tag">전원관리</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%8C%8C%EC%9D%B4%EC%8D%AC/"><span class="tag">파이썬</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%8C%8C%EC%9D%B4%EC%96%B4%EC%9B%94/"><span class="tag">파이어월</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1465716454138955" data-ad-slot="4883770640" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/thinkbee_logo.png" alt="Blogging through Programming" height="28"></a><p class="is-size-7"><span>&copy; 2022 Gangtai</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>