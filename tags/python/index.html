<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>태그: python - Blogging through Programming</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="thinkbee blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="thinkbee blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="website"><meta property="og:title" content="Blogging through Programming"><meta property="og:url" content="https://blog.thinkbee.kr/"><meta property="og:site_name" content="Blogging through Programming"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://blog.thinkbee.kr/img/og_image.png"><meta property="article:author" content="Gangtai"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.thinkbee.kr"},"headline":"Blogging through Programming","image":["https://blog.thinkbee.kr/img/og_image.png"],"author":{"@type":"Person","name":"Gangtai"},"publisher":{"@type":"Organization","name":"Blogging through Programming","logo":{"@type":"ImageObject","url":"https://blog.thinkbee.kr/images/thinkbee_logo.png"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-1465716454138955" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 6.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/thinkbee_logo.png" alt="Blogging through Programming" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">태그</a></li><li class="is-active"><a href="#" aria-current="page">python</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-09-05T11:00:00.000Z" title="2019-9-5 20:00:00">2019-09-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:35:47.742Z" title="2022-2-25 6:35:47">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a><span> / </span><a class="link-muted" href="/categories/Linux/Programming/">Programming</a></span><span class="level-item">20분안에 읽기 (약 3014 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2019/09/05/python-2019-09-05-OpenSuse-JupyterNotebook-scientific/">openSUSE - 과학계산을 위한 Python, Jupyter Notebook</a></h1><div class="content"><p>이 글은 OpenSuse LEAP 15 에서 과학계산을 위한 파이썬 환경을 위한 Jupyter Notebook을 설치하는 과정을 요약하고 있다.</p>
<p>이 글에서는 시스템 패키지로 Python3, jupyter-notebook 을 설치하고, 파이썬 가상환경에서 과학계산 파이썬 모듈을 설치한 후에 Jupyter notebook 을 운영하도록 한다.</p>
<p><strong>과학계산을 위한 <em>Python Jupyter</em> 환경</strong></p>
<p>아래 같은 플랫폼에서 시스템 패키지 소프트웨어와 파이썬 모듈을 설치하는 과정이다.</p>
<ul>
<li>Raspberry Pi 3</li>
<li>openSUSE LEAP 42.3, 15.0, 15.1</li>
<li>Jupyter Notebook</li>
<li>Python 그래프 matplotlib 및 pillow 이미지 라이브러리</li>
<li>과학계산 모듈: numpy, scipy 등</li>
<li>파이썬 가상환경<ul>
<li>pandas</li>
</ul>
</li>
</ul>
<p>Python과 Virtualenv 환경을 더 알고 싶으면 다음 두 링크에 자세한 설명이 있다.</p>
<ul>
<li><a href="!--swig%EF%BF%BC31--">Python - Install virtualenv on Linux</a></li>
</ul>
<br>

<h2 id="설치"><a href="#설치" class="headerlink" title="설치"></a>설치</h2><p>시스템에 Python2, Python3 가 설치되었는지 확인:</p>
<h4 id="Python-환경"><a href="#Python-환경" class="headerlink" title="Python 환경"></a>Python 환경</h4><p>openSUSE 15.0에서 파이썬은 python2, python3.6 시스템 패키지로 설치되어 있다.</p>
<p>pip를 설치해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> python3-pip</span><br></pre></td></tr></table></figure>

<p>pip 를 여러 버전 사용중이라면,</p>
<blockquote>
<p>만약 python2-pip 도 사용중이고 pip를 pip3로 사용하려면 <code>update-alternatives</code> 를 이용해 <code>pip</code> 를 pip3 로 연결해 준다. 다른 배포본에서 필요시 update-alternatives 사용:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/pip pip /usr/bin/pip3 30</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="시스템-개발-패키지-설치"><a href="#시스템-개발-패키지-설치" class="headerlink" title="시스템 개발 패키지 설치"></a>시스템 개발 패키지 설치</h4><p>컴파일에 필요한 헤더 등이 포함된 개발자 라이브러리를 설치한다. <code>pattern devel</code> 로 검색해 보면,,,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper install -t pattern devel</span><br><span class="line"></span><br><span class="line">S | Name                 | Summary                             | Type</span><br><span class="line">--+----------------------+-------------------------------------+--------</span><br><span class="line">  | devel_C_C++          | C/C++ Development                   | pattern</span><br><span class="line">i | devel_basis          | Base Development                    | pattern</span><br><span class="line">  | devel_gnome          | GNOME Development                   | pattern</span><br><span class="line">  | devel_ide            | Integrated Development Environments | pattern</span><br><span class="line">  | devel_java           | Java Development                    | pattern</span><br><span class="line">  | devel_kde            | KDE Development                     | pattern</span><br><span class="line">  | devel_kde_frameworks | KDE Frameworks Development          | pattern</span><br><span class="line">  | devel_kernel         | Linux Kernel Development            | pattern</span><br><span class="line">  | devel_mono           | .NET Development                    | pattern</span><br><span class="line">  | devel_perl           | Perl Development                    | pattern</span><br><span class="line">  | devel_python         | Python Development                  | pattern</span><br><span class="line">  | devel_python3        | Python 3 Development                | pattern</span><br><span class="line">  | devel_qt4            | Qt 4 Development                    | pattern</span><br><span class="line">  | devel_qt5            | Qt 5 Development                    | pattern</span><br><span class="line">  | devel_rpm_build      | RPM Build Environment               | pattern</span><br><span class="line">  | devel_ruby           | Ruby Development                    | pattern</span><br><span class="line">  | devel_tcl            | Tcl/Tk Development                  | pattern</span><br><span class="line">  | devel_web            | Web Development                     | pattern</span><br><span class="line">  | devel_yast           | YaST Development                    | pattern</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>이 중에서 devel_basis, python 관련 개발용 모듈을 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper install -t pattern devel_basis</span><br></pre></td></tr></table></figure>

<p>파이썬 개발 모듈을 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper install -t pattern devel_python devel_python3</span><br><span class="line">sudo zypper install python-distutils-extra</span><br></pre></td></tr></table></figure>

<p>curses 관련 파이썬 모듈을 설치해야 한다.</p>
<ul>
<li>python-curses: Python이 (N)Curses Libr에 대한 인터페이스이다</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper in python-curses python3-curses</span><br></pre></td></tr></table></figure>

<h4 id="matplotlib"><a href="#matplotlib" class="headerlink" title="matplotlib"></a>matplotlib</h4><p>matplot 을 설치하면 numpy, scipy, pillow python3-tk 등이 함께 설치된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper in python-matplotlib python3-matplotlib</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">다음 새 패키지가 설치됩니다.</span><br><span class="line">  cups cups-client cups-filters ghostscript ghostscript-x11 libICE6 libSM6 libXt6 libavahi-glib1</span><br><span class="line">  libcupscgi1 libcupsimage2 libcupsmime1 libcupsppdc1 libopenjp2-7 libpoppler73 libqhull7-7_2_0 libqpdf21</span><br><span class="line">  libwebp6 libwebpdemux2 libwebpmux2 libxml2-tools parallel-printer-support poppler-data poppler-tools</span><br><span class="line">  python-functools32 python-subprocess32 python-tk python2-Cycler python2-Pillow python2-matplotlib</span><br><span class="line">  python2-matplotlib-tk python2-numpy python2-olefile python2-pyparsing python2-python-dateutil</span><br><span class="line">  python2-pytz python2-six python3-Cycler python3-Pillow python3-matplotlib python3-matplotlib-tk</span><br><span class="line">  python3-olefile python3-tk</span><br><span class="line"></span><br><span class="line">다음 권장 패키지가 자동으로 선택되었습니다.</span><br><span class="line">  cups-filters ghostscript ghostscript-x11 libxml2-tools poppler-data poppler-tools python2-Pillow</span><br><span class="line">  python2-matplotlib-tk python3-Pi</span><br></pre></td></tr></table></figure>

<p>numpy 개발자 패키지를 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper in python2-numpy-devel python3-numpy-devel</span><br></pre></td></tr></table></figure>

<br>

<h2 id="Jupyter-Notebook"><a href="#Jupyter-Notebook" class="headerlink" title="Jupyter Notebook"></a>Jupyter Notebook</h2><p>Jupyter는 웹 브라우저를 통해서 IDE 환경을 제공하고, 다양한 언어&#x2F;문법을 지원하는 Kernel 이라는 해석기를 통해 IDE에서 코딩한 결과를 확인할 수 있다.</p>
<p>여기서는 가상환경을 구성해 Jupyter 관련 패키지를 설치하고 사용하겠다.</p>
<ul>
<li>시스템에 설치된 Python3 와 pip 모듈</li>
<li>가상환경으로 venv 사용</li>
</ul>
<h3 id="설치-1"><a href="#설치-1" class="headerlink" title="설치"></a>설치</h3><p>Zeromq-devel 설치한다.</p>
<ul>
<li>libczmq5은 쥬피터 노트북에서 필요로 한다.</li>
<li>LEAP 14는 libzmq3 다.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper install zeromq-devel libzmq5</span><br></pre></td></tr></table></figure>

<p>jupyter notebook 을 시스템 패키지로 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper in python3-jupyter_notebook</span><br><span class="line">...</span><br><span class="line">다음 새 패키지가 설치됩니다.</span><br><span class="line">  ethtool libcmark0_28_3 libgfortran4 libibverbs libibverbs1 liblua5_1-5 libmlx4-1 libmlx5-1 libnuma1</span><br><span class="line">  libopenblas_openmp0 librdmacm1 libucm0 libucp0 libucs0 libuct0 libxslt1 mpi-selector openmpi</span><br><span class="line">  openmpi-config openmpi-libs pandoc python-sip-common python3-Automat python3-Babel python3-Genshi</span><br><span class="line">  python3-Jinja2 python3-MarkupSafe python3-PyNaCl python3-Pygments python3-Send2Trash python3-Twisted</span><br><span class="line">  python3-asn1crypto python3-attrs python3-backcall python3-bcrypt python3-bleach python3-certifi</span><br><span class="line">  python3-cffi python3-constantly python3-cryptography python3-cssselect python3-defusedxml</span><br><span class="line">  python3-entrypoints python3-gevent python3-greenlet python3-html5lib python3-hyperlink python3-idna</span><br><span class="line">  python3-incremental python3-ipython_genutils python3-jedi python3-jsonschema python3-jupyter_client</span><br><span class="line">  python3-jupyter_core python3-jupyter_ipykernel python3-jupyter_ipyparallel python3-jupyter_ipython</span><br><span class="line">  python3-jupyter_ipywidgets python3-jupyter_nbconvert python3-jupyter_nbformat python3-jupyter_notebook</span><br><span class="line">  python3-jupyter_qtconsole python3-jupyter_widgetsnbextension python3-lxml python3-mistune python3-mpi4py</span><br><span class="line">  python3-numpy python3-pandocfilters python3-paramiko python3-parso python3-pexpect python3-pickleshare</span><br><span class="line">  python3-prometheus_client python3-prompt_toolkit python3-psutil python3-ptyprocess python3-py</span><br><span class="line">  python3-pyOpenSSL python3-pyasn1 python3-pyasn1-modules python3-pycparser python3-pycrypto</span><br><span class="line">  python3-pycurl python3-pymongo python3-pyserial python3-python-dateutil python3-pytz python3-pyzmq</span><br><span class="line">  python3-service_identity python3-simplegeneric python3-simplejson python3-sip python3-terminado</span><br><span class="line">  python3-testpath python3-tornado python3-traitlets python3-wcwidth python3-webencodings</span><br><span class="line">  python3-zope.interface rdma-core</span><br><span class="line"></span><br><span class="line">다음 권장 패키지가 자동으로 선택되었습니다.</span><br><span class="line">  ethtool openmpi-config pandoc python3-Genshi python3-Pygments python3-Twisted python3-cffi</span><br><span class="line">  python3-gevent python3-jupyter_client python3-jupyter_ipykernel python3-jupyter_ipyparallel</span><br><span class="line">  python3-jupyter_ipython python3-jupyter_ipywidgets python3-jupyter_nbconvert python3-jupyter_nbformat</span><br><span class="line">  python3-jupyter_notebook python3-jupyter_qtconsole python3-lxml python3-mpi4py python3-numpy</span><br><span class="line">  python3-paramiko python3-pexpect python3-psutil python3-py python3-pycurl python3-pymongo</span><br><span class="line">  python3-service_identity python3-simplejson python3-tornado</span><br><span class="line"></span><br><span class="line">다음 패키지가 제안되지만 설치되지 않습니다.</span><br><span class="line">  python3-jupyter_notebook-latex</span><br></pre></td></tr></table></figure>

<br>

<h3 id="가상환경-구성"><a href="#가상환경-구성" class="headerlink" title="가상환경 구성"></a>가상환경 구성</h3><p>jupyter notebook 을 실행하고 사용할 파이썬 과학계산 모듈을 위한 가상환경을 구성한다.</p>
<p>시스템 <code>pip</code> 모듈을 최신 버전으로 업그레이드한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<p>가상환경은 사용자 홈디렉토리의 <em>.venv</em> 폴더로 가정한다. <em>python3</em>, 파이썬 시스템 라이브러리를 함께 사용을 위해 <em>–system-site-packages</em> 옵션과 함께 <em>jupyterscfy</em>라는 가상환경을 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~&gt; python3 -m venv --system-site-packages .venv/jupyterscfy</span><br><span class="line">~&gt; <span class="built_in">source</span> .venv/jupyterscfy/bin/activate</span><br><span class="line">(jupyterscfy) ~&gt;</span><br><span class="line">(jupyterscfy) ~&gt; python --version</span><br><span class="line">Python 3.6</span><br></pre></td></tr></table></figure>

<p>가상환경의 pip 모듈을 최신버전으로 유지한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyterscfy) ~&gt; pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<br>

<h3 id="실행"><a href="#실행" class="headerlink" title="실행"></a>실행</h3><p><code>jupyter-notebook</code>을 실행해 보고, 서버 관련 구성 내용을 설정해서 사용해 보자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(jupyterscfy) ~&gt; jupyter notebook</span><br><span class="line">[I 01:15:02.799 NotebookApp] Writing notebook server cookie secret to /run/user/1000/jupyter/notebook_cookie_secret</span><br><span class="line">[I 01:15:21.630 NotebookApp] Loading IPython parallel extension</span><br><span class="line">[I 01:15:21.646 NotebookApp] Serving notebooks from <span class="built_in">local</span> directory: /home/qkboo</span><br><span class="line">[I 01:15:21.646 NotebookApp] The Jupyter Notebook is running at:</span><br><span class="line">[I 01:15:21.647 NotebookApp] http://localhost:8888/?token=689ae860106f8a7274b50f68f69895420eab19064ebb8e69</span><br><span class="line">[I 01:15:21.648 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[W 01:15:21.708 NotebookApp] No web browser found: could not locate runnable browser.</span><br><span class="line">[C 01:15:21.710 NotebookApp]</span><br><span class="line"></span><br><span class="line">    To access the notebook, open this file <span class="keyword">in</span> a browser:</span><br><span class="line">        file:///run/user/1000/jupyter/nbserver-8251-open.html</span><br><span class="line">    Or copy and <span class="built_in">paste</span> one of these URLs:</span><br><span class="line">        http://localhost:8888/?token=689ae860106f8a7274b50f68f69895420eab19064ebb8e69</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>jupyter notebook 을 종료하려면 Ctrl+C 로 인터럽트를 걸어준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">^C[I 01:16:41.847 NotebookApp] interrupted</span><br><span class="line">Serving notebooks from <span class="built_in">local</span> directory: /home/qkboo</span><br><span class="line">0 active kernels</span><br><span class="line">The Jupyter Notebook is running at:</span><br><span class="line">http://localhost:8888/?token=689ae860106f8a7274b50f68f69895420eab19064ebb8e69</span><br><span class="line">Shutdown this notebook server (y/[n])? y</span><br><span class="line">[C 01:16:44.757 NotebookApp] Shutdown confirmed</span><br><span class="line">[I 01:16:44.760 NotebookApp] Shutting down 0 kernels</span><br><span class="line">(jupyterscfy) ~&gt;</span><br></pre></td></tr></table></figure>

<br>

<h3 id="Scientific-packages"><a href="#Scientific-packages" class="headerlink" title="Scientific packages"></a>Scientific packages</h3><p>numpy<br>scipy<br>matplotlib<br>pillow</p>
<ul>
<li>matplotlib는 외부 이미지를 png 형식만 지원한다. jpeg를 사용하려면 pillow 모듈을 설치한다.</li>
</ul>
<p>pillow 여기까지 설치하면 의존성에 관련한 아래 같은 여러 패키지가 함께 설치된다.</p>
<ul>
<li>requests : Python package provides a graceful interface for making HTTP requests,</li>
<li>pil : provides Python imaging capabilities,</li>
<li>scrapy : is a web scraping framework,</li>
<li>geopy provides geocoding and geodesic distance functions,</li>
<li>shapely provides 2D geometry manipulation,</li>
<li>pyproj: provides cartographic transformations. In the second command, jupyter provides interactive coding notebooks,</li>
<li>geopandas spatializes pandas,</li>
<li>OSMnx lets you work with OpenStreetMap street networks.</li>
</ul>
<p>이 패키지들은 별도로 설치를 하고자 하면 <code>pip</code>로 설치하거나 시스템 패키지로 다음 같이 설치 할 수 있다.</p>
<p>Python2</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-requests python-pil python-scrapy python-geopy python-shapely python-pyproj</span><br></pre></td></tr></table></figure>

<p>Python3</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-requests python3-pil python3-scrapy python3-geopy python3-shapely python3-pyproj</span><br></pre></td></tr></table></figure>

<h4 id="symbolic-math"><a href="#symbolic-math" class="headerlink" title="symbolic math"></a>symbolic math</h4><p>symbolic mathematics 관련 패키지도 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper install python-sympy python-nose</span><br><span class="line">sudo zypper install python3-sympy python3-nose</span><br></pre></td></tr></table></figure>

<h4 id="Pandas-설치"><a href="#Pandas-설치" class="headerlink" title="Pandas 설치"></a>Pandas 설치</h4><p>pandas 설치시 여러 번들이 필요해서 시스템 패키지가 아닌 conda 혹은 pip 로 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ time pip install pandas</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">real 118m4.118s</span><br><span class="line">user 114m47.176s</span><br><span class="line">sys 1m27.483s</span><br></pre></td></tr></table></figure>

<blockquote>
<p>pandas를 pip로 설치시 Raspberry Pi 3의 OpenSuse 15.2 에서 실제 2시간 정도 걸린다.</p>
</blockquote>
<p>Pandas 로 지오 데이터 셋트를 다룰 예정이라면</p>
<h4 id="백업"><a href="#백업" class="headerlink" title="백업"></a>백업</h4><p>현재까지 설치된 pip 모듈 목록을 저장하자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~&gt; pip freeze --local &gt; jupyter-requirements.txt</span><br></pre></td></tr></table></figure>

<br>

<h2 id="서버로-실행"><a href="#서버로-실행" class="headerlink" title="서버로 실행"></a>서버로 실행</h2><p><code>jupyter-notebook</code> 은 로컬 머신에서 브라우저를 실행한다. 여기서는 원격 사용을 위해 다음 같이 시작할 수 있다. <code>[DIR]</code> 에 jupyter-notebook에서 작성한 노트북 파일이 저장된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~&gt; jupyter-notebook --no-browser --ip=* --port=8000 [DIR]</span><br><span class="line">[I 02:51:04.797 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 02:51:04.800 NotebookApp]</span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8585/?token=a747472bc9a7c6684829267d2ed0a4cd9a722e</span><br></pre></td></tr></table></figure>

<p>시작후 <code>?token=a.....</code> 부분의 토큰을 복사해 브라우저에 입력후 쥬피터 노트북 사용을 시작한다. 브라우저로 노트북에 접속해서 복사한 토큰을 입력한 후 로그인한다.</p>
<p><img src="/images/python/jupyter5-run.png">{:width&#x3D;”650”}</p>
<br>

<h3 id="Jupyter-설정-이용"><a href="#Jupyter-설정-이용" class="headerlink" title="Jupyter 설정 이용"></a>Jupyter 설정 이용</h3><p>jupyter는 설치된 후에 jupyter 시스템 디렉토리와 사용자 <strong>JUPYTER_DATA_DIR</strong>에 필요한 내용을 저장한다.</p>
<ul>
<li><strong>시스템 디렉토리</strong>: &#x2F;usr&#x2F;local&#x2F;share&#x2F;jupyter&#x2F;</li>
<li><strong>JUPYTER_DATA_DIR</strong> 는 보통 ~&#x2F;.jupyter</li>
</ul>
<p>설정 파일을 이용해서 사용자 비밀번호를 이용해 노트북을 사용할 수 있다.</p>
<p>먼저 실행중인 쥬피터 노트북에서 <code>passwd()</code> 를 실행해 <strong>패스워드 해시 값</strong>을 얻는다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> notebook.auth <span class="keyword">import</span> passwd</span><br><span class="line">In [<span class="number">2</span>]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">&#x27;sha1:67c9e60bb8b6:9ffede0825894254b2e043ea597d771089e11eed&#x27;</span></span><br></pre></td></tr></table></figure>

<p>패스워드 해시 값을 데이터 디렉토리의 설정 파일에 입력해야 한다.</p>
<h4 id="데이터-설정-파일"><a href="#데이터-설정-파일" class="headerlink" title="데이터 설정 파일"></a>데이터 설정 파일</h4><p>먼저 다음 같이 설정 파일을 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~&gt; jupyter notebook --generate-config</span><br><span class="line">Writing default config to: /home/foo/.jupyter/jupyter_notebook_config.py</span><br><span class="line">~&gt; <span class="built_in">cd</span> .jupyter &amp;&amp; <span class="built_in">mv</span> jupyter_notebook_config.py mynotebook.py</span><br></pre></td></tr></table></figure>

<p><em>mynotebook.py</em>에 다음을 설정한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#c.NotebookApp.notebook_dir = &#x27;/path/to/notebook_directory&#x27;</span><br><span class="line">c.NotebookApp.base_url = &#x27;http://www.yourdomain.com/notebok&#x27;</span><br><span class="line">c.NotebookApp.password = &#x27;&#x27;</span><br><span class="line">c.NotebookApp.port = 8000</span><br><span class="line">c.NotebookApp.port_retries = 50</span><br></pre></td></tr></table></figure>

<p>복사한 패스워드 해시 값을 mynotebook.py 설정 파일 안의 <code>c.NotebookApp.password</code> 항목 주석을 풀고 해시 값을 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.password = &#x27;sha1:4ee6bb2da3d7:ed76216b87228540e5f5f20fcfa8069cf82686f0&#x27;</span><br></pre></td></tr></table></figure>

<p>설정 파일을 이용해 jupyter-notebook을 실행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~&gt; jupyter-notebook --config .jupyter/mybook_config.py [DIR]</span><br></pre></td></tr></table></figure>

<p>이제 jupyter에 접속하려면 다음 같이 패스워드를 묻고 입력한 후에 사용할 수 있다.</p>
<p><img src="/images/python/jupyter-login.png">{:width&#x3D;”650”}</p>
<h4 id="Background-실행"><a href="#Background-실행" class="headerlink" title="Background 실행"></a>Background 실행</h4><p>Jupyter-notebook을 백그라운드로 실행하려면 <code>nohup</code> 을 사용할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~&gt; <span class="built_in">nohup</span> jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>

<p>nohup은 재시동시 다시 시작해야 하는 불편한 점이 있다.</p>
<h4 id="crontab-으로-실행"><a href="#crontab-으로-실행" class="headerlink" title="crontab 으로 실행"></a>crontab 으로 실행</h4><p>nohup 과 결합해서 사용해도 좋은 방법으로 crontab 을 사용해 재시동 후 자동으로 시작해 줄 수 있다. 사용자 crontab 을 편집해 다음 같이 사용할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@reboot cd /home/foo; jnohup jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>

<p>이 방법도 사용자가 시작&#x2F;상태확인&#x2F;종료 같은 직접적인 방법을 사용하기는 좀 불편하다.</p>
<p>그래서 upstart의 init.d 를 사용하거나 systemd 의 unit으로 생성해서 사용하는 것이 좋다.</p>
<h3 id="systemd-에서-실행"><a href="#systemd-에서-실행" class="headerlink" title="systemd 에서 실행"></a>systemd 에서 실행</h3><p>systemd unit으로 새로운 unit 파일을 생성해서 기존 <code>systemctl</code> 명령으로 시작&#x2F;상태&#x2F;종료&#x2F;재시작 등의 작업을 할 수 있다. 물론 재시동 관련해서도 완벽히 동작한다.</p>
<p>systemd의 unit 위치는 OS 마다 조금 다른 것 같다. 여기서는 <em>&#x2F;etc&#x2F;systemd&#x2F;system</em> 밑에 <em>jupyter.service</em> 라는 유닉 파일로 직접 작업한다.</p>
<ul>
<li>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;jupyter.service</li>
</ul>
<p>가상환경을 사용하고 있으므로 systemd unit의 <code>ExecStart</code> 의 python도 가상환경 위치로 지정해 주어야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Jupyter-Notebook</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/run/jupyter-notebook.pid</span><br><span class="line">ExecStart=/home/foo/.virtualenvs/jupyter/bin/jupyter-notebook --config=/home/foo/.jupyter/mynotebook.py</span><br><span class="line">User=foo</span><br><span class="line">Group=foo</span><br><span class="line">WorkingDirectory=/home/foo/notebooks</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=10</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>그리고 시스템 유닛을 시작해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable jupyter.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart jupyter.service</span><br></pre></td></tr></table></figure>

<h3 id="Upgrade-jupyter"><a href="#Upgrade-jupyter" class="headerlink" title="Upgrade jupyter"></a>Upgrade jupyter</h3><p>다음 같이 install 명령으로 업그레이드 할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)~&gt; pip install -U jupyter</span><br></pre></td></tr></table></figure>

<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/install.html">Pandas Install</a></li>
<li><a target="_blank" rel="noopener" href="https://www.scipy.org/install.html">Scipy Install</a></li>
<li><a target="_blank" rel="noopener" href="http://geoffboeing.com/2016/03/scientific-python-raspberry-pi/">Scientific Python on Raspberry Pi</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-10-20T00:00:00.000Z" title="2018-10-20 9:00:00">2018-10-20</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:35:10.239Z" title="2022-2-25 6:35:10">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a><span> / </span><a class="link-muted" href="/categories/Linux/Programming/">Programming</a></span><span class="level-item">13분안에 읽기 (약 1940 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/10/20/python-2018-10-20-jupyter-scitific-macos/">Python 과학계산을 위한 Jupyter Notebook - macOS</a></h1><div class="content"><p>과학계산을 위한 Jupyter 설치 및 구성까지 요약하고 있다.</p>
<h2 id="과학계산을-위한-Python-Jupyter"><a href="#과학계산을-위한-Python-Jupyter" class="headerlink" title="과학계산을 위한 Python Jupyter"></a>과학계산을 위한 Python Jupyter</h2><p>Raspberry Pi 3 위에 설치한 openSUSE LEAP 42.3 과 15.0 에서 과학계산을 위한 Python 개발환경과 Jupyter Notebook 환경을 정리한다. </p>
<ul>
<li>개발 프론트 엔드: Jupyter</li>
<li>과학계산 모듈: numpy, scipy 등</li>
</ul>
<p>Python과 Virtualenv 환경을 더 알고 싶으면 다음 두 링크에 자세한 설명이 있다.</p>
<ul>
<li><a href="!--swig%EF%BF%BC23--">Python - Install virtualenv on Linux</a></li>
</ul>
<h3 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h3><p>시스템에 Python2, Python3 가 설치되었는지 확인:</p>
<ul>
<li>macOS : Python2.7</li>
</ul>
<h3 id="python-org-설치"><a href="#python-org-설치" class="headerlink" title="python.org 설치"></a>python.org 설치</h3><p>python.org 에서 package 를 다운받아 설치한다.</p>
<h4 id="Uninstall-package-installer"><a href="#Uninstall-package-installer" class="headerlink" title="Uninstall package installer"></a>Uninstall package installer</h4><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3819449/how-to-uninstall-python-2-7-on-a-mac-os-x-10-6-4/3819829#3819829">https://stackoverflow.com/questions/3819449/how-to-uninstall-python-2-7-on-a-mac-os-x-10-6-4/3819829#3819829</a></p>
<h4 id="brew에서-Python-3-설치"><a href="#brew에서-Python-3-설치" class="headerlink" title="brew에서 Python 3 설치"></a>brew에서 Python 3 설치</h4><p>brew로 최신 3.7을 설치</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install python3</span><br></pre></td></tr></table></figure>


<p>You can install Python packages with<br>  pip3 install <package></p>
<p>They will install into the site-package directory</p>
<p>&#x2F;Users&#x2F;qkboo&#x2F;Library&#x2F;Python&#x2F;3.7&#x2F;site-packages</p>
<h3 id="pip-User-Scheme"><a href="#pip-User-Scheme" class="headerlink" title="pip User Scheme"></a>pip User Scheme</h3><p>Python2.6부터 User scheme 개념이 도입되며서 <code>pip</code>로 설치하는 패키지를 개별 사용자 환경 위치에 설치할 수 있다. </p>
<p>install 명령에 <code>--user</code> 옵션을 주고 설치한다.[^2] </p>
<ul>
<li>기본으로 리눅스는 <em>~&#x2F;.local</em> 폴더이고, </li>
<li>Mac OS X 는 <em>~&#x2F;Library&#x2F;Python&#x2F;X.Y</em> 에 위치한다.[^3]</li>
</ul>
<p>그리고 <code>PATH</code> 에 <em>~&#x2F;.local&#x2F;bin</em> 을 추가한다.</p>
<h4 id="virtualenv-와-virtualenvwrapper"><a href="#virtualenv-와-virtualenvwrapper" class="headerlink" title="virtualenv 와 virtualenvwrapper"></a>virtualenv 와 virtualenvwrapper</h4><p>pip 를 업그레이드하고, 가상 개발환경에서 쥬피터 관련 모듈을 설치하고 관리하기 위해 <code>pip</code>로 virtualenv, virtualenvwrapper 설치한다. </p>
<p>시스템 <code>pip</code> 모듈을 최신 버전으로 업그레이드한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<p>그리고 virtualenv, virtualenvwrapper 설치하는데, 사용자의 <code>.local</code> 폴더에 설치하도록 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --user virtualenv virtualenvwrapper</span><br></pre></td></tr></table></figure>

<p>자동으로 추가되지 않으면, 다음 스크립을 <code>.bashrc</code> 에 추가해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set PATH for pip</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$HOME</span>/.local/bin&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">    PATH=<span class="string">&quot;<span class="variable">$HOME</span>/.local/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</span><br><span class="line"><span class="built_in">export</span> WORKON_HOME=<span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"><span class="built_in">export</span> PROJECT_HOME=<span class="variable">$HOME</span>/Devel</span><br><span class="line"><span class="built_in">source</span> ~/Library/Python/3.7/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure>

<p>로그아웃했다 로그인하면 <code>mkvirtualenv</code>, <code>rmvirtualenv</code> 등의 명령어 스크립이 설치된다.</p>
<h4 id="Scientific-stack"><a href="#Scientific-stack" class="headerlink" title="Scientific stack"></a>Scientific stack</h4><p>과학계산을 지원하는 Python 패키지를 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --user numpy scipy matplotlib jupyter pandas sympy nose</span><br></pre></td></tr></table></figure>


<br>
### Jupyter Notebook

<p>Jupyter는 웹 브라우저를 통해서 IDE 환경을 제공하고, 다양한 언어&#x2F;문법을 지원하는 Kernel 이라는 해석기를 통해 IDE에서 코딩한 결과를 확인할 수 있다. </p>
<p>여기서는 가상환경을 구성해 Jupyter 관련 패키지를 설치하고 사용하겠다.</p>
<ul>
<li>시스템에 설치된 Python3 와 pip 모듈</li>
</ul>
<h4 id="Jupyter-가상환경-사용시"><a href="#Jupyter-가상환경-사용시" class="headerlink" title="Jupyter 가상환경 사용시"></a>Jupyter 가상환경 사용시</h4><p>다음은 <code>mkvirtualenv</code> 명령으로 <em>jupyter</em>라는 가상환경을 <em>python3</em>, 시스템 패키지 사용을 위해 <em>–system-site-packages</em> 옵션으로 생성한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv -p python3 --system-site-packages jupyter</span><br><span class="line">Running virtualenv with interpreter /usr/local/bin/python3</span><br><span class="line">Using base prefix &#x27;/usr/local/Cellar/python/3.7.1/Frameworks/Python.framework/Versions/3.7&#x27;</span><br><span class="line">New python executable in /Users/qkboo/.virtualenvs/jupyter/bin/python3.7</span><br><span class="line">Also creating executable in /Users/qkboo/.virtualenvs/jupyter/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(jupyter) $</span><br><span class="line">(jupyter) $ python --version</span><br><span class="line">Python 3.4.6</span><br></pre></td></tr></table></figure>

<p>가상환경 <em>jupyter</em> 에서 필수 모듈 numpy, scipy가 사용 가능한지 확인한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(jupyter) $ python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">1.9.3</span><br><span class="line">(jupyter) $ python -c <span class="string">&quot;import scipy;print(scipy.__version__)&quot;</span></span><br><span class="line">0.16.0</span><br></pre></td></tr></table></figure>


<p>그리고 pip로 Jupyter 가상환경에 Jupyter를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)$ pip install jupyter --user</span><br></pre></td></tr></table></figure>

<p>Python User scheme 에 설치시 macOS는 아래 위치에 설치되므로 경로에 추가한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Users/qkboo/Library/Python/3.7/bin</span><br></pre></td></tr></table></figure>

<p><code>jupyter-notebook</code>을 실행해 보고, 서버 관련 구성 내용을 설정해서 사용해 보자.</p>
<p>현재까지 설치된 pip 모듈 목록을 저장하자.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze --local &gt; jupyter-requirements.txt</span><br></pre></td></tr></table></figure>


<h4 id="서버로-실행"><a href="#서버로-실행" class="headerlink" title="서버로 실행"></a>서버로 실행</h4><p><code>jupyter-notebook</code> 은 로컬 머신에서 브라우저를 실행한다. 여기서는 원격 사용을 위해 다음 같이 시작할 수 있다. <code>[DIR]</code> 에 jupyter-notebook에서 작성한 노트북 파일이 저장된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter-notebook --no-browser --ip=* --port=8000 [DIR]</span><br><span class="line">[I 02:51:04.797 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 02:51:04.800 NotebookApp]</span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8585/?token=a747472bc9a7c6684829267d2ed0a4cd9a722e</span><br></pre></td></tr></table></figure>

<p>시작후 <code>?token=a.....</code> 부분의 토큰을 복사해 브라우저에 입력후 쥬피터 노트북 사용을 시작한다. 브라우저로 노트북에 접속해서 복사한 토큰을 입력한 후 로그인한다.</p>
<p><img src="/images/python/jupyter5-run.png">{:width&#x3D;”650”}</p>
<br>
### Jupyter 설정 이용

<p>jupyter는 설치된 후에 jupyter 시스템 디렉토리와 사용자 <strong>JUPYTER_DATA_DIR</strong>에 필요한 내용을 저장한다.</p>
<ul>
<li><strong>시스템 디렉토리</strong>: &#x2F;usr&#x2F;local&#x2F;share&#x2F;jupyter&#x2F;</li>
<li><strong>JUPYTER_DATA_DIR</strong> 는 보통 ~&#x2F;.jupyter</li>
</ul>
<p>설정 파일을 이용해서 사용자 비밀번호를 이용해 노트북을 사용할 수 있다.</p>
<p>먼저 실행중인 쥬피터 노트북에서 <code>passwd()</code> 를 실행해 <strong>패스워드 해시 값</strong>을 얻는다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> notebook.auth <span class="keyword">import</span> passwd</span><br><span class="line">In [<span class="number">2</span>]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">&#x27;sha1:67c9e60bb8b6:9ffede0825894254b2e043ea597d771089e11eed&#x27;</span></span><br></pre></td></tr></table></figure>

<p>패스워드 해시 값을 데이터 디렉토리의 설정 파일에 입력해야 한다.</p>
<h4 id="데이터-설정-파일"><a href="#데이터-설정-파일" class="headerlink" title="데이터 설정 파일"></a>데이터 설정 파일</h4><p>먼저 다음 같이 설정 파일을 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --generate-config</span><br><span class="line">Writing default config to: /home/foo/.jupyter/jupyter_notebook_config.py</span><br><span class="line">$ <span class="built_in">cd</span> .jupyter &amp;&amp; <span class="built_in">mv</span> jupyter_notebook_config.py mynotebook.py</span><br></pre></td></tr></table></figure>

<p><em>mynotebook.py</em>에 다음을 설정한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#c.NotebookApp.notebook_dir = &#x27;/path/to/notebook_directory&#x27;</span><br><span class="line">c.NotebookApp.base_url = &#x27;http://www.yourdomain.com/notebok&#x27;</span><br><span class="line">c.NotebookApp.password = &#x27;&#x27;</span><br><span class="line">c.NotebookApp.port = 8000</span><br><span class="line">c.NotebookApp.port_retries = 50</span><br></pre></td></tr></table></figure>

<p>복사한 패스워드 해시 값을 mynotebook.py 설정 파일 안의 <code>c.NotebookApp.password</code> 항목 주석을 풀고 해시 값을 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.password = &#x27;sha1:4ee6bb2da3d7:ed76216b87228540e5f5f20fcfa8069cf82686f0&#x27;</span><br></pre></td></tr></table></figure>

<p>설정 파일을 이용해 jupyter-notebook을 실행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter-notebook --config .jupyter/mybook_config.py [DIR]</span><br></pre></td></tr></table></figure>

<p>이제 jupyter에 접속하려면 다음 같이 패스워드를 묻고 입력한 후에 사용할 수 있다.</p>
<p><img src="/images/python/jupyter-login.png">{:width&#x3D;”650”}</p>
<h4 id="Background-실행"><a href="#Background-실행" class="headerlink" title="Background 실행"></a>Background 실행</h4><p>Jupyter-notebook을 백그라운드로 실행하려면 <code>nohup</code> 을 사용할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">nohup</span> jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>

<p>nohup은 재시동시 다시 시작해야 하는 불편한 점이 있다.</p>
<h4 id="crontab-으로-실행"><a href="#crontab-으로-실행" class="headerlink" title="crontab 으로 실행"></a>crontab 으로 실행</h4><p>nohup 과 결합해서 사용해도 좋은 방법으로 crontab 을 사용해 재시동 후 자동으로 시작해 줄 수 있다. 사용자 crontab 을 편집해 다음 같이 사용할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@reboot cd /home/foo; jnohup jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>


<p>이 방법도 사용자가 시작&#x2F;상태확인&#x2F;종료 같은 직접적인 방법을 사용하기는 좀 불편하다.</p>
<p>그래서 upstart의 init.d 를 사용하거나 systemd 의 unit으로 생성해서 사용하는 것이 좋다.</p>
<h4 id="systemd-에서-실행"><a href="#systemd-에서-실행" class="headerlink" title="systemd 에서 실행"></a>systemd 에서 실행</h4><p>systemd unit으로 새로운 unit 파일을 생성해서 기존 <code>systemctl</code> 명령으로 시작&#x2F;상태&#x2F;종료&#x2F;재시작 등의 작업을 할 수 있다. 물론 재시동 관련해서도 완벽히 동작한다.</p>
<p>systemd의 unit 위치는 OS 마다 조금 다른 것 같다. 여기서는 <em>&#x2F;etc&#x2F;systemd&#x2F;system</em> 밑에 <em>jupyter.service</em> 라는 유닉 파일로 직접 작업한다.</p>
<ul>
<li>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;jupyter.service</li>
</ul>
<p>가상환경을 사용하고 있으므로 systemd unit의 <code>ExecStart</code> 의 python도 가상환경 위치로 지정해 주어야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Jupyter-Notebook</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/run/jupyter-notebook.pid</span><br><span class="line">ExecStart=/home/foo/.virtualenvs/jupyter/bin/jupyter-notebook --config=/home/foo/.jupyter/mynotebook.py</span><br><span class="line">User=foo</span><br><span class="line">Group=foo</span><br><span class="line">WorkingDirectory=/home/foo/notebooks</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=10</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>그리고 시스템 유닛을 시작해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable jupyter.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart jupyter.service</span><br></pre></td></tr></table></figure>



<h3 id="Upgrade-jupyter"><a href="#Upgrade-jupyter" class="headerlink" title="Upgrade jupyter"></a>Upgrade jupyter</h3><p>여기서는 pip 가상머신을 이용하고 있고, virtualenv, virtualenvwrapper는 여기서 사용자 .local 환경에 설치했으므로 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U --user virtualenv virtualenvwrapper</span><br></pre></td></tr></table></figure>

<p>다음 같이 pip install 명령으로 업그레이드 할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)$ pip install -U jupyter</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze —local &gt; requirements.txt</span><br></pre></td></tr></table></figure>


<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/install.html">Pandas Install</a></li>
<li><a target="_blank" rel="noopener" href="https://www.scipy.org/install.html">Scipy Install</a></li>
<li><a target="_blank" rel="noopener" href="http://geoffboeing.com/2016/03/scientific-python-raspberry-pi/">Scientific Python on Raspberry Pi</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-10-30T00:00:00.000Z" title="2017-10-30 9:00:00">2017-10-30</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:23:58.869Z" title="2022-2-25 6:23:58">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a><span> / </span><a class="link-muted" href="/categories/Linux/Programming/">Programming</a></span><span class="level-item">14분안에 읽기 (약 2093 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/10/30/python-2017-10-30-jupyter-scitific-pip/">Python - 과학계산을 위한 Jupyter(pip)</a></h1><div class="content"><p>과학계산을 위한 Python3 및 pip를 사용한 scipy, jupyter 설치 및 구성을  요약하고 있다.</p>
<p><a target="_blank" rel="noopener" href="https://packaging.python.org/guides/installing-scientific-packages/">https://packaging.python.org/guides/installing-scientific-packages/</a></p>
<h2 id="과학계산을-위한-Python-Jupyter"><a href="#과학계산을-위한-Python-Jupyter" class="headerlink" title="과학계산을 위한 Python Jupyter"></a>과학계산을 위한 Python Jupyter</h2><p>과학계산을 위한 Python 과 Jupyter Notebook 환경을 정리한다. </p>
<ul>
<li>개발 프론트 엔드: Jupyter</li>
<li>과학계산 모듈: numpy, scipy 등</li>
</ul>
<p>Python과 Virtualenv 환경을 더 알고 싶으면 다음 두 링크에 자세한 설명이 있다.</p>
<ul>
<li><a href="!--swig%EF%BF%BC27--">Python - Install virtualenv on Linux</a></li>
</ul>
<h3 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h3><p>시스템에 Python2, Python3 가 설치되었는지 확인:</p>
<ul>
<li>Ubuntu&#x2F;Debian 계열: Python 2.7, Python 3.5 설치되어 있다.</li>
<li>openSUSE : Python2.7</li>
</ul>
<h4 id="Python-3-설치"><a href="#Python-3-설치" class="headerlink" title="Python 3 설치"></a>Python 3 설치</h4><h4 id="시스템-개발-패키지-설치"><a href="#시스템-개발-패키지-설치" class="headerlink" title="시스템 개발 패키지 설치"></a>시스템 개발 패키지 설치</h4><p>컴파일에 필요한 헤더 등이 포함된 개발자 라이브러리를 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install python-dev python-distlib python3-dev python3-distlib</span><br></pre></td></tr></table></figure>

<p>python-dev, python-distlib, apython-setuptools 은 파이썬 개발과 패키징을 지원한다.</p>
<p>apt-get install libfreetype6-dev<br>apt-get install pkg-config<br>apt-get install libpng-dev<br>apt-get install pkg-config</p>
<p>libzmq3-dev은 쥬피터 노트북에서 필요로 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libzmq3-dev</span><br></pre></td></tr></table></figure>

<ul>
<li>python-curses: Python이 (N)Curses Libr에 대한 인터페이스이다</li>
</ul>
<p>Pandas 로 데이터 셋트를 다룰 예정, libgdal-dev 은 geopandas에서 geospatial analysis 에 필요하다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libgdal-dev</span><br></pre></td></tr></table></figure>

<p>For Debian Jessie and Stretch installing the following packages resolves the issue:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libblas3 liblapack3 liblapack-dev libblas-dev</span><br></pre></td></tr></table></figure>

<p>Your next issue is very likely going to be a missing Fortran compiler, resolve this by installing it like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install gfortran</span><br></pre></td></tr></table></figure>


<h4 id="pip-설치"><a href="#pip-설치" class="headerlink" title="pip 설치"></a>pip 설치</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python3-pip</span><br></pre></td></tr></table></figure>

<p>python3 설치후 마지막으로 <code>update-alternatives</code> 를 이용해 <code>pip</code> 를 pip3 로 연결해 준다. </p>
<p>다른 배포본에서 필요시 update-alternatives 사용:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/pip pip /usr/bin/pip3 30</span><br></pre></td></tr></table></figure>

<p>시스템 <code>pip</code> 모듈을 최신 버전으로 업그레이드한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install -U pip</span><br><span class="line">sudo pip install -U setuptools</span><br></pre></td></tr></table></figure>



<h3 id="pip로-설치하기"><a href="#pip로-설치하기" class="headerlink" title="pip로 설치하기"></a><code>pip</code>로 설치하기</h3><p>Python2.6부터 User scheme 개념이 도입되며서 <code>pip</code>로 설치하는 패키지를 개별 사용자 환경 위치에 설치할 수 있다. </p>
<p>install 명령에 <code>--user</code> 옵션을 주고 설치한다.[^2] </p>
<ul>
<li>기본으로 리눅스는 <em>~&#x2F;.local</em> 폴더이고, </li>
<li>Mac OS X 는 <em>~&#x2F;Library&#x2F;Python&#x2F;X.Y</em> 에 위치한다.[^3]</li>
<li>그리고 <code>PATH</code> 에 <em>~&#x2F;.local&#x2F;bin</em> 을 추가한다.</li>
</ul>
<h4 id="Scientific-stack"><a href="#Scientific-stack" class="headerlink" title="Scientific stack"></a>Scientific stack</h4><p>아래 같이 사용자 영역에 python3 기반으로 설치해보자, pip 를 파이썬 버전의 site-package 에 모듈을 설치하기 위해서 파이썬 <code>-m</code> 을 사용한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install --user numpy sympy nose</span><br></pre></td></tr></table></figure>

<p>scipy는 설치 시스템에 따라 시간이 많이 걸린다. 또한 swap 영역을 사용하므로 스왑파일시스템을 활성화 하는 것을 권한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install --user scipy</span><br></pre></td></tr></table></figure>

<h5 id="error"><a href="#error" class="headerlink" title="error"></a>error</h5><p>스왑 파일시스템을 사용하지 않거나 모자라면 아래 같이 가상메모리 에러 혹은 컴파일 에러가 나는 것 같다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> #warning &quot;Using deprecated NumPy API, disable it by &quot; \</span><br><span class="line">  ^~~~~~~</span><br><span class="line">virtual memory exhausted: Cannot allocate memory</span><br></pre></td></tr></table></figure>


<blockquote>
<p>글쓴이는 OdroidC2, Armbian Stretch 에서 시도했다.</p>
</blockquote>
<h4 id="pandas-및"><a href="#pandas-및" class="headerlink" title="pandas 및"></a>pandas 및</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install --user pandas</span><br></pre></td></tr></table></figure>

<p>파이썬이 있고 pip를 사용하여 패키지를 설치하려면 다음 명령을 사용합니다.</p>
<p>matplotlib  pillow graphviz</p>
<p>scikit-learn </p>
<h4 id="conda를-사용한-패키지-설치"><a href="#conda를-사용한-패키지-설치" class="headerlink" title="conda를 사용한 패키지 설치"></a>conda를 사용한 패키지 설치</h4><p>설치된 파이썬이 있다면 conda 패키지 매니저를 사용하여 다음 명령을 실행하면 필요한 패키지를 모두 얻을 수 있습니다.</p>
<p>conda install numpy scipy scikit-learn matplotlib pandas pillow graphviz python-graphviz<br>pip를 사용한 패키지 설치</p>
<h4 id="설치-확인"><a href="#설치-확인" class="headerlink" title="설치 확인"></a>설치 확인</h4><p>설치되고 사용이 가능한지 확인한다. 다음 두 모듈이 없으면 jupyter 설치가 제대로 안된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 -c &quot;import numpy;print(numpy.__version__)&quot;</span><br><span class="line">1.9.3</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3 -c &quot;import scipy;print(scipy.__version__)&quot;</span><br><span class="line">0.16.0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -c &quot;import numpy;print(matplotlib.__version__)&quot;</span><br></pre></td></tr></table></figure>

<br>
### Jupyter Notebook

<p>Jupyter는 웹 브라우저를 통해서 IDE 환경을 제공하고, 다양한 언어&#x2F;문법을 지원하는 Kernel 이라는 해석기를 통해 IDE에서 코딩한 결과를 확인할 수 있다. </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 -m pip install --user jupyter </span><br></pre></td></tr></table></figure>

<blockquote>
<p>물론 가상환경이 아닌 시스템 패키지로 설치해도 된다.<br>$ sudo pip install jupyter geopandas osmnx</p>
</blockquote>
<p><code>jupyter-notebook</code>을 실행해 보고, 서버 관련 구성 내용을 설정해서 사용해 보자.</p>
<h5 id="Upgrade-jupyter"><a href="#Upgrade-jupyter" class="headerlink" title="Upgrade jupyter"></a>Upgrade jupyter</h5><p>여기서는 pip 가상머신을 이용하고 있어서 다음 같이 pip install 명령으로 업그레이드 할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 -m pip install -U jupyter</span><br></pre></td></tr></table></figure>


<p>python3 -m pip freeze —local &gt; requirements.txt</p>
<h4 id="서버로-실행"><a href="#서버로-실행" class="headerlink" title="서버로 실행"></a>서버로 실행</h4><p><code>jupyter-notebook</code> 은 로컬 머신에서 브라우저를 실행한다. 여기서는 원격 사용을 위해 다음 같이 시작할 수 있다. <code>[DIR]</code> 에 jupyter-notebook에서 작성한 노트북 파일이 저장된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter-notebook --no-browser --ip=* --port=8000 [DIR]</span><br><span class="line">[I 02:51:04.797 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 02:51:04.800 NotebookApp]</span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8585/?token=a747472bc9a7c6684829267d2ed0a4cd9a722e</span><br></pre></td></tr></table></figure>

<p>시작후 <code>?token=a.....</code> 부분의 토큰을 복사해 브라우저에 입력후 쥬피터 노트북 사용을 시작한다. 브라우저로 노트북에 접속해서 복사한 토큰을 입력한 후 로그인한다.</p>
<p><img src="/images/python/jupyter5-run.png">{:width&#x3D;”650”}</p>
<br>
### Jupyter 설정 이용

<p>jupyter는 설치된 후에 jupyter 시스템 디렉토리와 사용자 <strong>JUPYTER_DATA_DIR</strong>에 필요한 내용을 저장한다.</p>
<ul>
<li><strong>시스템 디렉토리</strong>: &#x2F;usr&#x2F;local&#x2F;share&#x2F;jupyter&#x2F;</li>
<li><strong>JUPYTER_DATA_DIR</strong> 는 보통 ~&#x2F;.jupyter</li>
</ul>
<p>설정 파일을 이용해서 사용자 비밀번호를 이용해 노트북을 사용할 수 있다.</p>
<p>먼저 실행중인 쥬피터 노트북에서 <code>passwd()</code> 를 실행해 <strong>패스워드 해시 값</strong>을 얻는다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> notebook.auth <span class="keyword">import</span> passwd</span><br><span class="line">In [<span class="number">2</span>]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">&#x27;sha1:67c9e60bb8b6:9ffede0825894254b2e043ea597d771089e11eed&#x27;</span></span><br></pre></td></tr></table></figure>

<p>패스워드 해시 값을 데이터 디렉토리의 설정 파일에 입력해야 한다.</p>
<h4 id="데이터-설정-파일"><a href="#데이터-설정-파일" class="headerlink" title="데이터 설정 파일"></a>데이터 설정 파일</h4><p>먼저 다음 같이 설정 파일을 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --generate-config</span><br><span class="line">Writing default config to: /home/foo/.jupyter/jupyter_notebook_config.py</span><br><span class="line">$ <span class="built_in">cd</span> .jupyter &amp;&amp; <span class="built_in">mv</span> jupyter_notebook_config.py mynotebook.py</span><br></pre></td></tr></table></figure>

<p><em>mynotebook.py</em>에 다음을 설정한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#c.NotebookApp.notebook_dir = &#x27;/path/to/notebook_directory&#x27;</span><br><span class="line">c.NotebookApp.base_url = &#x27;http://www.yourdomain.com/notebok&#x27;</span><br><span class="line">c.NotebookApp.password = &#x27;&#x27;</span><br><span class="line">c.NotebookApp.port = 8000</span><br><span class="line">c.NotebookApp.port_retries = 50</span><br></pre></td></tr></table></figure>

<p>복사한 패스워드 해시 값을 mynotebook.py 설정 파일 안의 <code>c.NotebookApp.password</code> 항목 주석을 풀고 해시 값을 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.password = &#x27;sha1:4ee6bb2da3d7:ed76216b87228540e5f5f20fcfa8069cf82686f0&#x27;</span><br></pre></td></tr></table></figure>

<p>설정 파일을 이용해 jupyter-notebook을 실행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --config .jupyter/mybook_config.py [DIR]</span><br></pre></td></tr></table></figure>

<p>이제 jupyter에 접속하려면 다음 같이 패스워드를 묻고 입력한 후에 사용할 수 있다.</p>
<p><img src="/images/python/jupyter-login.png">{:width&#x3D;”650”}</p>
<h4 id="Background-실행"><a href="#Background-실행" class="headerlink" title="Background 실행"></a>Background 실행</h4><p>Jupyter-notebook을 백그라운드로 실행하려면 <code>nohup</code> 을 사용할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">nohup</span> jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>

<p>nohup은 재시동시 다시 시작해야 하는 불편한 점이 있다.</p>
<h4 id="crontab-으로-실행"><a href="#crontab-으로-실행" class="headerlink" title="crontab 으로 실행"></a>crontab 으로 실행</h4><p>nohup 과 결합해서 사용해도 좋은 방법으로 crontab 을 사용해 재시동 후 자동으로 시작해 줄 수 있다. 사용자 crontab 을 편집해 다음 같이 사용할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@reboot cd /home/foo; jnohup jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>


<p>이 방법도 사용자가 시작&#x2F;상태확인&#x2F;종료 같은 직접적인 방법을 사용하기는 좀 불편하다.</p>
<p>그래서 upstart의 init.d 를 사용하거나 systemd 의 unit으로 생성해서 사용하는 것이 좋다.</p>
<h4 id="systemd-에서-실행"><a href="#systemd-에서-실행" class="headerlink" title="systemd 에서 실행"></a>systemd 에서 실행</h4><p>systemd unit으로 새로운 unit 파일을 생성해서 기존 <code>systemctl</code> 명령으로 시작&#x2F;상태&#x2F;종료&#x2F;재시작 등의 작업을 할 수 있다. 물론 재시동 관련해서도 완벽히 동작한다.</p>
<p>systemd의 unit 위치는 OS 마다 조금 다른 것 같다. 여기서는 <em>&#x2F;etc&#x2F;systemd&#x2F;system</em> 밑에 <em>jupyter.service</em> 라는 유닉 파일로 직접 작업한다.</p>
<ul>
<li>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;jupyter.service</li>
</ul>
<p>가상환경을 사용하고 있으므로 systemd unit의 <code>ExecStart</code> 의 python도 가상환경 위치로 지정해 주어야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Jupyter-Notebook</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/run/jupyter-notebook.pid</span><br><span class="line">ExecStart=/home/foo/.virtualenvs/jupyter/bin/jupyter-notebook --config=/home/foo/.jupyter/mynotebook.py</span><br><span class="line">User=foo</span><br><span class="line">Group=foo</span><br><span class="line">WorkingDirectory=/home/foo/notebooks</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=10</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>그리고 시스템 유닛을 시작해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable jupyter.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart jupyter.service</span><br></pre></td></tr></table></figure>



<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/install.html">Pandas Install</a></li>
<li><a target="_blank" rel="noopener" href="https://www.scipy.org/install.html">Scipy Install</a></li>
<li><a target="_blank" rel="noopener" href="http://geoffboeing.com/2016/03/scientific-python-raspberry-pi/">Scientific Python on Raspberry Pi</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-10-30T00:00:00.000Z" title="2017-10-30 9:00:00">2017-10-30</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:31:24.429Z" title="2022-2-25 6:31:24">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a><span> / </span><a class="link-muted" href="/categories/Linux/Programming/">Programming</a></span><span class="level-item">14분안에 읽기 (약 2087 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/10/30/python-2017-10-30-jupyter-scitific-virtuaenv/">Python - 과학계산을 위한 Jupyter(Armbian)</a></h1><div class="content"><p>Odroid C2, Raspberry Pi 계열의 ARM CPU를 위한 <strong>Armbian</strong> 에서 과학계산을 위한 Jupyter 설치 및 구성까지 요약하고 있다.</p>
<p><a target="_blank" rel="noopener" href="https://packaging.python.org/guides/installing-scientific-packages/">https://packaging.python.org/guides/installing-scientific-packages/</a></p>
<h2 id="과학계산을-위한-Python-Jupyter"><a href="#과학계산을-위한-Python-Jupyter" class="headerlink" title="과학계산을 위한 Python Jupyter"></a>과학계산을 위한 Python Jupyter</h2><p>과학계산을 위한 Python 모듈을 시스템 패키지로 설치하고 <code>pip</code> 를 사용해서 Jupyter Notebook 을 설치하고 사용하는 과정을 정리했다.</p>
<ul>
<li>개발 프론트 엔드: Jupyter</li>
<li>과학계산 모듈: numpy, scipy, pandas</li>
</ul>
<h3 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h3><p>시스템에 Python2, Python3 가 설치되었는지 확인:</p>
<ul>
<li>Ubuntu&#x2F;Debian 계열: Python 2.7, Python 3.5 설치되어 있다.</li>
<li>openSUSE : Python2.7</li>
</ul>
<h4 id="시스템-개발-패키지-설치"><a href="#시스템-개발-패키지-설치" class="headerlink" title="시스템 개발 패키지 설치"></a>시스템 개발 패키지 설치</h4><p>컴파일에 필요한 헤더 등이 포함된 개발자 라이브러리를 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install python-dev python-distlib python3-dev python3-distlib</span><br></pre></td></tr></table></figure>

<p>python-dev, python-distlib, apython-setuptools 은 파이썬 개발과 패키징을 지원한다.</p>
<h4 id="pip-설치"><a href="#pip-설치" class="headerlink" title="pip 설치"></a>pip 설치</h4><p>배포본에 pip가 설치되어 있지 않으면 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python3-pip</span><br></pre></td></tr></table></figure>

<p>python3 설치후 마지막으로 <code>update-alternatives</code> 를 이용해 <code>pip</code> 를 pip3 로 연결해 준다. </p>
<p>다른 배포본에서 필요시 update-alternatives 사용:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/pip pip /usr/bin/pip3 30</span><br></pre></td></tr></table></figure>


<h4 id="라이브러리-설치"><a href="#라이브러리-설치" class="headerlink" title="라이브러리 설치"></a>라이브러리 설치</h4><h4 id="Scientific-stack-apt"><a href="#Scientific-stack-apt" class="headerlink" title="Scientific stack - apt"></a>Scientific stack - <code>apt</code></h4><p>시스템 패키지로 과학계산을 지원하는 Python2, Python3 모듈을 설치.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python-numpy python-decorator python-scipy python-matplotlib</span><br><span class="line">$ sudo apt-get install python3-decorator python3-numpy python3-scipy python3-matplotlib</span><br></pre></td></tr></table></figure>

<p>symbolic mathematics 관련 패키지도 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-sympy python-nose</span><br><span class="line">sudo apt-get install python3-sympy python3-nose</span><br></pre></td></tr></table></figure>

<p>설치되고 사용이 가능한지 확인한다. 다음 두 모듈 <em>numpy</em>, <em>scipy</em> 의 버전이 출력되면 된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">1.12.1</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import scipy;print(scipy.__version__)&quot;</span></span><br><span class="line">0.18.1</span><br></pre></td></tr></table></figure>


<p>여기까지 설치하면 의존성에 관련한 아래 같은 여러 패키지가 함께 설치된다.</p>
<ul>
<li>requests : Python package provides a graceful interface for making HTTP requests, </li>
<li>pil : provides Python imaging capabilities, </li>
<li>scrapy : is a web scraping framework, </li>
<li>geopy provides geocoding and geodesic distance functions, </li>
<li>shapely provides 2D geometry manipulation, </li>
<li>pyproj: provides cartographic transformations. In the second command, jupyter provides interactive coding notebooks, </li>
<li>geopandas spatializes pandas, </li>
<li>OSMnx lets you work with OpenStreetMap street networks.</li>
</ul>
<p>이 패키지들은 별도로 설치를 하고자 하면 <code>pip</code>로 설치하거나 시스템 패키지로 다음 같이 설치 할 수 있다.</p>
<p>Python2 </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-requests python-pil python-scrapy python-geopy python-shapely python-pyproj</span><br></pre></td></tr></table></figure>

<p>Python3</p>
<blockquote>
<p>pil -&gt; Pillow</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-requests python3-pil python3-scrapy python3-geopy python3-shapely python3-pyproj</span><br></pre></td></tr></table></figure>


<h4 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h4><p>Pandas 로 데이터 셋트를 다룰 예정이라면 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libgdal-dev</span><br></pre></td></tr></table></figure>

<p>libgdal-dev 은 geopandas에서 geospatial analysis 에 필요하다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-pandas python3-pandas</span><br></pre></td></tr></table></figure>


<br>
### Jupyter Notebook

<p>Jupyter는 웹 브라우저를 통해서 IDE 환경을 제공하고, 다양한 언어&#x2F;문법을 지원하는 Kernel 이라는 해석기를 통해 IDE에서 코딩한 결과를 확인할 수 있다. </p>
<p>Jupyter 관련 모듈을 <code>pip</code>로 사용자 환경에 설치하고 사용하겠다.</p>
<ul>
<li>시스템에 설치된 Python3 와 pip 모듈</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libzmq3-dev</span><br></pre></td></tr></table></figure>

<p>libzmq3-dev은 쥬피터 노트북에서 필요로 한다.</p>
<h4 id="pip"><a href="#pip" class="headerlink" title="pip"></a><code>pip</code></h4><p>먼저 pip를 업그레이드 해준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pip install -U pip</span><br></pre></td></tr></table></figure>


<p>Python2.6부터 User scheme 개념이 도입되며서 <code>pip</code>로 설치하는 패키지를 개별 사용자 환경 위치에 설치할 수 있다. </p>
<p>install 명령에 <code>--user</code> 옵션을 주고 설치한다.[^2] </p>
<ul>
<li>기본으로 리눅스는 <em>~&#x2F;.local</em> 폴더이고, </li>
<li>Mac OS X 는 <em>~&#x2F;Library&#x2F;Python&#x2F;X.Y</em> 에 위치한다.[^3]</li>
</ul>
<p>그리고 <code>PATH</code> 에 <em>~&#x2F;.local&#x2F;bin</em> 을 추가한다.</p>
<h4 id="Install-Jupyter"><a href="#Install-Jupyter" class="headerlink" title="Install Jupyter"></a>Install Jupyter</h4><p>사용자 환경에서 pip로 Jupyter를 설치한다. Python3 환경에서 설치를 권장하고 있다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 -m pip install --user jupyter </span><br></pre></td></tr></table></figure>

<p>그리고 필요하면 Python2에서 설치할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python2 -m pip install --user jupyter </span><br></pre></td></tr></table></figure>

<p><code>jupyter notebook</code>을 실행해 보자.</p>
<h4 id="서버로-실행"><a href="#서버로-실행" class="headerlink" title="서버로 실행"></a>서버로 실행</h4><p><code>jupyter notebook</code> 을 바로 실행하면 로컬 머신의 브라우저를 실행한다. 여기서는 원격 사용을 위해 다음 같이 브라우저 없이 시작한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --no-browser --ip=* --port=8000</span><br><span class="line">[I 02:51:04.797 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 02:51:04.800 NotebookApp]</span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8585/?token=a747472bc9a7c6684829267d2ed0a4cd9a722e</span><br></pre></td></tr></table></figure>

<p>jupyter notebook을 시작하면 콘솔에 <code>?token=a.....</code> 부분의 토큰을 복사해 브라우저에 입력후 쥬피터 노트북 사용을 시작한다. 브라우저로 노트북에 접속해서 복사한 토큰을 입력한 후 로그인한다.</p>
<p><img src="/images/python/jupyter5-run.png">{:width&#x3D;”650”}</p>
<h4 id="사용자-설치-모듈-목록"><a href="#사용자-설치-모듈-목록" class="headerlink" title="사용자 설치 모듈 목록"></a>사용자 설치 모듈 목록</h4><p>여기까지 pip로 사용자 환경 local에 설치한 모듈 목록을 백업해 둘 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip freeze —-local &gt; requirements.txt</span><br></pre></td></tr></table></figure>


<h5 id="Upgrade-jupyter"><a href="#Upgrade-jupyter" class="headerlink" title="Upgrade jupyter"></a>Upgrade jupyter</h5><p>여기서는 pip 가상머신을 이용하고 있어서 다음 같이 pip install 명령으로 업그레이드 할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python3 -m pip install -U --user jupyter</span><br></pre></td></tr></table></figure>



<br>
### Jupyter 설정 이용

<p>jupyter는 설치된 후에 jupyter 시스템 디렉토리와 사용자 <strong>JUPYTER_DATA_DIR</strong>에 필요한 내용을 저장한다.</p>
<ul>
<li><strong>시스템 디렉토리</strong>: &#x2F;usr&#x2F;local&#x2F;share&#x2F;jupyter&#x2F;</li>
<li><strong>JUPYTER_DATA_DIR</strong> 는 보통 ~&#x2F;.jupyter</li>
</ul>
<p>설정 파일을 이용해서 사용자 비밀번호를 이용해 노트북을 사용할 수 있다.</p>
<p>먼저 실행중인 쥬피터 노트북에서 <code>passwd()</code> 를 실행해 <strong>패스워드 해시 값</strong>을 얻는다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> notebook.auth <span class="keyword">import</span> passwd</span><br><span class="line">In [<span class="number">2</span>]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">&#x27;sha1:67c9e60bb8b6:9ffede0825894254b2e043ea597d771089e11eed&#x27;</span></span><br></pre></td></tr></table></figure>

<p>패스워드 해시 값을 데이터 디렉토리의 설정 파일에 입력해야 한다.</p>
<h4 id="데이터-설정-파일"><a href="#데이터-설정-파일" class="headerlink" title="데이터 설정 파일"></a>데이터 설정 파일</h4><p>먼저 다음 같이 설정 파일을 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --generate-config</span><br><span class="line">Writing default config to: /home/foo/.jupyter/jupyter_notebook_config.py</span><br><span class="line">$ <span class="built_in">cd</span> .jupyter &amp;&amp; <span class="built_in">mv</span> jupyter_notebook_config.py mynotebook.py</span><br></pre></td></tr></table></figure>

<p><em>mynotebook.py</em>에 다음을 설정한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#c.NotebookApp.notebook_dir = &#x27;/path/to/notebook_directory&#x27;</span><br><span class="line">c.NotebookApp.base_url = &#x27;http://www.yourdomain.com/notebok&#x27;</span><br><span class="line">c.NotebookApp.password = &#x27;&#x27;</span><br><span class="line">c.NotebookApp.port = 8000</span><br><span class="line">c.NotebookApp.port_retries = 50</span><br></pre></td></tr></table></figure>

<p>복사한 패스워드 해시 값을 mynotebook.py 설정 파일 안의 <code>c.NotebookApp.password</code> 항목 주석을 풀고 해시 값을 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.password = &#x27;sha1:4ee6bb2da3d7:ed76216b87228540e5f5f20fcfa8069cf82686f0&#x27;</span><br></pre></td></tr></table></figure>

<p>설정 파일을 이용해 jupyter-notebook을 실행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --config .jupyter/mybook_config.py [DIR]</span><br></pre></td></tr></table></figure>

<p>이제 jupyter에 접속하려면 다음 같이 패스워드를 묻고 입력한 후에 사용할 수 있다.</p>
<p><img src="/images/python/jupyter-login.png">{:width&#x3D;”650”}</p>
<h4 id="Background-실행"><a href="#Background-실행" class="headerlink" title="Background 실행"></a>Background 실행</h4><p>Jupyter-notebook을 백그라운드로 실행하려면 <code>nohup</code> 을 사용할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">nohup</span> jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>

<p>nohup은 재시동시 다시 시작해야 하는 불편한 점이 있다.</p>
<h4 id="crontab-으로-실행"><a href="#crontab-으로-실행" class="headerlink" title="crontab 으로 실행"></a>crontab 으로 실행</h4><p>nohup 과 결합해서 사용해도 좋은 방법으로 crontab 을 사용해 재시동 후 자동으로 시작해 줄 수 있다. 사용자 crontab 을 편집해 다음 같이 사용할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@reboot cd /home/foo; jnohup jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>


<p>이 방법도 사용자가 시작&#x2F;상태확인&#x2F;종료 같은 직접적인 방법을 사용하기는 좀 불편하다.</p>
<p>그래서 upstart의 init.d 를 사용하거나 systemd 의 unit으로 생성해서 사용하는 것이 좋다.</p>
<h4 id="systemd-에서-실행"><a href="#systemd-에서-실행" class="headerlink" title="systemd 에서 실행"></a>systemd 에서 실행</h4><p>systemd unit으로 새로운 unit 파일을 생성해서 기존 <code>systemctl</code> 명령으로 시작&#x2F;상태&#x2F;종료&#x2F;재시작 등의 작업을 할 수 있다. 물론 재시동 관련해서도 완벽히 동작한다.</p>
<p>systemd의 unit 위치는 OS 마다 조금 다른 것 같다. 여기서는 <em>&#x2F;etc&#x2F;systemd&#x2F;system</em> 밑에 <em>jupyter.service</em> 라는 유닉 파일로 직접 작업한다.</p>
<ul>
<li>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;jupyter.service</li>
</ul>
<p>가상환경을 사용하고 있으므로 systemd unit의 <code>ExecStart</code> 의 python도 가상환경 위치로 지정해 주어야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Jupyter-Notebook</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/run/jupyter-notebook.pid</span><br><span class="line">ExecStart=/home/foo/.virtualenvs/jupyter/bin/jupyter-notebook --config=/home/foo/.jupyter/mynotebook.py</span><br><span class="line">User=foo</span><br><span class="line">Group=foo</span><br><span class="line">WorkingDirectory=/home/foo/notebooks</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=10</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>그리고 시스템 유닛을 시작해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable jupyter.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart jupyter.service</span><br></pre></td></tr></table></figure>


<p>현재 서버의 열린 포트는 다음 같이 <code>netstat</code> 명령으로 확인이 가능하다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -tlnp</span><br><span class="line">tcp        0      0 127.0.0.1:8585          0.0.0.0:*              LISTEN      11906/python3</span><br></pre></td></tr></table></figure>

<h3 id="virtualenv-이용"><a href="#virtualenv-이용" class="headerlink" title="virtualenv 이용"></a>virtualenv 이용</h3><p>Python과 Virtualenv 환경을 더 알고 싶으면 다음 두 링크에 자세한 설명이 있다.</p>
<ul>
<li><a href="!--swig%EF%BF%BC28--">Python - Install virtualenv on Linux</a></li>
</ul>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><a target="_blank" rel="noopener" href="http://jupyter.org/install">Installing the Jupyter Notebook</a></li>
<li><a target="_blank" rel="noopener" href="https://www.scipy.org/install.html">Scipy Install</a></li>
<li><a target="_blank" rel="noopener" href="http://geoffboeing.com/2016/03/scientific-python-raspberry-pi/">Scientific Python on Raspberry Pi</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-10-30T00:00:00.000Z" title="2017-10-30 9:00:00">2017-10-30</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:31:47.263Z" title="2022-2-25 6:31:47">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a><span> / </span><a class="link-muted" href="/categories/Linux/Programming/">Programming</a></span><span class="level-item">17분안에 읽기 (약 2476 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/10/30/python-2017-10-30-jupyter-scitific/">Python - 과학계산을 위한 Jupyter(Armbian)</a></h1><div class="content"><p>Debian 계열의 ARM CPU를 위한 <strong>Armbian</strong> 에서 과학계산을 위한 Jupyter 설치 및 구성까지 요약하고 있다.</p>
<p><a target="_blank" rel="noopener" href="https://packaging.python.org/guides/installing-scientific-packages/">https://packaging.python.org/guides/installing-scientific-packages/</a></p>
<h2 id="과학계산을-위한-Python-Jupyter"><a href="#과학계산을-위한-Python-Jupyter" class="headerlink" title="과학계산을 위한 Python Jupyter"></a>과학계산을 위한 Python Jupyter</h2><p>과학계산을 위한 Python 과 Jupyter Notebook 환경을 정리한다. </p>
<ul>
<li>개발 프론트 엔드: Jupyter</li>
<li>과학계산 모듈: numpy, scipy 등</li>
</ul>
<p>Python과 Virtualenv 환경을 더 알고 싶으면 다음 두 링크에 자세한 설명이 있다.</p>
<ul>
<li><a href="!--swig%EF%BF%BC33--">Python - Install virtualenv on Linux</a></li>
</ul>
<h3 id="공개-사이트"><a href="#공개-사이트" class="headerlink" title="공개 사이트"></a>공개 사이트</h3><ol>
<li><a target="_blank" rel="noopener" href="https://colab.research.google.com/">Google Colaboratory</a></li>
<li>nbview</li>
<li></li>
</ol>
<h3 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h3><p>시스템에 Python2, Python3 가 설치되었는지 확인:</p>
<ul>
<li>Ubuntu&#x2F;Debian 계열: Python 2.7, Python 3.5 설치되어 있다.</li>
<li>openSUSE : Python2.7</li>
</ul>
<h4 id="Python-3-설치"><a href="#Python-3-설치" class="headerlink" title="Python 3 설치"></a>Python 3 설치</h4><h4 id="시스템-개발-패키지-설치"><a href="#시스템-개발-패키지-설치" class="headerlink" title="시스템 개발 패키지 설치"></a>시스템 개발 패키지 설치</h4><p>컴파일에 필요한 헤더 등이 포함된 개발자 라이브러리를 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install python-dev python-distlib python3-dev python3-distlib</span><br></pre></td></tr></table></figure>

<p>python-dev, python-distlib, apython-setuptools 은 파이썬 개발과 패키징을 지원한다.</p>
<h4 id="pip-설치"><a href="#pip-설치" class="headerlink" title="pip 설치"></a>pip 설치</h4><p>apt-get install python3-pip</p>
<p>python3 설치후 마지막으로 <code>update-alternatives</code> 를 이용해 <code>pip</code> 를 pip3 로 연결해 준다. </p>
<p>다른 배포본에서 필요시 update-alternatives 사용:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/pip pip /usr/bin/pip3 30</span><br></pre></td></tr></table></figure>

<h4 id="라이브러리-설치"><a href="#라이브러리-설치" class="headerlink" title="라이브러리 설치"></a>라이브러리 설치</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libzmq3-dev</span><br></pre></td></tr></table></figure>

<p>libzmq3-dev은 쥬피터 노트북에서 필요로 한다.</p>
<ul>
<li>python-curses: Python이 (N)Curses Libr에 대한 인터페이스이다</li>
</ul>
<h4 id="Scientific-stack-pip"><a href="#Scientific-stack-pip" class="headerlink" title="Scientific stack - pip"></a>Scientific stack - <code>pip</code></h4><p>Python2.6부터 User scheme 개념이 도입되며서 <code>pip</code>로 설치하는 패키지를 개별 사용자 환경 위치에 설치할 수 있다. </p>
<p>install 명령에 <code>--user</code> 옵션을 주고 설치한다.[^2] </p>
<ul>
<li>기본으로 리눅스는 <em>~&#x2F;.local</em> 폴더이고, </li>
<li>Mac OS X 는 <em>~&#x2F;Library&#x2F;Python&#x2F;X.Y</em> 에 위치한다.[^3]</li>
</ul>
<p>그리고 <code>PATH</code> 에 <em>~&#x2F;.local&#x2F;bin</em> 을 추가한다.</p>
<p>xlsx 파일을 위해 xlrd 패키지 설치</p>
<p>pip install -U –user xlrd</p>
<h4 id="Scientific-stack-apt"><a href="#Scientific-stack-apt" class="headerlink" title="Scientific stack - apt"></a>Scientific stack - <code>apt</code></h4><p>과학계산을 지원하는 Python2 모듈을 시스템 패키지에 <code>apt</code> 로 설치할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python-numpy python-decorator python-scipy</span><br><span class="line">$ sudo apt-get install python-matplotlib</span><br></pre></td></tr></table></figure>

<p>Python3 패키지도 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python3-decorator python3-numpy python3-scipy</span><br><span class="line">$ sudo apt-get install python3-matplotlib</span><br></pre></td></tr></table></figure>

<p>symbolic mathematics 관련 패키지도 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-sympy python-nose</span><br><span class="line">sudo apt-get install python3-sympy python3-nose</span><br></pre></td></tr></table></figure>

<p>설치되고 사용이 가능한지 확인한다. 다음 두 모듈이 없으면 jupyter 설치가 제대로 안된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">1.9.3</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">0.16.0</span><br></pre></td></tr></table></figure>


<p>여기까지 설치하면 의존성에 관련한 아래 같은 여러 패키지가 함께 설치된다.</p>
<ul>
<li>requests : Python package provides a graceful interface for making HTTP requests, </li>
<li>pil : provides Python imaging capabilities, </li>
<li>scrapy : is a web scraping framework, </li>
<li>geopy provides geocoding and geodesic distance functions, </li>
<li>shapely provides 2D geometry manipulation, </li>
<li>pyproj: provides cartographic transformations. In the second command, jupyter provides interactive coding notebooks, </li>
<li>geopandas spatializes pandas, </li>
<li>OSMnx lets you work with OpenStreetMap street networks.</li>
</ul>
<p>이 패키지들은 별도로 설치를 하고자 하면 <code>pip</code>로 설치하거나 시스템 패키지로 다음 같이 설치 할 수 있다.</p>
<p>Python2 </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-requests python-pil python-scrapy python-geopy python-shapely python-pyproj</span><br></pre></td></tr></table></figure>

<p>Python3</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-requests python3-pil python3-scrapy python3-geopy python3-shapely python3-pyproj</span><br></pre></td></tr></table></figure>


<h4 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h4><p>Pandas 로 데이터 셋트를 다룰 예정이라면 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libgdal-dev</span><br></pre></td></tr></table></figure>

<p>libgdal-dev 은 geopandas에서 geospatial analysis 에 필요하다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-pandas python3-pandas</span><br></pre></td></tr></table></figure>


<br>
### Jupyter Notebook

<p>Jupyter는 웹 브라우저를 통해서 IDE 환경을 제공하고, 다양한 언어&#x2F;문법을 지원하는 Kernel 이라는 해석기를 통해 IDE에서 코딩한 결과를 확인할 수 있다. </p>
<p>여기서는 가상환경을 구성해 Jupyter 관련 패키지를 설치하고 사용하겠다.</p>
<ul>
<li>시스템에 설치된 Python3 와 pip 모듈</li>
</ul>
<h4 id="virtualenv-와-virtualenvwrapper"><a href="#virtualenv-와-virtualenvwrapper" class="headerlink" title="virtualenv 와 virtualenvwrapper"></a>virtualenv 와 virtualenvwrapper</h4><p>pip 를 업그레이드하고, 가상 개발환경에서 쥬피터 관련 모듈을 설치하고 관리하기 위해 <code>pip</code>로 virtualenv, virtualenvwrapper 설치한다. </p>
<p>시스템 <code>pip</code> 모듈을 최신 버전으로 업그레이드한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install --upgrade pip</span><br></pre></td></tr></table></figure>

<p>그리고 virtualenv, virtualenvwrapper 설치하는데, 사용자의 <code>.local</code> 폴더에 설치하도록 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --user virtualenv virtualenvwrapper</span><br></pre></td></tr></table></figure>

<p>자동으로 추가되지 않으면, 다음 스크립을 <code>.bashrc</code> 에 추가해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set PATH for pip</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$HOME</span>/.local/bin&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">    PATH=<span class="string">&quot;<span class="variable">$HOME</span>/.local/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</span><br><span class="line"><span class="built_in">export</span> WORKON_HOME=<span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"><span class="built_in">export</span> PROJECT_HOME=<span class="variable">$HOME</span>/Devel</span><br><span class="line"><span class="built_in">source</span> <span class="variable">$HOME</span>/.local/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure>

<p>로그아웃했다 로그인하면 <code>mkvirtualenv</code>, <code>rmvirtualenv</code> 등의 명령어 스크립이 설치된다.</p>
<h4 id="Jupyter-가상환경"><a href="#Jupyter-가상환경" class="headerlink" title="Jupyter 가상환경"></a>Jupyter 가상환경</h4><p>다음은 <code>mkvirtualenv</code> 명령으로 <em>jupyter</em>라는 가상환경을 <em>python3</em>, 시스템 패키지 사용을 위해 <em>–system-site-packages</em> 옵션으로 생성한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv -p python3 --system-site-packages jupyter</span><br><span class="line">(jupyter) $</span><br><span class="line">(jupyter) $ python --version</span><br><span class="line">Python 3.4.6</span><br></pre></td></tr></table></figure>

<p>가상환경 <em>jupyter</em> 에서 필수 모듈이 사용 가능한지 확인한다. 다음 두 모듈이 없으면 jupyter 설치가 제대로 안된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(jupyter) $ python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">1.9.3</span><br><span class="line">(jupyter) $ python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">0.16.0</span><br></pre></td></tr></table></figure>


<p>그리고 pip로 Jupyter 가상환경에 Jupyter를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)$ pip install jupyter </span><br></pre></td></tr></table></figure>

<blockquote>
<p>물론 가상환경이 아닌 시스템 패키지로 설치해도 된다.<br>$ sudo pip install jupyter geopandas osmnx</p>
</blockquote>
<p><code>jupyter-notebook</code>을 실행해 보고, 서버 관련 구성 내용을 설정해서 사용해 보자.</p>
<h5 id="Upgrade-jupyter"><a href="#Upgrade-jupyter" class="headerlink" title="Upgrade jupyter"></a>Upgrade jupyter</h5><p>여기서는 pip 가상머신을 이용하고 있어서 다음 같이 pip install 명령으로 업그레이드 할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)$ pip install -U jupyter</span><br></pre></td></tr></table></figure>

<p>virtualenv, virtualenvwrapper는 여기서 사용자 .local 환경에 설치했으므로 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U --user virtualenv virtualenvwrapper</span><br></pre></td></tr></table></figure>

<p>pip3 freeze —local &gt; requirements.txt</p>
<h4 id="서버로-실행"><a href="#서버로-실행" class="headerlink" title="서버로 실행"></a>서버로 실행</h4><p><code>jupyter-notebook</code> 은 로컬 머신에서 브라우저를 실행한다. 여기서는 원격 사용을 위해 다음 같이 시작할 수 있다. <code>[DIR]</code> 에 jupyter-notebook에서 작성한 노트북 파일이 저장된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter-notebook --no-browser --ip=* --port=8000 [DIR]</span><br><span class="line">[I 02:51:04.797 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 02:51:04.800 NotebookApp]</span><br><span class="line"></span><br><span class="line">    Copy/paste this URL into your browser when you connect for the first time,</span><br><span class="line">    to login with a token:</span><br><span class="line">        http://localhost:8585/?token=a747472bc9a7c6684829267d2ed0a4cd9a722e</span><br></pre></td></tr></table></figure>

<p>시작후 <code>?token=a.....</code> 부분의 토큰을 복사해 브라우저에 입력후 쥬피터 노트북 사용을 시작한다. 브라우저로 노트북에 접속해서 복사한 토큰을 입력한 후 로그인한다.</p>
<p><img src="/images/python/jupyter5-run.png">{:width&#x3D;”650”}</p>
<br>
### Jupyter 설정 이용

<p>jupyter는 설치된 후에 jupyter 시스템 디렉토리와 사용자 <strong>JUPYTER_DATA_DIR</strong>에 필요한 내용을 저장한다.</p>
<ul>
<li><strong>시스템 디렉토리</strong>: &#x2F;usr&#x2F;local&#x2F;share&#x2F;jupyter&#x2F;</li>
<li><strong>JUPYTER_DATA_DIR</strong> 는 보통 ~&#x2F;.jupyter</li>
</ul>
<p>설정 파일을 이용해서 사용자 비밀번호를 이용해 노트북을 사용할 수 있다.</p>
<p>먼저 실행중인 쥬피터 노트북에서 <code>passwd()</code> 를 실행해 <strong>패스워드 해시 값</strong>을 얻는다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">1</span>]: <span class="keyword">from</span> notebook.auth <span class="keyword">import</span> passwd</span><br><span class="line">In [<span class="number">2</span>]: passwd()</span><br><span class="line">Enter password:</span><br><span class="line">Verify password:</span><br><span class="line">Out[<span class="number">2</span>]: <span class="string">&#x27;sha1:67c9e60bb8b6:9ffede0825894254b2e043ea597d771089e11eed&#x27;</span></span><br></pre></td></tr></table></figure>

<p>패스워드 해시 값을 데이터 디렉토리의 설정 파일에 입력해야 한다.</p>
<h4 id="데이터-설정-파일"><a href="#데이터-설정-파일" class="headerlink" title="데이터 설정 파일"></a>데이터 설정 파일</h4><p>다음 같이 설정 파일을 생성해서 사용할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --generate-config</span><br><span class="line">Writing default config to: /home/foo/.jupyter/jupyter_notebook_config.py</span><br><span class="line">$ <span class="built_in">cd</span> .jupyter &amp;&amp; <span class="built_in">mv</span> jupyter_notebook_config.py mynotebook.py</span><br></pre></td></tr></table></figure>

<p><em>mynotebook.py</em>에 다음을 설정한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## The base URL for the notebook server.</span><br><span class="line">c.NotebookApp.base_url = &#x27;http://www.yourdomain.com/notebok&#x27;</span><br><span class="line">c.NotebookApp.password = &#x27;&#x27;</span><br><span class="line">c.NotebookApp.port = 8000</span><br><span class="line">c.NotebookApp.port_retries = 50</span><br></pre></td></tr></table></figure>

<p>복사한 패스워드 해시 값을 mynotebook.py 설정 파일 안의 <code>c.NotebookApp.password</code> 항목 주석을 풀고 해시 값을 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c.NotebookApp.password = &#x27;sha1:4ee6bb2da3d7:ed76216b87228540e5f5f20fcfa8069cf82686f0&#x27;</span><br></pre></td></tr></table></figure>

<p>설정 파일을 이용해 jupyter-notebook을 실행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook --config .jupyter/mybook_config.py [DIR]</span><br></pre></td></tr></table></figure>

<p>이제 jupyter에 접속하려면 다음 같이 패스워드를 묻고 입력한 후에 사용할 수 있다.</p>
<p><img src="/images/python/jupyter-login.png">{:width&#x3D;”650”}</p>
<h4 id="Background-실행"><a href="#Background-실행" class="headerlink" title="Background 실행"></a>Background 실행</h4><p>Jupyter-notebook을 백그라운드로 실행하려면 <code>nohup</code> 을 사용할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">nohup</span> jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>

<p>nohup은 재시동시 다시 시작해야 하는 불편한 점이 있다.</p>
<h4 id="crontab-으로-실행"><a href="#crontab-으로-실행" class="headerlink" title="crontab 으로 실행"></a>crontab 으로 실행</h4><p>nohup 과 결합해서 사용해도 좋은 방법으로 crontab 을 사용해 재시동 후 자동으로 시작해 줄 수 있다. 사용자 crontab 을 편집해 다음 같이 사용할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@reboot cd /home/foo; jnohup jupyter notebook --no-browser --ip=* --port=8000 [DIR] &gt; log-jupyter.log &amp;</span><br></pre></td></tr></table></figure>


<p>이 방법도 사용자가 시작&#x2F;상태확인&#x2F;종료 같은 직접적인 방법을 사용하기는 좀 불편하다.</p>
<p>그래서 upstart의 init.d 를 사용하거나 systemd 의 unit으로 생성해서 사용하는 것이 좋다.</p>
<h4 id="systemd-에서-실행"><a href="#systemd-에서-실행" class="headerlink" title="systemd 에서 실행"></a>systemd 에서 실행</h4><p>systemd unit으로 새로운 unit 파일을 생성해서 기존 <code>systemctl</code> 명령으로 시작&#x2F;상태&#x2F;종료&#x2F;재시작 등의 작업을 할 수 있다. 물론 재시동 관련해서도 완벽히 동작한다.</p>
<p>우선 jupyter-notebook 명령의 절대 경로를 찾아서 이 위치를 유닛 파일의 Exec 명령에 사용한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ which jupyter-notebook</span><br><span class="line">/home/foo/.local/bin/jupyter-notebook</span><br></pre></td></tr></table></figure>

<p>systemd의 unit 위치는 OS 마다 조금 다른 것 같다. 여기서는 <em>&#x2F;etc&#x2F;systemd&#x2F;system</em> 밑에 <em>jupyter.service</em> 라는 유닉 파일로 직접 작업한다.</p>
<ul>
<li>&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;jupyter.service</li>
</ul>
<p>가상환경을 사용하고 있으므로 systemd unit의 <code>ExecStart</code> 의 python도 가상환경 위치로 지정해 주어야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=My Jupyter-Notebook</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/run/jupyter-notebook.pid</span><br><span class="line">ExecStart=/home/foo/.local/bin/jupyter-notebook --config=/home/foo/.jupyter/mynotebook.py</span><br><span class="line">User=foo</span><br><span class="line">Group=foo</span><br><span class="line">WorkingDirectory=/home/foo/notebooks</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=10</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>그리고 시스템 유닛을 시작해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable jupyter.service</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart jupyter.service</span><br></pre></td></tr></table></figure>


<p>현재 서버의 열린 포트는 다음 같이 <code>netstat</code> 명령으로 확인이 가능하다. 세번째 컬럼 처럼 <code>127.0.0.1</code> 에 열리면 외부에서 접근이 안된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -tlnp</span><br><span class="line">tcp        0      0 127.0.0.1:8585          0.0.0.0:*              LISTEN      11906/python3</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -tlnp</span><br><span class="line">tcp        0      0 0.0.0.0:8585          0.0.0.0:*              LISTEN      11906/python3</span><br></pre></td></tr></table></figure>


<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/install.html">Pandas Install</a></li>
<li><a target="_blank" rel="noopener" href="https://www.scipy.org/install.html">Scipy Install</a></li>
<li><a target="_blank" rel="noopener" href="http://geoffboeing.com/2016/03/scientific-python-raspberry-pi/">Scientific Python on Raspberry Pi</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-10-21T00:00:00.000Z" title="2017-10-21 9:00:00">2017-10-21</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:45:06.575Z" title="2022-2-25 1:45:06">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Raspberry-Pi/">Raspberry Pi</a><span> / </span><a class="link-muted" href="/categories/Raspberry-Pi/Linux/">Linux</a></span><span class="level-item">17분안에 읽기 (약 2493 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/10/21/raspberrypi-2017-10-21-opensuse-jeos-nginxjupyter/">Raspberry Pi 3 64bit OS openSUSE: Nginx, Node JS, Jupyter </a></h1><div class="content"><p><strong>Raspberry Pi 3 64bit OS openSUSE</strong> 는 이글은 5개 글타래로 구성되며, openSUSE 설치, 개발도구 구성 및 서버 구축 사용에 대해 작성한다.</p>
<p>Opensuse 에서 Raspberry Pi 3를 위한 64bit OS openSESE Leap 42.2 을 제공하고 있다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://en.opensuse.org/HCL:Raspberry_Pi3">https://en.opensuse.org/HCL:Raspberry_Pi3</a></li>
</ul>
<ol>
<li><a href="!--swig%EF%BF%BC37--">Install 64bit openSUSE Leap 42.3 &#x2F; JeOS</a></li>
<li>openSUSE: Managing Service daemon</li>
<li>openSUSE: Basic OS Security for Server</li>
<li><strong>Install &amp; Configuration - Nginx, Node JS, Jupyter</strong></li>
<li>Build MongoDB 3.4.x</li>
</ol>
<h2 id="Nginx-Node-JS-Jupyter-Notebook"><a href="#Nginx-Node-JS-Jupyter-Notebook" class="headerlink" title="Nginx, Node JS, Jupyter Notebook"></a>Nginx, Node JS, Jupyter Notebook</h2><ul>
<li>Raspberry Pi 3</li>
<li>openSUSE LEAP 42.2 &#x2F; JeOS</li>
</ul>
<p>Target services</p>
<ul>
<li>Nginx</li>
<li>Nginx Proxy<ul>
<li>www app : nodejs (PORT 50000)</li>
<li>jupyter notebook: PORT 8585</li>
</ul>
</li>
<li>Node.js with nvm</li>
<li>Python and virtualenv, jupyter notebook</li>
</ul>
<h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p>nginx는 1.8 버전으로 당연히 사용하던 데비안 계열과 설정 파일 구성이 조금 다르다.</p>
<ul>
<li>nginx 사용자: nginx</li>
<li>&#x2F;etc&#x2F;nginx&#x2F;nginx.conf 가 sites-_ 폴더가 아닌 vhost_ 폴더를 가르킨다.<ul>
<li>여기서는 sites-* 폴더를 그대로 사용한다.</li>
</ul>
</li>
<li>기존 데비안 계열 형식 <code>sites-*</code> 폴더를 사용하고 사용자먄 <code>nginx</code> 사용.</li>
</ul>
<h4 id="설치"><a href="#설치" class="headerlink" title="설치"></a>설치</h4><p>zypper 로 nginx 배포본을 설치한다. 현재는 1.8.1-10.5.1 버전이다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> nginx</span><br></pre></td></tr></table></figure>

<p>설치하면 사용자 <em>nginx:nginx</em> 가 추가된다.</p>
<h4 id="nginx-conf"><a href="#nginx-conf" class="headerlink" title="nginx.conf"></a>nginx.conf</h4><p>nginx 설정은 <a href="!--swig%EF%BF%BC38--">Nginx - Install, WebDAV, Proxy on Ubuntu&#x2F;Debian</a> 에 설명되어 있다. 이 구성을 기초로 우분투&#x2F;데비안 계열 같이 <code>site-*</code> 폴더를 구성해서 사용한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx</span><br><span class="line"><span class="built_in">mv</span> nginx.conf nginx.orig</span><br></pre></td></tr></table></figure>

<p>nginx.conf 에 include 지시자를 사용해 <em>sites-enabled</em> 를 추가한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">include /etc/nginx/conf.d/*.conf;</span><br><span class="line">include /etc/nginx/sites-enabled/*;</span><br></pre></td></tr></table></figure>

<p>그리고 <code>sites-available</code>, <code>sites-enabled</code> 폴더를 생성하고 사이트 파일을 만든다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx</span><br><span class="line">sudo <span class="built_in">mkdir</span> sites-available sites-enabled</span><br><span class="line">sudo <span class="built_in">touch</span> sites-available/my-site</span><br></pre></td></tr></table></figure>

<p>my-site 가상호스트 파일은 [my-site](&#x2F;2017&#x2F;04&#x2F;03&#x2F;ubuntu-nginx#my-site) 내용의 파일을 site-available 에 작성하고, 그 링크를 site-enabled에 링크를 걸어 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx</span><br><span class="line">sudo -s /etc/nginx/sites-available/my-site /etc/nginx/sites-enabled/my-site</span><br></pre></td></tr></table></figure>

<br>
<br>
### node.js

<p>nvm을 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.6/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>Node.js 설치와 개발환경 설치에 대해서는 <a href="!--swig%EF%BF%BC40--">NodeJS &#x2F; nvm 기반 개발환경 설치</a> 글을 참조할 수 있다.</p>
<h4 id="node-js-설치"><a href="#node-js-설치" class="headerlink" title="node.js 설치"></a>node.js 설치</h4><p>최신 v8 버전을 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; nvm install v8</span><br><span class="line">Downloading and installing node v8.8.1...</span><br><span class="line">Creating default alias: default -&gt; v8 (-&gt; v8.8.1)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; which node</span><br><span class="line">/home/qkboo/.nvm/versions/node/v8.8.1/bin/node</span><br></pre></td></tr></table></figure>

<h4 id="pm2-설치"><a href="#pm2-설치" class="headerlink" title="pm2 설치"></a>pm2 설치</h4><p>node.js 앱을 시스템 서비스로 등록하기 위해서 <strong>pm2</strong> 를 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g pm2</span><br></pre></td></tr></table></figure>

<p>예를 들어 express 앱이 있으면 다음 같이 pm2로 시작한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd www-app</span><br><span class="line">pm2 start -n &quot;www-app&quot; bin/www</span><br></pre></td></tr></table></figure>

<h4 id="pm2-startup"><a href="#pm2-startup" class="headerlink" title="pm2 startup"></a>pm2 startup</h4><p>startup 시 pm2 start 로 생성되는 .pm2 디렉토리의 pid 와 app.js 파일을 실행해 준다.</p>
<p>pm2 startup systemd 로 스타트를 하면 2개의 프로세스가 만들어 진다.</p>
<p>방법은,,,</p>
<ol>
<li>먼저 앱을 시작해 둔다.</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start -n <span class="string">&quot;www-app&quot;</span> bin/www</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>dump를 생성한다.</li>
</ol>
<p>pm2로 현재 실행중인 프로세스 정보를 <code>save</code>로 덤프하게 저장한다. <code>systemd</code> 서비스 스크립을 작성하는데 유용하다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 save</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>pm2 startup 명령</li>
</ol>
<p><code>pm2 startup</code> 명령은 pm2로 실행중인 프로세스를 systemd 서비스 유니트 파일로 제어 할 수 있다. 명령을 실행하면 <code>sudo</code> 명령으로 실행할 수 있는 스크립을 출력해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ pm2 startup systemd</span><br><span class="line">...</span><br><span class="line">sudo <span class="built_in">env</span> PATH=<span class="variable">$PATH</span>:/home/foo/.nvm/versions/node/v8.8.1/bin /home/foo/.nvm/versions/node/v8.8.1/lib/node_modules/pm2/bin/pm2 startup systemd -u foo --hp /home/foo</span><br></pre></td></tr></table></figure>

<p>이 스크립을 실행해 주면 <strong>pm2-foo.service</strong> 서비스 유니 파일이 생성된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Target path</span><br><span class="line">/etc/systemd/system/pm2-foo.service</span><br></pre></td></tr></table></figure>

<p>이 서비스 파일을 활성화하고 시작해준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> pm2-foo</span><br></pre></td></tr></table></figure>

<p>이제 시스템을 재시작해도 pm2 로 실행중인 프로세스는 자동으로 시작된다.</p>
<br>
<br>
### Python

<p>Python 개발 환경을 virtualenv 를 이용해서 구성하고, jupyter 를 설치한다. 그리고 시스템 시작 스크립으로 자동으로 시작하는 jupyter notebook 환경 구성까지 진행한다.</p>
<h4 id="python3-설치"><a href="#python3-설치" class="headerlink" title="python3 설치"></a>python3 설치</h4><p>openSUSE에 python2.7 만 설치되어 있어서, python3 를 설치한다. 다른 버전을 설치하면 openSUSE에서는 자동으로 update-alternatives로 <code>pip</code>를 등록해준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> python3</span><br><span class="line"></span><br><span class="line">update-alternatives: using /usr/bin/pip3.4 to provide /usr/bin/pip (pip) <span class="keyword">in</span> auto mode</span><br></pre></td></tr></table></figure>

<h4 id="개발자-패키지-설치"><a href="#개발자-패키지-설치" class="headerlink" title="개발자 패키지 설치"></a>개발자 패키지 설치</h4><p>jupyter 등 개발, 서버 개발에 필요한 시스템 개발도구를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> devel_basis</span><br></pre></td></tr></table></figure>

<p>파이썬 개발과 패키지등에서 필요한 파이썬 헤더를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> python3-devel python-devel</span><br></pre></td></tr></table></figure>

<p>jupyter에서 필요한 zmq 라이브러리를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> python-distutils-extra libczmq3 libgdal20</span><br></pre></td></tr></table></figure>

<ul>
<li>libzmq3 : jupyter 에서 필요</li>
<li>libgdal : geospatial analysis with geopandas.</li>
</ul>
<p><strong>openSUSE 에서</strong>는 curses 관련 파이썬 모듈을 설치해야 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> python-curses python3-curses</span><br></pre></td></tr></table></figure>

<ul>
<li>python-curses: Python이 (N)Curses Libr에 대한 인터페이스이다</li>
</ul>
<h4 id="virtualenv"><a href="#virtualenv" class="headerlink" title="virtualenv"></a>virtualenv</h4><p><code>pip</code> 로 user scheme 에서 설치했다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --user virtualenv virtualenvwrapper</span><br></pre></td></tr></table></figure>

<h4 id="Scientific-과-Pandas-개발환경"><a href="#Scientific-과-Pandas-개발환경" class="headerlink" title="Scientific 과 Pandas 개발환경"></a>Scientific 과 Pandas 개발환경</h4><p>사용하려는 Python 버전에 따라 혹은 모두 아래 과학계산용 모듈을 시스템 패키지로 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo zypper <span class="keyword">in</span> python-decorator python-numpy python-scipy python-matplotlib</span><br><span class="line">sudo zypper <span class="keyword">in</span> python3-decorator python3-numpy python3-scipy python3-matplotlib</span><br><span class="line">sudo zypper <span class="keyword">in</span> python3-sympy python3-nose</span><br></pre></td></tr></table></figure>

<blockquote>
<p>라즈베피라이, 오드로이드 등 환경에서 pip로 위 모듈을 설치시 시간이 많이 걸린다.</p>
<blockquote>
<p>pip install –user pandas decorator numpy scipy matplotlib sympy nose<br>그래서 시스템 패키지로 설치했다.</p>
</blockquote>
</blockquote>
<p>겨로가적으로 앞선 scipy, matplotlib 설치하며 아래 모듈이 의존성에 따라 함게 설치된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3-requests python3-pil python3-scrapy python3-geopy python3-shapely python3-pyproj</span><br></pre></td></tr></table></figure>

<h3 id="Jupyter-Notebook"><a href="#Jupyter-Notebook" class="headerlink" title="Jupyter Notebook"></a>Jupyter Notebook</h3><p>Jupyter notebook 으로 파이선, typescript, javascript, c&#x2F;c++ 등의 IDE 역할을 할 수 있다. 도한 Markdown 을 지원해서 문서화에도 휼륭한 플랫폼이다.</p>
<h4 id="jupyter-가상환경-만들기"><a href="#jupyter-가상환경-만들기" class="headerlink" title="jupyter 가상환경 만들기"></a><em>jupyter</em> 가상환경 만들기</h4><p><code>mkvirtualenv</code> 명령으로 <em>jupyter</em> 라는 가상환경을 만드는데, 과학계산용 라이브러리를 시스템 패키지로 설치했으므로 여기서는 가상환경 생성시 시스템 패키지를 함께 참조하도록 생성한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv -p python3 --system-site-packages jupyter</span><br><span class="line">(jupyter) $</span><br></pre></td></tr></table></figure>

<p>가상환경에서 파이썬 버전을 확인하고 과학계산 개발 등에 필요한 라이브러리가 설치됐는지 확인하자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(jupyter) $ python --version</span><br><span class="line">Python 3.4.6</span><br></pre></td></tr></table></figure>

<p>필수 모듈이 설치되고 사용이 가능한지 확인한다. 버전 정보가 출력되면 관련 라이브러리가 제대로 설치되었고 가상환경에서 잘 접근되는 것이다. 다음 두 모듈이 없으면 jupyter 설치가 제대로 안된다.</p>
<blockquote>
<p>설치가 안되었으면 앞의 파이썬 개발자 패키지 설치 단락을 확인한다.</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">1.9.3</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import numpy;print(numpy.__version__)&quot;</span></span><br><span class="line">0.16.0</span><br></pre></td></tr></table></figure>

<p>그리고 Jupyter 가상환경에서 <code>pip</code> 로 <strong>Jupyter</strong>를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)$ pip install jupyter</span><br></pre></td></tr></table></figure>

<p>주피커 노트북 파일이 저장되는 위치가 <code>iPython</code> 디렉토리라고 하면 아래 같이 시작할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)$ jupyter-notebook --no-browser --ip=* --port=8000 ./iPython</span><br></pre></td></tr></table></figure>

<p>옵션은</p>
<ul>
<li><code>--no-browser</code> : 로컬 브라우저는 시작하지 않는다.</li>
<li><code>--ip</code> : 접속 가능 <code>*</code>는 모든 곳에서 접근 가능</li>
<li><code>--port</code>:</li>
</ul>
<p>이런 시작 구성을 설정 파일을 이용해서 저장할 수 있고 이 파일을 이용해서 시작하는 것을 권장한다.</p>
<h4 id="Jupyter-설정-파일-이용"><a href="#Jupyter-설정-파일-이용" class="headerlink" title="Jupyter 설정 파일 이용"></a>Jupyter 설정 파일 이용</h4><p>사용자 <strong>JUPYTER_DATA_DIR</strong> 인 홈 디렉토리 밑 <code>~/.jupyter</code> 에 설정 파일을 구성해야 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(jupyter)$ jupyter notebook --generate-config</span><br><span class="line">(jupyter)$ <span class="built_in">cd</span> .jupyter &amp;&amp; <span class="built_in">mv</span> jupyter_notebook_config.py mynotebook.py</span><br></pre></td></tr></table></figure>

<h4 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h4><p>jupyter notebook을 시스템 서비스로 등록해 보자. <code>jupyter.service</code>라는 시스템 서비스 파일을 <code>/etc/systemd/system/jupyter.service</code> 에 생성하고 아래 내용을 입력한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=HomePi Jupyter-Notebook</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/run/homepi-jupyter.pid</span><br><span class="line">ExecStart=/home/foo/.virtualenvs/jupyter/bin/jupyter-notebook --config=/home/foo/.jupyter/mybook_config.py</span><br><span class="line">User=qkboo</span><br><span class="line">Group=users</span><br><span class="line">WorkingDirectory=/home/foo/iPython</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=10</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>그리고 이 시스템 서비스 파이을 활성화하고 시작한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> jupyter.service</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart jupyter.service</span><br></pre></td></tr></table></figure>

<h4 id="Typescript-kernel"><a href="#Typescript-kernel" class="headerlink" title="Typescript kernel"></a>Typescript kernel</h4><p>jupyter notebook에서 Typescript 을 작성하고 컴파일한 결과를 확인할 수 있다.</p>
<p>먼저 Nodejs용 itypescript 모듈을 global로 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g itypescript</span><br></pre></td></tr></table></figure>

<p>its 명령으로 Jupyter kenel로 설치해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">its --ts-install=<span class="built_in">local</span></span><br></pre></td></tr></table></figure>

<h3 id="Jupyter-notebook-Nginx-설정"><a href="#Jupyter-notebook-Nginx-설정" class="headerlink" title="Jupyter-notebook Nginx 설정"></a>Jupyter-notebook Nginx 설정</h3><p>Jupyter-notebook 을 nginx 뒤에서 실행시 아래 같은 동작이 반복적으로 보이이면</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[I 19:26:48.843 NotebookApp] Adapting to protocol v5.1 for kernel 97e659cd-0509-4f56-878e-10e2c31803e2</span><br><span class="line">[I 19:26:48.853 NotebookApp] Restoring connection for 97e659cd-0509-4f56-878e-10e2c31803e2:b4d78dff5dff4563b0e5fc7195fefca1</span><br><span class="line">[I 19:26:48.881 NotebookApp] Starting buffering for 97e659cd-0509-4f56-878e-10e2c31803e2:b4d78dff5dff4563b0e5fc7195fefca1</span><br><span class="line">[I 19:26:51.904 NotebookApp] Adapting to protocol v5.1 for kernel 97e659cd-0509-4f56-878e-10e2c31803e2</span><br><span class="line">[W 19:26:51.930 NotebookApp] Replacing stale connection: 97e659cd-0509-4f56-878e-10e2c31803e2:b4d78dff5dff4563b0e5fc7195fefca1</span><br><span class="line">[W 19:26:51.957 NotebookApp] Replacing stale connection: 97e659cd-0509-4f56-878e-10e2c31803e2:b4d78dff5dff4563b0e5fc7195fefca1</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/42350182/jupyter-notebook-keeps-reconnecting-to-kernel">jupyter-notebook-keeps-reconnecting</a> 설명 처럼 nginx proxy 에서 http 버전을 명시해 준다.</p>
<p>If you are using jupyter behind a nginx proxy, this post may be effective.</p>
<p>Add this line to nginx conf.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_http_version 1.1;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html">http_proxy_module</a> 에 따르면 keepalive 를 사용하기 위해서 1.1 버전을 꼭 사용해야 할 것 같다.</p>
<blockquote>
<p>Sets the HTTP protocol version for proxying. By default, version 1.0 is used. Version 1.1 is recommended for use with keepalive connections and NTLM authentication.</p>
</blockquote>
<p>참조용 jupyter-notebook conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">upstream my-notebook-workhorse &#123;</span><br><span class="line">  server 127.0.0.1:8888 fail_timeout=0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">map $http_upgrade $connection_upgrade &#123;</span><br><span class="line">    default upgrade;</span><br><span class="line">    &#x27;&#x27; close;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># let my-notebook deal with the redirection</span><br><span class="line">server &#123;</span><br><span class="line">  listen                    80;</span><br><span class="line">  server_name               my-notebook.wh;</span><br><span class="line">  server_tokens             off;</span><br><span class="line">  root                      /dev/null;</span><br><span class="line"></span><br><span class="line">  # Increase this if you want to upload larger attachments</span><br><span class="line">  client_max_body_size      20m;</span><br><span class="line"></span><br><span class="line">  # individual nginx logs for this vhost</span><br><span class="line">  access_log                /var/log/nginx/my-notebook_access.log;</span><br><span class="line">  error_log                 /var/log/nginx/my-notebook_error.log;</span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://my-notebook-workhorse;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Forwarded_For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header X-NginX-Proxy true;</span><br><span class="line">    auth_basic &quot;Restricted Content&quot;;</span><br><span class="line"></span><br><span class="line">    # WebSocket support</span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection $connection_upgrade;</span><br><span class="line">    proxy_set_header Origin &quot;&quot;;</span><br><span class="line">    proxy_read_timeout 86400;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.howtoforge.com/tutorial/how-to-deploy-nodejs-applications-with-pm2-and-nginx-on-ubuntu/">How to deploy nodejs app with pm2</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-03T04:00:00.000Z" title="2017-4-3 13:00:00">2017-04-03</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:20:33.416Z" title="2022-2-25 6:20:33">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">7분안에 읽기 (약 1055 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/04/03/python-2017-04-03-virtualenv-mac/">Python - Install virtualenv on macOS X</a></h1><div class="content"><p>Python 개발환경을 위해서 macOS에 설치된 python2.7 그리고 brew 같은 유틸리티로 python3.x 를 설치하고, <code>pip</code>를 사용해서 패키지를 관리할 수 있다. 그리고 다양한 모듈과 시스템 모듈의 분리를 위해서 버전 관리 도구인 <code>virtualenv</code>와 <code>virtualenvwrapper</code> 를 사용해 가상 개발 환경을 구성하는 방법을 설명한다.</p>
<br/>

<h2 id="macOS에서-Python-virtualenv-개발환경-구축하기"><a href="#macOS에서-Python-virtualenv-개발환경-구축하기" class="headerlink" title="macOS에서 Python virtualenv 개발환경 구축하기"></a>macOS에서 Python virtualenv 개발환경 구축하기</h2><p>macOS 에는 python2.6, python2.7이 설치되어 있다. python3를 설치하려면 HomeBrew, MacPort 같은 시스템 유틸리티 관리자를 이용한다. 여기서는 HomeBrew 를 사용했다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install python3</span><br></pre></td></tr></table></figure>

<h3 id="사전-준비"><a href="#사전-준비" class="headerlink" title="사전 준비"></a>사전 준비</h3><p>파이썬 패키지 도구인 <strong>pip</strong>(Python Package Index, PyPI)는 파이썬 모듈을 검색, 설치, 관리 할 수 있다.<br>설치된 <em>python</em> 버전에 따라 <code>pip</code>가 설치되어 있다. brew로 <code>python3</code>를 설치하면 <code>pip3</code> 버전이 설치된다. <code>pip --version</code> 버전 정보를 출력하면 버전과 <em>site-packages</em> 위치를 확인할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ pip --version</span><br><span class="line">pip 7.1.2 from /Library/Python/2.7/site-packages (python 2.7)</span><br><span class="line">$ pip3 --version</span><br><span class="line">pip 9.0.1 from /usr/local/lib/python3.6/site-packages (python 3.6)</span><br></pre></td></tr></table></figure>

<h4 id="site-packages"><a href="#site-packages" class="headerlink" title="site-packages"></a>site-packages</h4><p><code>pip</code> 로 설치되는 패키지 모듈은 시스템의 <em>site-packages</em> 폴더에 설치된다. </p>
<ul>
<li>python2.7은 &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages</li>
<li>python3.4는 &#x2F;usr&#x2F;lib&#x2F;python3.4&#x2F;site-packages</li>
</ul>
<p>그래서 시스템에 설치된 <code>pip</code>는 <code>sudo</code>로 설치한다.</p>
<p><code>brew</code>로 설치한 python3의 pip3는 사용자 환경에서 접근이 가능해서 sudo 없이 설치해도 된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pip install --upgrade pip</span><br><span class="line">$ pip3 install --upgrade pip3.6</span><br></pre></td></tr></table></figure>

<p>이후는 특별히 버전을 명시하지 않으면 <code>pip</code>는 <strong>pip3.6</strong>을 사용한다고 가정한다. </p>
<br/>

<h3 id="Python-가상-개발-환경-설치"><a href="#Python-가상-개발-환경-설치" class="headerlink" title="Python 가상 개발 환경 설치"></a>Python 가상 개발 환경 설치</h3><p>앞서 언급한데로 개발을 위해 site-package 모듈을 유지하고 개발을 위해 설치하는 패키지 모듈을 python 버전에 의존해 관리하는 버전 관리자로 <code>pyenv</code>, <code>virtualenv</code> 같은 버전 관리자를 사용한다. 버전 관리자는 사용자 환경에 시스템 모듈을 복사해 새로 설치되는 모듈을 기존 시스템 버전과 혼동되지 않게 해준다.</p>
<h4 id="virtualenv와-virtualenvwrapper"><a href="#virtualenv와-virtualenvwrapper" class="headerlink" title="virtualenv와 virtualenvwrapper"></a>virtualenv와 virtualenvwrapper</h4><p>여기서 <code>pip</code>로 <code>virtualenv</code>와 <code>virtualenvwrapper</code>를 설치한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip3.6 install virtualenv</span><br><span class="line">$ pip3.6 install virtualenvwrapper</span><br></pre></td></tr></table></figure>

<p>쉘 프로파일 <code>.bashrc</code>, <code>.profile</code> 등에 다음 라인을 추가한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> WORKON_HOME=<span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"><span class="built_in">export</span> PROJECT_HOME=<span class="variable">$HOME</span>/Devel</span><br><span class="line"><span class="built_in">source</span> /usr/local/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure>

<p>그리고 쉘 환경을 로딩하기 위해서 다시 로그인 하거나 다음 같이 source 명령을 이용하면 아래 같이 virtualenvwrapper 에서 제공하는 환경변수가 설정된다.</p>
<p>아래는 <code>source</code> 명령으로 .profile을 컴파일한 결과를 보여준다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> .profile</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/premkproject</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postmkproject</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/initialize</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/premkvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postmkvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/prermvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postrmvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/predeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postdeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/preactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/get_env_details</span><br></pre></td></tr></table></figure>


<p>다음 같이 에러가 발생하면 쉘에 VIRTUALENVWRAPPER_PYTHON 를 추가해 준다.</p>
<blockquote>
<p>&#x2F;usr&#x2F;bin&#x2F;python: No module named virtualenvwrapper<br>virtualenvwrapper.sh: There was a problem running the initialization hooks.</p>
<p>If Python could not import the module virtualenvwrapper.hook_loader,<br>check that virtualenvwrapper has been installed for<br>VIRTUALENVWRAPPER_PYTHON&#x3D;&#x2F;usr&#x2F;bin&#x2F;python and that PATH is</p>
</blockquote>
<h4 id="점검"><a href="#점검" class="headerlink" title="점검"></a>점검</h4><p>I then search for the location of virtualenv and virtualenv wrapper to confirm their locations:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 show virtualenv</span><br><span class="line">Location: /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 show virtualenvwrapper</span><br><span class="line">Location: /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages</span><br></pre></td></tr></table></figure>


<h4 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick-Start"></a>Quick-Start</h4><p>새로운 가상환경은 <code>mkvirtualenv NAME</code> 명령으로 만든다. 가상환경으로 전환시 프롬프트가 <code>(NAME) $</code> 형태로 표시된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv django2   <span class="comment">#기본 python 버전의 환경 생성</span></span><br><span class="line">...</span><br><span class="line">(django2):~$               <span class="comment"># 실행 가상 환경 쉘</span></span><br></pre></td></tr></table></figure>

<p><code>mkvirtualenv</code> 명령은 <code>-p</code> 옵션으로 파이썬 버전을 명시할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv -p python3 django3</span><br></pre></td></tr></table></figure>

<p><code>--system-site-packages</code> 옵션은 site-package 시스템 버전을 사용하게 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv --system-site-packages -p python3 django3</span><br></pre></td></tr></table></figure>


<p><code>workon NAME</code> 명령으로 설치한 가상 환경 목록을 보거나 혹은 해당 가상환경으로 전환할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ workon </span><br><span class="line">django2 django3</span><br><span class="line">$ workon django3</span><br><span class="line">...</span><br><span class="line">(django3):~$</span><br></pre></td></tr></table></figure>


<p>프로젝트 환경을 빠져 나오려면 <code>deactivate</code>를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(django3):~$ deactivate</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-03T00:00:00.000Z" title="2017-4-3 9:00:00">2017-04-03</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T21:19:11.807Z" title="2022-2-25 6:19:11">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">9분안에 읽기 (약 1411 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/04/03/python-2017-04-03-virtualenv-linux/">Python - Install virtualenv on Linux</a></h1><div class="content"><p>Python 개발환경을 위해서 시스템에 설치된 python2.7, python3.x 에서 사용하는 패키지 모듈을 <code>pip</code>를 사용해서 패키지를 관리할 수 있다. 그리고 시스템 모듈과 별도의 버전 환경으로 버전 관리 도구인 <code>virtualenv</code>와 <code>virtualenvwrapper</code> 를 사용해 파이썬 가상 개발 환경을 구성하는 방법을 설명한다.</p>
<br/>

<h2 id="Python-virtualenv-개발환경-구축하기"><a href="#Python-virtualenv-개발환경-구축하기" class="headerlink" title="Python virtualenv 개발환경 구축하기"></a>Python virtualenv 개발환경 구축하기</h2><p>최근 리눅스 배포본은 python2.7, python3.x 버전이 내장되어 있다.</p>
<ul>
<li>raspbian-wheezy에는 Python 2.7과 Python 3.2가 설치되어 있다</li>
<li>raspbian jessie에는 Python 2.7과 Python 3.3이 설치되어 있다.</li>
<li>armbian Debian Jessie, Ubuntu Xenial 에도 Python 2.7과 Python3.3 이 설치되어 있다.</li>
</ul>
<p>파이썬 개발환경은 <code>virtualenv</code> 를 기반으로 사용하는 것을 권장한다. 그리고 가상 개발 환경은,</p>
<ul>
<li>시스템 개발자 모듈 설치</li>
<li>시스템 Python pip 설치</li>
<li>pip에서 시스템 Python virtualenv, virtualenvwrapper 설치</li>
<li>가상환경 만들기</li>
</ul>
<p>순서로 구성할 수 있다.</p>
<h3 id="Python-가상-개발-환경-설치"><a href="#Python-가상-개발-환경-설치" class="headerlink" title="Python 가상 개발 환경 설치"></a>Python 가상 개발 환경 설치</h3><p>다양한 파이썬 버전을 위해 환경 구성을 해주는 유틸리티.</p>
<ul>
<li><p><strong>pyenv</strong> : “Simple Python Version Management”, 로컬에 다양한 파이썬 버전을 설치하고 사용할 수 있도록 한다. pyenv를 사용함으로써 파이썬 버전에 대한 의존성을 해결할 수 있다.</p>
</li>
<li><p><strong>virtualenv</strong> : “Virtual Python Environment builder”, 로컬에 다양한 파이썬 환경을 구축하고 사용할 수 있도록 한다. 일반적으로 Python Packages라고 부르는 ( pip install을 통해서 설치하는 ) 패키지들에 대한 의존성을 해결할 수 있다.</p>
</li>
<li><p><strong>autoenv</strong> : 만약 pyenv와 virtualenv를 통해서 의존성을 해결한다고 하더라도 작업할때마다 설정해주는 것은 귀찮은 작업이다. 특정 프로젝트 폴더로 들어가면 자동으로 개발 환경을 설정해주는 autoenv라는 스크립트를 활용할 수 있다.</p>
</li>
</ul>
<h4 id="pyenv"><a href="#pyenv" class="headerlink" title="pyenv"></a>pyenv</h4><p><a target="_blank" rel="noopener" href="http://pythonstudy.xyz/python/article/506-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD">http://pythonstudy.xyz/python/article/506-파이썬-가상환경</a></p>
<p>여기서는 <code>virtualenv</code>와 <code>virtualenvwrapper</code>를 사용해서 모듈을 설치하고 관리한다. <code>pip</code> 모듈을 사용해서 virtualenv 와 virtualenvwrapper 를 설치한다.</p>
<h4 id="virtualenv-단독-사용"><a href="#virtualenv-단독-사용" class="headerlink" title="virtualenv 단독 사용"></a>virtualenv 단독 사용</h4><p>다음 참조. <a target="_blank" rel="noopener" href="http://dgkim5360.tistory.com/entry/python-virtualenv-on-linux-ubuntu-and-windows">http://dgkim5360.tistory.com/entry/python-virtualenv-on-linux-ubuntu-and-windows</a></p>
<p><code>virtualenv</code>는 가상환경이 설치된 위치로 이동해서, 설치한 폴더에서 <code>source</code> 명령을 통해 환경을 활성화해야 한다. 이런 점을 보완해 쉘 명령을 제공하는 <code>virtualenvwrapper</code>와 함께 쓰는 것을 권한다.</p>
<p>여기서는 <code>pip</code>로 <code>virtualenv</code>와 <code>virtualenvwrapper</code>를 설치해서 사용한다.</p>
<h4 id="virtualenv와-virtualenvwrapper"><a href="#virtualenv와-virtualenvwrapper" class="headerlink" title="virtualenv와 virtualenvwrapper"></a>virtualenv와 virtualenvwrapper</h4><p>virtualenv는 가상의 파이썬 작업환경을 만들어 준다. 작업환경을 따로따로 만들어, 시스템 파이썬 모듈이나 다른 가상의 작업환경에게 영향을 주지 않는다. 또한 <code>pip</code>는 시스템의 site-packages 폴더 &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages에 모듈을 설치하는데 virtualenv를 이용하면 분리할 수 있다.</p>
<p>이제 <code>pip</code>로 <code>virtualenv</code>와 <code>virtualenvwrapper</code>를 설치한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install virtualenv</span><br><span class="line">$ pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure>

<p><code>virtualenvwrapper</code>는 <code>virtualenv</code> 통합 환경을 쉽게 다룰 수 있게 해준다. 쉘 프로파일 <code>.bashrc</code>, <code>.profile</code> 등에 다음 라인을 추가한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> WORKON_HOME=<span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"><span class="built_in">export</span> PROJECT_HOME=<span class="variable">$HOME</span>/Devel</span><br><span class="line"><span class="built_in">source</span> /usr/local/bin/virtualenvwrapper.sh</span><br></pre></td></tr></table></figure>

<p>그리고 쉘 환경을 로딩하기 위해서 다시 로그인 하거나 다음 같이 source 명령을 이용해도 좋다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> .profile</span><br><span class="line">ebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent</span><br><span class="line">permitted by applicable law.</span><br><span class="line">Last login: Fri Oct 23 18:17:41 2015 from 192.168.219.103</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/premkproject</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postmkproject</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/initialize</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/premkvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postmkvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/prermvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postrmvirtualenv</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/predeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postdeactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/preactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/postactivate</span><br><span class="line">virtualenvwrapper.user_scripts creating /home/pi/.virtualenvs/get_env_details</span><br></pre></td></tr></table></figure>


<p>다음 에러가 발생하면 쉘에 VIRTUALENVWRAPPER_PYTHON 를 추가해 준다.</p>
<blockquote>
<p>&#x2F;usr&#x2F;bin&#x2F;python: No module named virtualenvwrapper<br>virtualenvwrapper.sh: There was a problem running the initialization hooks.</p>
<p>If Python could not import the module virtualenvwrapper.hook_loader,<br>check that virtualenvwrapper has been installed for<br>VIRTUALENVWRAPPER_PYTHON&#x3D;&#x2F;usr&#x2F;bin&#x2F;python and that PATH is</p>
</blockquote>
<h4 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick-Start"></a>Quick-Start</h4><p>새로운 가상환경은 <code>mkvirtualenv</code> 명령으로 만든다. 가상환경으로 전환시 프롬프트가 <code>(NAME) $</code> 형태로 표시된다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv django2   <span class="comment">#기본 python 버전의 환경 생성</span></span><br><span class="line">...</span><br><span class="line">(django2):~$               <span class="comment"># 실행 가상 환경 쉘</span></span><br></pre></td></tr></table></figure>

<p><code>mkvirtualenv</code> 명령은 <code>-p</code> 옵션으로 파이썬 버전을 명시할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv -p python3 django3</span><br></pre></td></tr></table></figure>

<p><code>--system-site-packages</code> 옵션은 site-package 시스템 버전을 사용하게 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv --system-site-packages -p python3 django3</span><br></pre></td></tr></table></figure>


<p><strong>workon</strong> 명령으로 설치한 가상 환경 목록을 보거나 혹은 해당 가상환경으로 전환할 수 있다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ workon </span><br><span class="line">django2 django3</span><br><span class="line">$ workon django3</span><br><span class="line">...</span><br><span class="line">(django3):~$</span><br></pre></td></tr></table></figure>


<p>프로젝트 환경을 빠져 나오려면 <code>deactivate</code>를 실행한다.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(django3):~$ deactivate</span><br></pre></td></tr></table></figure>

<h4 id="가상환경-복사하기"><a href="#가상환경-복사하기" class="headerlink" title="가상환경 복사하기"></a>가상환경 복사하기</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cpvirtualenv django3 new_djang4</span><br><span class="line">$ rmvirtualenv django3</span><br></pre></td></tr></table></figure>


<h3 id="pyvenv"><a href="#pyvenv" class="headerlink" title="pyvenv"></a>pyvenv</h3><p>3.3에서부터 pyvenv에 기본으로 설치되어 있다. 다만 3.3에서는 pip를 가상 환경을 만들 때마다 설치해주어야 한다. 3.4에서는 pip까지 기본으로 설치되어 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> django_tests</span><br><span class="line">$ <span class="built_in">cd</span> django_tests</span><br><span class="line">$ pyvenv-3.4 <span class="built_in">env</span></span><br><span class="line">$ <span class="built_in">source</span> <span class="built_in">env</span>/bin/activate   <span class="comment"># env의 파이썬 활성화</span></span><br><span class="line">(<span class="built_in">env</span>)$ deactivate           <span class="comment"># 시스템 파이썬으로 복귀</span></span><br></pre></td></tr></table></figure>


<h3 id="System-service"><a href="#System-service" class="headerlink" title="System service"></a>System service</h3><p>Virtualevn 환경을 시스템 시작 스크립, 크론, 파이썬 스크립에서 사용하려면 해당 가상 환경 위치의 python 혹은 가상환경의 jupyter-notebook 같은 명령 위치를 지정하면 된다.</p>
<p><a target="_blank" rel="noopener" href="https://serverfault.com/questions/821575/systemd-run-a-python-script-at-startup-virtualenv">https://serverfault.com/questions/821575/systemd-run-a-python-script-at-startup-virtualenv</a></p>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><p><a target="_blank" rel="noopener" href="https://virtualenvwrapper.readthedocs.io/en/latest/">virtualenvwrapper</a></p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/qkboo_400.png" alt="Gangtai"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Gangtai</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Paju, South Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">56</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">15</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">103</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/thinkbee" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/gtko"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">링크</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.thinkbee.kr" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Thinkbee.kr</span></span><span class="level-right"><span class="level-item tag">www.thinkbee.kr</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">업데이트 소식 받기</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI/"><span class="level-start"><span class="level-item">AI</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">25</span></span></a><ul><li><a class="level is-mobile" href="/categories/Linux/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/NodeJS/"><span class="level-start"><span class="level-item">NodeJS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/NodeJS/"><span class="level-start"><span class="level-item">NodeJS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/NodeJS/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Photoshop/"><span class="level-start"><span class="level-item">Photoshop</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Angular/"><span class="level-start"><span class="level-item">Angular</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Angularjs/"><span class="level-start"><span class="level-item">Angularjs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Raspberry-Pi/"><span class="level-start"><span class="level-item">Raspberry Pi</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/Raspberry-Pi/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/Raspberry-Pi/Linux/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/jekyll/"><span class="level-start"><span class="level-item">jekyll</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-24T20:50:12.225Z">2022-02-25</time></p><p class="title"><a href="/2022/02/25/hello-world/">blog.thinkbee.kr 이전 작업중입니다.</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-06T00:00:00.000Z">2020-03-06</time></p><p class="title"><a href="/2020/03/06/jekyll-2020-03-06-jekyll-mmtheme-macos/">macOS에서 Jekyll 설치와 Minimalmistake Theme</a></p><p class="categories"><a href="/categories/jekyll/">jekyll</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-02T09:00:00.000Z">2020-02-02</time></p><p class="title"><a href="/2020/02/02/linux-2020-02-02-letsencrypt%EB%B0%9C%EA%B8%89/">HTTPS를 위한 공인인증서 - Let&#039;s Encrypt 발급</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-20T03:00:00.000Z">2019-12-20</time></p><p class="title"><a href="/2019/12/20/linux-2019-12-20-mongodb-config/">MongoDB 구성 설정과 사용자 인증 사용</a></p><p class="categories"><a href="/categories/Linux/">Linux</a> / <a href="/categories/Linux/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-20T01:00:00.000Z">2019-12-20</time></p><p class="title"><a href="/2019/12/20/linux-2019-12-20-mongodb-4-2-install-arm64/">MongoDB Community Edition 4.2 설치 - ARM64 Ubuntu/Debian Armbian</a></p><p class="categories"><a href="/categories/Linux/">Linux</a> / <a href="/categories/Linux/Database/">Database</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">2월 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">3월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">2월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">12월 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">9월 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">10월 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">8월 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">7월 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">6월 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">12월 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/11/"><span class="level-start"><span class="level-item">11월 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">10월 2017</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">9월 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/07/"><span class="level-start"><span class="level-item">7월 2017</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">6월 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">5월 2017</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/04/"><span class="level-start"><span class="level-item">4월 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">12월 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/02/"><span class="level-start"><span class="level-item">2월 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ARM/"><span class="tag">ARM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Armbian/"><span class="tag">Armbian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Artificial-Intelligence/"><span class="tag">Artificial Intelligence</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debian/"><span class="tag">Debian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debian-Strech/"><span class="tag">Debian Strech</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JSON-Web-Token/"><span class="tag">JSON Web Token</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JWT-Toekn/"><span class="tag">JWT Toekn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEAP-15-0/"><span class="tag">LEAP 15.0</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEAP-42-3/"><span class="tag">LEAP 42.3</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odroid/"><span class="tag">Odroid</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odroid-C2/"><span class="tag">Odroid C2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Orange-Pi/"><span class="tag">Orange Pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspberry-Pi/"><span class="tag">Raspberry Pi</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspberry-Pi-3/"><span class="tag">Raspberry Pi 3</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspbian/"><span class="tag">Raspbian</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SD-Card/"><span class="tag">SD Card</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scientific/"><span class="tag">Scientific</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TensorFlow/"><span class="tag">TensorFlow</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript-Tutorials/"><span class="tag">TypeScript Tutorials</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ubuntu/"><span class="tag">Ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/X11/"><span class="tag">X11</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/amd64/"><span class="tag">amd64</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/angular4/"><span class="tag">angular4</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/angularjs/"><span class="tag">angularjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apache/"><span class="tag">apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/arm64/"><span class="tag">arm64</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/armbian/"><span class="tag">armbian</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/banana-pi/"><span class="tag">banana pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bootstrap-4/"><span class="tag">bootstrap 4</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/brew/"><span class="tag">brew</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/certificate-ssl/"><span class="tag">certificate ssl</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clipping-mask/"><span class="tag">clipping-mask</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collages/"><span class="tag">collages</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cross-compiler/"><span class="tag">cross compiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debian/"><span class="tag">debian</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firewall/"><span class="tag">firewall</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firewalld/"><span class="tag">firewalld</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/https/"><span class="tag">https</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/install/"><span class="tag">install</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jasmine/"><span class="tag">jasmine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jekyll/"><span class="tag">jekyll</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter/"><span class="tag">jupyter</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter-notebook/"><span class="tag">jupyter notebook</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter-notebook/"><span class="tag">jupyter-notebook</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/karma/"><span class="tag">karma</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leap-15/"><span class="tag">leap 15</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leap-42-3/"><span class="tag">leap 42.3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lvm/"><span class="tag">lvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lvm2/"><span class="tag">lvm2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macos/"><span class="tag">macos</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markdown/"><span class="tag">markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/micro-SD-Card/"><span class="tag">micro SD Card</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/middleware/"><span class="tag">middleware</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongodb/"><span class="tag">mongodb</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongoose/"><span class="tag">mongoose</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs-tutorials/"><span class="tag">nodejs tutorials</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nvm/"><span class="tag">nvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid/"><span class="tag">odroid</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid-c2/"><span class="tag">odroid c2</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid-c2/"><span class="tag">odroid-c2</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openSUSE/"><span class="tag">openSUSE</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensuse/"><span class="tag">opensuse</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensuse-leap-15/"><span class="tag">opensuse leap 15</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/orange-pi/"><span class="tag">orange pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/photoshop/"><span class="tag">photoshop</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/raspberry-pi/"><span class="tag">raspberry pi</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/security/"><span class="tag">security</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssl/"><span class="tag">ssl</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/synergy/"><span class="tag">synergy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tmux/"><span class="tag">tmux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ubuntu/"><span class="tag">ubuntu</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unit-testing/"><span class="tag">unit testing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/virtualenv/"><span class="tag">virtualenv</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/virtualenvwrapper/"><span class="tag">virtualenvwrapper</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webdav/"><span class="tag">webdav</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%8D%B0%EB%B9%84%EC%95%88/"><span class="tag">데비안</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%8D%B0%EC%9D%B4%EC%95%88/"><span class="tag">데이안</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%9D%BC%EC%A6%88%EB%B2%A0%EB%A6%AC%ED%8C%8C%EC%9D%B4/"><span class="tag">라즈베리파이</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%9D%BC%EC%A6%88%EB%B9%84%EC%95%88/"><span class="tag">라즈비안</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A6%AC%EB%88%85%EC%8A%A4/"><span class="tag">리눅스</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A7%88%ED%81%AC%EB%8B%A4%EC%9A%B4/"><span class="tag">마크다운</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A7%A5%EC%98%A4%EC%97%90%EC%8A%A4/"><span class="tag">맥오에스</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%94%EB%82%98%EB%82%98%ED%8C%8C%EC%9D%B4/"><span class="tag">바나나파이</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%A9%ED%99%94%EB%B2%BD/"><span class="tag">방화벽</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%98%A4%EB%A0%8C%EC%A7%80%ED%8C%8C%EC%9D%B4/"><span class="tag">오렌지파이</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9A%B0%EB%B6%84%ED%88%AC/"><span class="tag">우분투</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9B%B9%ED%86%A0%ED%81%B0/"><span class="tag">웹토큰</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9D%B8%EA%B3%B5%EC%A7%80%EB%8A%A5/"><span class="tag">인공지능</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%A0%84%EC%9B%90%EA%B4%80%EB%A6%AC/"><span class="tag">전원관리</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%8C%8C%EC%9D%B4%EC%8D%AC/"><span class="tag">파이썬</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%8C%8C%EC%9D%B4%EC%96%B4%EC%9B%94/"><span class="tag">파이어월</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1465716454138955" data-ad-slot="4883770640" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/thinkbee_logo.png" alt="Blogging through Programming" height="28"></a><p class="is-size-7"><span>&copy; 2022 Gangtai</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>