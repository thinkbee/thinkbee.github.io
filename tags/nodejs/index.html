<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>태그: nodejs - Blogging through Programming</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="thinkbee blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="thinkbee blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="website"><meta property="og:title" content="Blogging through Programming"><meta property="og:url" content="https://blog.thinkbee.kr/"><meta property="og:site_name" content="Blogging through Programming"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://blog.thinkbee.kr/img/og_image.png"><meta property="article:author" content="Gangtai"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.thinkbee.kr"},"headline":"Blogging through Programming","image":["https://blog.thinkbee.kr/img/og_image.png"],"author":{"@type":"Person","name":"Gangtai"},"publisher":{"@type":"Organization","name":"Blogging through Programming","logo":{"@type":"ImageObject","url":"https://blog.thinkbee.kr/images/thinkbee_logo.png"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-1465716454138955" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 6.0.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/thinkbee_logo.png" alt="Blogging through Programming" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">태그</a></li><li class="is-active"><a href="#" aria-current="page">nodejs</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2018-06-02T00:00:00.000Z" title="2018-6-2 9:00:00">2018-06-02</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:14:19.416Z" title="2022-2-25 1:14:19">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">15분안에 읽기 (약 2194 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2018/06/02/nodejs-2018-06-02-restfull-openapi-jwt-token/">Open API Web Token</a></h1><div class="content"><h2 id="Open-api-key"><a href="#Open-api-key" class="headerlink" title="Open api key"></a>Open api key</h2><p>API keys는 사용자 인증, 요청 API 호출을 위해 필요하다. </p>
<p>보통 RESTFull API 호출시 API keys 와 인증 스킴을 사용한다. 주요 차이는:</p>
<ul>
<li>API keys : 앱 혹은 사이트 호출을 식별해서 API 호출을 만다.</li>
<li>Auth tokens : 앱 혹은 사이트 사용자를 식별한다.</li>
</ul>
<p>이런 인증에 두가지 방식을 사용한다.</p>
<ul>
<li>Session-based Authentication</li>
<li>Token-based Authentication</li>
</ul>
<h3 id="Token-based-Authentication"><a href="#Token-based-Authentication" class="headerlink" title="Token based Authentication"></a>Token based Authentication</h3><p>토큰 기반 인증은</p>
<ol>
<li>Stateless Authentication 이 큰 이유이다. 클라이언트 측 로컬 스토리지 (혹은 세션, 쿠키 가능)에 저장된다.</li>
<li>좋은 예는 싱글 페이지 앱, Web ApIs, IoT가 있다</li>
<li>앱이 확장성이 있고 분리되야 한다면, Token 기반이 좋은 사례가 된다.</li>
</ol>
<blockquote>
<p>Stateless Authentication: 인증에 대해 서버측이 인증 정보를 보존하지 않는다.</p>
</blockquote>
<h3 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h3><p><strong>JWT</strong>(JSON Web Tokens)는 REST API를 사용한 간단하고 보안이 적용된 인증 전략이다. 웹 인증을 위한 표준이고 JSON token 요청을 기반으로 한다. 인증 서버에서 발급한 토큰을 클라이언트가 요청시 마다 헤더에 토큰을 넣어 요구해야 한다.</p>
<p>MEAN 스택 앱에 빠르게 인증을 추가하는 것은 <a target="_blank" rel="noopener" href="http://jwt.io/">JSON Web Token</a> 을 사용할 수 있다.</p>
<h3 id="How-JWT-Works"><a href="#How-JWT-Works" class="headerlink" title="How JWT Works?"></a>How JWT Works?</h3><p><a target="_blank" rel="noopener" href="https://appdividend.com/2018/02/07/node-js-jwt-authentication-tutorial-scratch/">Node Js JWT Authentication Tutorial From Scratch</a></p>
<p>JSON Web Token is the token; we need to put the header in every request to verify the client. The Architecture of JWT Authentication is pretty darn simple.</p>
<ol>
<li>First user attempt to login with their credentials.</li>
<li>After server verifies the credentials, it sends JSON Web Token to the client.</li>
<li>A client then saves that token in local storage or any other storage mechanism.</li>
<li>Again if a client wants to request a protected route or resource, then it sends JWT in a request header.</li>
<li>The server verifies that JWT and if it is correct then return a 200 response with the information, client needs.</li>
<li>If the JWT is invalid, then it gives unauthorized access or any other restricted message.</li>
<li>Node js JWT Authentication</li>
</ol>
<p>In this tutorial, we are not using any front-end framework. We will use POSTMAN  to request the server. We will check the auth using token. So let us get started.</p>
<h4 id="Step-1-Install-node-js-dependencies"><a href="#Step-1-Install-node-js-dependencies" class="headerlink" title="Step 1: Install node js dependencies."></a>Step 1: Install node js dependencies.</h4><p>Create one project folder and go into that folder. Type the following command.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>

<p>Now, install the following dependencies.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express jsonwebtoken mongoose body-parser --save</span><br></pre></td></tr></table></figure>

<p>It will install the express web framework, jsonwebtoken package to authenticate the user, mongoose schema model, and body-parser middleware.</p>
<p>Also, we need to install the nodemon development server to prevent the stop and restart the server process. So let us do that first.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install nodemon --save-dev</span><br></pre></td></tr></table></figure>

<p>Rest dependencies we will install as our project grows.</p>
<h4 id="Step-2-Configure-the-Node-Server"><a href="#Step-2-Configure-the-Node-Server" class="headerlink" title="Step 2: Configure the Node Server."></a>Step 2: Configure the Node Server.</h4><p>In the package.json file, change this object to the following.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;nodemon server&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>

<p>So in the terminal when we type npm start command, we bootstrap the server.js file.<br>In the root folder, make one file called <em>server.js</em>. Configure the node server.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server is running on Port&#x27;</span>,<span class="variable constant_">PORT</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Now, go to terminal and hit the following instruction.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>

<p>It will start the server, you can see it on a console. So it is ready to consume any request, either web or API.</p>
<h4 id="Step-3-Send-a-request-to-node-server-via-Postman"><a href="#Step-3-Send-a-request-to-node-server-via-Postman" class="headerlink" title="Step 3: Send a request to node server via Postman."></a>Step 3: Send a request to node server via Postman.</h4><p>First, we define one route and send the JSON response to the client.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/checking&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">   res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="string">&quot;Tutorial&quot;</span>: <span class="string">&quot;Welcome to the Node express JWT Tutorial&quot;</span></span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Open the Postman and send the get request to <a target="_blank" rel="noopener" href="http://localhost:3000/checking">http://localhost:3000/checking</a>. Postman Tutorial</p>
<h4 id="Step-4-Configure-the-MongoDB-Database"><a href="#Step-4-Configure-the-MongoDB-Database" class="headerlink" title="Step 4: Configure the MongoDB Database."></a>Step 4: Configure the MongoDB Database.</h4><p>Write the following code to connect the Node.js application to the MongoDB database.</p>
<p>if below mongoose 3.x, </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line">mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://localhost/jwtauth&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>Then use above mongoose 4.x, prepare <em>Promise</em> and connect().</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Mongodb</span></span><br><span class="line">mongoose.<span class="property">Promise</span> = <span class="variable language_">global</span>.<span class="property">Promise</span>;</span><br><span class="line"></span><br><span class="line">mongoose.<span class="title function_">connect</span>( </span><br><span class="line">  <span class="string">&quot;mongodb://student:PW@localhost/students&quot;</span>,</span><br><span class="line">  &#123; <span class="attr">useMongoClient</span>: <span class="literal">true</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>Also, write the body-parser middleware to the application.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">json</span>());</span><br></pre></td></tr></table></figure>


<h4 id="Step-5-Create-a-User-model"><a href="#Step-5-Create-a-User-model" class="headerlink" title="Step 5: Create a User model."></a>Step 5: Create a User model.</h4><p>Create one new folder inside root called models. In that, create one file called user.model.js file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user.model.js</span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">   <span class="comment">//_id: mongoose.Schema.Types.ObjectId,</span></span><br><span class="line">   <span class="attr">email</span>: &#123;<span class="attr">type</span>: <span class="title class_">String</span>, <span class="attr">required</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">   <span class="attr">password</span>: &#123;<span class="attr">type</span>: <span class="title class_">String</span>, <span class="attr">required</span>: <span class="literal">true</span>&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;User&#x27;</span>, user);</span><br></pre></td></tr></table></figure>

<p>We have defined the schema for the User collection.</p>
<h4 id="Step-6-Create-the-routes-for-users"><a href="#Step-6-Create-the-routes-for-users" class="headerlink" title="Step 6: Create the routes for users."></a>Step 6: Create the routes for users.</h4><p>In the root, make one folder called routes. In that folder, create one file called user.route.js. Now we need to sign the user up for our application. So let us define the post route to signup the user. We also need a bcrypt module to hash the password. We can not store the plain password. So let us install bcrypt module first.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i bcrypt</span><br></pre></td></tr></table></figure>

<p>Next, write the following code into the <em>user.route.js</em> file.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user.route.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bcrypt = <span class="built_in">require</span>(<span class="string">&#x27;bcrypt&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = <span class="built_in">require</span>(<span class="string">&#x27;../models/user.model&#x27;</span>);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/signup&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">   bcrypt.<span class="title function_">hash</span>(req.<span class="property">body</span>.<span class="property">password</span>, <span class="number">10</span>, <span class="keyword">function</span>(<span class="params">err, hash</span>)&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) &#123;</span><br><span class="line">         <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">error</span>: err</span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">// const user = new User(req.body);</span></span><br><span class="line">         <span class="keyword">const</span> user = <span class="keyword">new</span> <span class="title class_">User</span>(&#123;</span><br><span class="line">            <span class="comment">// _id: new  mongoose.Types.ObjectId(),</span></span><br><span class="line">            <span class="attr">email</span>: req.<span class="property">body</span>.<span class="property">email</span>,</span><br><span class="line">            <span class="attr">password</span>: hash    </span><br><span class="line">         &#125;);</span><br><span class="line">         user.<span class="title function_">save</span>().<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">               <span class="attr">success</span>: <span class="string">&#x27;New user has been created&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">               <span class="attr">error</span>: err</span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure>

<p>What it does is that it tries to hash the incoming request’s password property. If it fails to do so then returns a response with an error in json format. If it successes then it will create a new user and add that to the MongoDB database. Now include this user.route.js file in the server.js file. I am writing the whole file now.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> user = <span class="built_in">require</span>(<span class="string">&#x27;./routes/user.route&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"></span><br><span class="line">mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://localhost/jwtauth&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/checking&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">   res.<span class="title function_">json</span>(&#123;</span><br><span class="line">      <span class="string">&quot;Tutorial&quot;</span>: <span class="string">&quot;Welcome to the Node express JWT Tutorial&quot;</span></span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/user&#x27;</span>, user);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server is running on Port&#x27;</span>,<span class="variable constant_">PORT</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Step-7-Send-a-post-request-from-the-Postman"><a href="#Step-7-Send-a-post-request-from-the-Postman" class="headerlink" title="Step 7: Send a post request from the Postman."></a>Step 7: Send a post request from the Postman.</h4><p>postman 에서 POST 방식으로 새 사용자를 추가해 보자, POST에서 Body를 Raw 이고 형식은 <strong>json(application&#x2F;json)</strong> 를 선택하고 작성한다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span> </span><br><span class="line">  <span class="attr">&quot;firstName&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;lastName&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/nodejs/auth-jwt-signup-postman.png">{:width&#x3D;”500”}</p>
<figcaption>[그림. Postman에서 JSON 포스트]</figcaption>



<p>You can see here, I have created user successfully. Now, I am using Studio 3T for MongoDB. So here is the newly created user in the database.</p>
<p>이제 실제 암호화된 비밀번호로 생성된 사용자 정보를 확인할 수 있다.</p>
<p><img src="/images/nodejs/auth-jwt-signup-db.png">{:width&#x3D;”500”}</p>
<figcaption>[그림. 새 사용자 정보]</figcaption>


<p>MongoDB Tutorial With An Example</p>
<h4 id="Step-8-Sign-In-the-User"><a href="#Step-8-Sign-In-the-User" class="headerlink" title="Step 8: Sign In the User."></a>Step 8: Sign In the User.</h4><p>사용자가 생성되고 비밀번호로 bcryp로 비밀번호가 생성되면 <code>bcrypt.compare()</code> 를 사용해 사용자 비밀번호를 인증할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user.route.js</span></span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/signin&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">   <span class="title class_">User</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">email</span>: req.<span class="property">body</span>.<span class="property">email</span>&#125;)</span><br><span class="line">   .<span class="title function_">exec</span>()</span><br><span class="line">   .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">user</span>) &#123;</span><br><span class="line">      bcrypt.<span class="title function_">compare</span>(req.<span class="property">body</span>.<span class="property">password</span>, user.<span class="property">password</span>, <span class="keyword">function</span>(<span class="params">err, result</span>)&#123;</span><br><span class="line">         <span class="keyword">if</span>(err) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">               <span class="attr">failed</span>: <span class="string">&#x27;Unauthorized Access&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span>(result) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">               <span class="attr">success</span>: <span class="string">&#x27;Welcome to the JWT Auth&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">            <span class="attr">failed</span>: <span class="string">&#x27;Unauthorized Access&#x27;</span></span><br><span class="line">         &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;)</span><br><span class="line">   .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">         <span class="attr">error</span>: error</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;);;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>사용자 이메일로 허가된 사용자인지 인증하는데, 이메일이 존재하지 않으면 <strong>401 unauthorized access</strong> 에러를 출력한다.</p>
<p><img src="/images/nodejs/auth-jwt-signin-postman.png">{:width&#x3D;”500”}</p>
<figcaption>[그림. Postman에서 Sign 포스트]</figcaption>

<p>First, I have checked if the user’s email exists or not. If not then return 401 unauthorized access. If email is there then check the password with bcrypted database password if match found then welcome to the JWT auth else 401 unauthorized access.</p>
<p>이메일로 사용자 검색이 되고 비밀번호 인증이 되면 환영 JWT auth를 반환하고 아니면 <strong>401 unauthorized access</strong> 를 반환하게 한다.</p>
<h4 id="Step-9-Return-the-JWT-if-auth-attempt-successful"><a href="#Step-9-Return-the-JWT-if-auth-attempt-successful" class="headerlink" title="Step 9: Return the JWT, if auth attempt successful."></a>Step 9: Return the JWT, if auth attempt successful.</h4><p>사용자 증명인 이메일과 패스워드가 유효하면 JWT token을 반환하도록 하자, <code>jwt.sign()</code> 함수는 기본으로 HMAC SHA256 해시 코드를 발생한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jwt.<span class="title function_">sign</span>(&#123;</span><br><span class="line">  <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">  <span class="attr">_id</span>: user.<span class="property">_id</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>다른 알고리즘이 필요하면 <em>algorighm</em> 속성을 제시해 준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jwt.<span class="title function_">sign</span>(&#123;</span><br><span class="line">  <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">  <span class="attr">_id</span>: user.<span class="property">_id</span>,</span><br><span class="line">  &#123; <span class="attr">algorithm</span>: <span class="string">&#x27;RS256&#x27;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>If the user’s credentials email and password are valid then in response, we need to return a JWT token. So let us generate the token and return to the user.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user.route.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(result) &#123;</span><br><span class="line">   <span class="keyword">const</span> <span class="title class_">JWTToken</span> = jwt.<span class="title function_">sign</span>(&#123;</span><br><span class="line">        <span class="attr">email</span>: user.<span class="property">email</span>,</span><br><span class="line">        <span class="attr">_id</span>: user.<span class="property">_id</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;secret&#x27;</span>,</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="attr">expiresIn</span>: <span class="string">&#x27;2h&#x27;</span></span><br><span class="line">       &#125;);</span><br><span class="line">       <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(&#123;</span><br><span class="line">         <span class="attr">success</span>: <span class="string">&#x27;Welcome to the JWT Auth&#x27;</span>,</span><br><span class="line">         <span class="attr">token</span>: <span class="title class_">JWTToken</span></span><br><span class="line">       &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>JWT Token의 형식은 HEADER, PAYLOAD, SECRETKEY 조합으로 아래 같다:</p>
<p>The format of JWT Token is as following.</p>
<p><strong>HEADER: ALGORITHM &amp; TOKEN TYPE</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">“alg”<span class="punctuation">:</span> “HS256”<span class="punctuation">,</span></span><br><span class="line">“typ”<span class="punctuation">:</span> “JWT”</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>PAYLOAD:DATA</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">“email”<span class="punctuation">:</span> “krunallathiya10@gmail.com”<span class="punctuation">,</span></span><br><span class="line">“_id”<span class="punctuation">:</span> “<span class="number">5</span>a7c9bd8fc3e501c94aa6035”<span class="punctuation">,</span></span><br><span class="line">“iat”<span class="punctuation">:</span> <span class="number">1518120124</span><span class="punctuation">,</span></span><br><span class="line">“exp”<span class="punctuation">:</span> <span class="number">1518127324</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>VERIFY SIGNATURE</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HMACSHA256(</span><br><span class="line">  base64UrlEncode(header) + <span class="string">&quot;.&quot;</span> +</span><br><span class="line">  base64UrlEncode(payload)<span class="punctuation">,</span></span><br><span class="line">  secret</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>조합으로 생성한 JWT는 아래 같은 JWT Token을 반환한다.</p>
<p>So it is a combination of header, payload, and secretkey, we are providing. Remember, You need to define your secret key in your environment variable file. I have just shown here for the demo purpose. So it will produce the following JWT token.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImtydW5hbGxhdGhpeWExMEBnbWFpbC5jb20iLCJfaWQiOiI1YTdjOWJkOGZjM2U1MDFjOTRhYTYwMzUiLCJpYXQiOjE1MTgxMjAxMjQsImV4cCI6MTUxODEyNzMyNH0._6qVGQV_KYlonawnaTHG-OhOJLV4tgD-Eob5iRz89AM</span><br></pre></td></tr></table></figure>


<p>이 토큰을 제한된 자원에 접근하는 앱에 사용할 수 있다.</p>
<p>Now use this token to access the protected resources to your application and we are done here. So this is how you can generate the JWT Auth Token. </p>
<h4 id="JWT-Token-verifying"><a href="#JWT-Token-verifying" class="headerlink" title="JWT Token verifying"></a>JWT Token verifying</h4><p><code>jwt.verify()</code>를 사용해 발급한 토큰이 허용되는지 검증할 수 있다.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/auth0/node-jsonwebtoken#jwtverifytoken-secretorpublickey-options-callback">jwt.verify(token, secretOrPublicKey, [options, callback])</a></p>
<ul>
<li><code>token</code>: 발행된 Json Web Token</li>
<li><code>secretOrPublicKey</code>: 토큰 발행시 제공한 시크릿 키</li>
</ul>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&#x27;/verify&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="title class_">User</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">email</span>: req.<span class="property">body</span>.<span class="property">email</span>&#125;);</span><br><span class="line"></span><br><span class="line">   <span class="comment">// check expired?</span></span><br><span class="line">   jwt.<span class="title function_">verify</span>(req.<span class="property">body</span>.<span class="property">token</span>, user.<span class="property">secret_key</span>, <span class="keyword">function</span>(<span class="params">err, decoded</span>) &#123;</span><br><span class="line">     <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">      <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">json</span>(err);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/jsonwebtoken">npm:JSONWebToken</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://appdividend.com/2018/02/07/node-js-jwt-authentication-tutorial-scratch/">Node Js JWT Authentication Tutorial From Scratch</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://cloud.google.com/endpoints/docs/openapi/when-why-api-key">Why and When to Use API Keys</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://appdividend.com/2018/02/07/node-js-jwt-authentication-tutorial-scratch/">https://appdividend.com/2018/02/07/node-js-jwt-authentication-tutorial-scratch/</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://medium.freecodecamp.org/securing-node-js-restful-apis-with-json-web-tokens-9f811a92bb52">Securing Node.js RESTful APIs with JSON Web Tokens</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-11-01T00:00:00.000Z" title="2017-11-1 9:00:00">2017-11-01</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:46:26.241Z" title="2022-2-25 1:46:26">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Angularjs/">Angularjs</a></span><span class="level-item">21분안에 읽기 (약 3088 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/11/01/angularjs-2017-11-01-angularjs-test/">Angularjs - Karma Unit Testing</a></h1><div class="content"><p>angularjs 단위 테스트에 대해 정리한다.</p>
<ul>
<li>angularjs 1.6.x 에서 진행했다.</li>
<li>macOS, Linux 환경에 적합하다.</li>
</ul>
<p>node.js 를 nvm 가상환경에서 구축하고 사용하는 방법에 대해서는 <a href="!--swig%EF%BF%BC40--">Node.js Install with nvm</a> 를 참조하면 된다.</p>
<p>angularjs 단위 테스트에 대해 참고한 문서는 아래 <strong>참고</strong> 섹션에 제공했다.</p>
<h2 id="Angularjs-Testing"><a href="#Angularjs-Testing" class="headerlink" title="Angularjs Testing"></a>Angularjs Testing</h2><p>angularjs는 unit test와 E2E (end to end) 테스트를 제공하고 있다.</p>
<table>
<thead>
<tr>
<th>Unit testing</th>
<th>E2E testing</th>
</tr>
</thead>
<tbody><tr>
<td>코드&#x2F;모듈&#x2F;함수 레벨 테스트팅</td>
<td>웹 UI 테스팅</td>
</tr>
<tr>
<td>서비스, 클래스, 오브젝트 테스트에 적합</td>
<td>웹 서버 필요</td>
</tr>
<tr>
<td>샌드박스, 독립 테스트에 적합</td>
<td>통합 테스트에 적합</td>
</tr>
<tr>
<td></td>
<td>랜더링 결과와 angularjs 데이터 부합 확인</td>
</tr>
<tr>
<td>fast</td>
<td>느리다</td>
</tr>
</tbody></table>
<h3 id="Karma"><a href="#Karma" class="headerlink" title="Karma"></a>Karma</h3><p>자바스크립트 단위 테스트 도구로 테스트 러너 설정시 번거로운 부분을 쉽게 할 수 있다.</p>
<h4 id="시작"><a href="#시작" class="headerlink" title="시작"></a>시작</h4><p>nodejs가 설치되었으면 새 프로젝트 폴더에서 npm init 로 프로젝트를 초기화 하고</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> angularjs-karma-test</span><br><span class="line">$ <span class="built_in">cd</span> angularjs-karma-test</span><br><span class="line">$ npm init</span><br></pre></td></tr></table></figure>

<p>글로벌로 karma와 jasmine framework를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i –g karma</span><br><span class="line">$ npm i -g jasmine jasmine-core</span><br></pre></td></tr></table></figure>

<blockquote>
<p>만약 karma를 프로젝트의 로컬 dev 모드로 설치한다면 jasmine도 같이 로컬로 설치하자.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i -D jasmine jasmine-core</span><br><span class="line">$ npm i -D karma</span><br></pre></td></tr></table></figure>
</blockquote>
<p>프로젝트에 angularjs 모듈과 mock 모듈을 설치해 준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i angular</span><br><span class="line">$ npm i -D angular-mocks</span><br></pre></td></tr></table></figure>

<p>그리고 karma.conf.js 파일을 만들기 위해 <code>karma init</code> 명령을 실행하면 선택 입력 항목을 물어 온다. 기본 설정으로 진행한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Which testing framework <span class="keyword">do</span> you want to use ?</span><br><span class="line">Press tab to list possible options. Enter to move to the next question.</span><br><span class="line">&gt; jasmine</span><br><span class="line"></span><br><span class="line">Do you want to use Require.js ?</span><br><span class="line">This will add Require.js plugin.</span><br><span class="line">Press tab to list possible options. Enter to move to the next question.</span><br><span class="line">&gt; no</span><br><span class="line"></span><br><span class="line">Do you want to capture any browsers automatically ?</span><br><span class="line">Press tab to list possible options. Enter empty string to move to the next question.</span><br><span class="line">&gt; Chrome</span><br><span class="line">&gt;</span><br><span class="line"></span><br><span class="line">What is the location of your <span class="built_in">source</span> and <span class="built_in">test</span> files ?</span><br><span class="line">You can use glob patterns, eg. <span class="string">&quot;js/*.js&quot;</span> or <span class="string">&quot;test/**/*Spec.js&quot;</span>.</span><br><span class="line">Enter empty string to move to the next question.</span><br><span class="line">&gt;</span><br><span class="line"></span><br><span class="line">Should any of the files included by the previous patterns be excluded ?</span><br><span class="line">You can use glob patterns, eg. <span class="string">&quot;**/*.swp&quot;</span>.</span><br><span class="line">Enter empty string to move to the next question.</span><br><span class="line">&gt;</span><br><span class="line"></span><br><span class="line">Do you want Karma to watch all the files and run the tests on change ?</span><br><span class="line">Press tab to list possible options.</span><br><span class="line">&gt; <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line">Config file generated at <span class="string">&quot;/Users/qkboo/www-app/angularjs-karma/karma.conf.js&quot;</span>.</span><br></pre></td></tr></table></figure>

<p>현재 설정을 테스트하기 위해 start 명령으로 시작하면 karma 서버가 시작된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ karma start</span><br><span class="line">20 12 2017 12:41:02.798:INFO [karma]: Karma v1.7.1 server started at http://0.0.0.0:9876/</span><br></pre></td></tr></table></figure>

<p>데스크탑 환경이면 karma.conf.js 에 지정한 브라우저가 실행되어 보여준다.</p>
<h4 id="테스트-스펙-작성"><a href="#테스트-스펙-작성" class="headerlink" title="테스트 스펙 작성"></a>테스트 스펙 작성</h4><p>실제 테스트 시나리오를 기술하는 jasmine 테스트 스펙 파일은 아래 같은 구조를 가지고 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;테스트 대상 설명&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 테스트 전처리</span></span><br><span class="line">  <span class="title function_">before</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 테스트 후처리</span></span><br><span class="line">  <span class="title function_">after</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// it 마다 매번 실행하는 전처리</span></span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// it 마다 매번 실행하는 후처리</span></span><br><span class="line">  <span class="title function_">afterEach</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&quot;테스트 내용 설명&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 테스트</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">it</span>(<span class="string">&quot;테스트 내용 설명&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 테스트</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="테스트-코드-작성"><a href="#테스트-코드-작성" class="headerlink" title="테스트 코드 작성"></a>테스트 코드 작성</h4><p>app&#x2F;src&#x2F;app.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title function_">module</span>(<span class="string">&quot;myapp&quot;</span>, [<span class="string">&quot;myapp.service&quot;</span>]);</span><br></pre></td></tr></table></figure>

<p>서비스 모듈을 생성하고 테스트 해보자, test&#x2F;test.service.js 테스트 스펙을 작성해 보자.</p>
<p><strong>app&#x2F;src&#x2F;test&#x2F;test.service.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;서비스 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">module</span>(<span class="string">&quot;myapp.service&quot;</span>)); <span class="comment">//모듈 로드</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&quot;서비스 모듈 버전 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;현재 버전 반환&quot;</span>, <span class="title function_">inject</span>(<span class="keyword">function</span> (<span class="params">version</span>) &#123;</span><br><span class="line">      <span class="title function_">expect</span>(version).<span class="title function_">toEqual</span>(<span class="string">&quot;0.1&quot;</span>);</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>myapp.service.js를 작성한다.</p>
<p><strong>app&#x2F;src&#x2F;service&#x2F;myapp.service.js</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title function_">module</span>(<span class="string">&quot;myapp.service&quot;</span>, []).<span class="title function_">value</span>(<span class="string">&quot;version&quot;</span>, <span class="string">&quot;0.1&quot;</span>); <span class="comment">//버전</span></span><br></pre></td></tr></table></figure>

<p>karma를 종료했다 다시 실행한다 – (소스 및 스펙 변경이 바로 적용 안된다면…)</p>
<p>이제 테스트 스크립을 실행해 보기 위해 karma.conf.js에 소스 파일들을 명시하자. files는 karma가 실행될 때 로드되는 파일의 path를 가지고 있는 배열이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">files</span>: [</span><br><span class="line">    <span class="string">&#x27;node_modules/angular/angular.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;node_modules/angular-mocks/angular-mocks.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app/src/app.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app/src/service/myapp.service.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app/src/test/test*.js&#x27;</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>앞서 실행한 karma 를 종료하지 않아도 된다. 소스를 추가하고 변경하면 테스트가 자동으로 시작된다. 브라우저는 angular-mock으로 테스트하는 프레임워크로 브라우저 내용에는 별다른 정보가 나타나지 않는다,</p>
<p>터미널에 테스트가 실패하면</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6) 서비스 테스트 서비스 모듈 버전 테스트 현재 버전 반환 FAILED</span><br><span class="line">  Expected &#x27;0.1&#x27; to equal &#x27;1.0&#x27;.</span><br></pre></td></tr></table></figure>

<p>버전 정보를 요구되는 값으로 변경하고 저장하면 로그에 다음 같이 테스트 스크립 성공 여부가 표시된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6): Executed 1 of 1 SUCCESS (0.016 secs / 0.012 secs)</span><br></pre></td></tr></table></figure>

<h4 id="컨트롤러-테스트-작성"><a href="#컨트롤러-테스트-작성" class="headerlink" title="컨트롤러 테스트 작성"></a>컨트롤러 테스트 작성</h4><p>컨트롤러는 Scope을 통해 데이터 바인딩이에 대해 …</p>
<p><strong>app&#x2F;src&#x2F;test&#x2F;test.service.js</strong> 테스트 스펙을 작성해 보자.</p>
<ul>
<li><ol>
<li>컨트롤러 모듈을 들여오고</li>
</ol>
</li>
<li><ol start="2">
<li>필요한 모듈, 여기서 $scope를 주입하고</li>
</ol>
</li>
<li><ol start="3">
<li>모듈에 적재되었는지 테스트한다.</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;서비스 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> scope;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. 모듈을 들여오고</span></span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">module</span>(<span class="string">&quot;myapp.controller&quot;</span>)); <span class="comment">//모듈 로드</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&quot;컨트롤러 모듈 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//2. 필요한 모듈, 여기서 $scope를 주입하고</span></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;컨트롤러 들여오기&quot;</span>, <span class="title function_">inject</span>([</span><br><span class="line">      <span class="string">&quot;$rootScope&quot;</span>,</span><br><span class="line">      <span class="string">&quot;$controller&quot;</span>,</span><br><span class="line">      <span class="keyword">function</span> (<span class="params">$rootScope, $controller</span>) &#123;</span><br><span class="line">        <span class="comment">// 새 스코프</span></span><br><span class="line">        scope = $rootScope.$new();</span><br><span class="line">        <span class="comment">// 대상 컨트롤러에 의존성을 주입하고 들여온다.</span></span><br><span class="line">        userListController = $controller(<span class="string">&quot;userListController&quot;</span>, &#123;</span><br><span class="line">          <span class="attr">$scope</span>: scope,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    ]));</span><br><span class="line">    <span class="comment">//3. 모듈에 적재되었는지 테스트한다.</span></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;userListController 컨트롤러가 정의되어 있다.&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">expect</span>(userListController).<span class="title function_">toBeDefined</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>실제 컨트롤러 소스 가 없으므로 아래 같이 에러가 발생한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6) 서비스 테스트 컨트롤러 모듈 테스트 userListController 컨트롤러가 정의되어 있다. FAILED</span><br><span class="line">  ReferenceError: userListController is not defined</span><br><span class="line">      at UserContext.&lt;anonymous&gt; (app/src/test/test.controller.js:18:14)</span><br><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6): Executed 2 of 3 (2 FAILED) (0 secs / 0.013 sec</span><br><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6): Executed 3 of 3 (2 FAILED) (0 secs / 0.018 sec</span><br><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6): Executed 3 of 3 (2 FAILED) (0.026 secs / 0.018 secs)</span><br></pre></td></tr></table></figure>

<p>이제 <strong>app&#x2F;src&#x2F;controller&#x2F;myapp.controller.js</strong> 소스를 작성한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">angular</span><br><span class="line">  .<span class="title function_">module</span>(<span class="string">&quot;myapp.controller&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">  .<span class="title function_">controller</span>(<span class="string">&quot;userListController&quot;</span>, [</span><br><span class="line">    <span class="string">&quot;$scope&quot;</span>,</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">$scope</span>) &#123;</span><br><span class="line">      $scope.<span class="property">test</span> = <span class="string">&quot;Hello Test!&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  ]);</span><br></pre></td></tr></table></figure>

<p>이제 myapp.controller.js 를 karma.conf.js에 추가해 준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">files</span>: [</span><br><span class="line">    <span class="string">&#x27;node_modules/angular/angular.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;node_modules/angular-mocks/angular-mocks.js&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;app/src/app.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app/src/service/myapp.service.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app/src/controller/myapp.controller.js&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;app/src/test/test*.js&#x27;</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>karma를 종료했다 다시 실행한다 – (소스 및 스펙 변경이 바로 적용 안된다면…) 실제 테스트가 제대로 수행되면 알개 같이 SUCCESS 메시지를 볼 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6): Executed 3 of 3 SUCCESS (0.018 secs / 0.013 secs)</span><br></pre></td></tr></table></figure>

<h4 id="컨트롤로-메서드-단위-테스트"><a href="#컨트롤로-메서드-단위-테스트" class="headerlink" title="컨트롤로 메서드 단위 테스트"></a>컨트롤로 메서드 단위 테스트</h4><p>myapp.service 에 ‘UserService’ 를 선언한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">angular</span><br><span class="line">  .<span class="title function_">module</span>(<span class="string">&quot;myapp.service&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">  .<span class="title function_">factory</span>(<span class="string">&quot;UserService&quot;</span>, [</span><br><span class="line">    <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  ]);</span><br></pre></td></tr></table></figure>

<p>컨트롤러에 userList 배열을 선언해 주낟.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">controller</span>(<span class="string">&#x27;userListController&#x27;</span>, [<span class="string">&#x27;$scope&#x27;</span>, <span class="keyword">function</span>(<span class="params">$scope</span>) &#123;</span><br><span class="line">    $scope.<span class="property">test</span> = <span class="string">&quot;Hello Test!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    $scope.<span class="property">userList</span> = [];</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>

<p>test.controller.js 스펙에</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;서비스 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> userListController, scope, mockService;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">module</span>(<span class="string">&quot;myapp.controller&quot;</span>)); <span class="comment">//모듈 로드</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&quot;컨트롤러 모듈 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;컨트롤러 들여오기&quot;</span>, <span class="title function_">inject</span>([</span><br><span class="line">      <span class="string">&quot;$rootScope&quot;</span>,</span><br><span class="line">      <span class="string">&quot;$controller&quot;</span>,</span><br><span class="line">      <span class="keyword">function</span> (<span class="params">$rootScope, $controller</span>) &#123;</span><br><span class="line">        scope = $rootScope.$new();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//임의 사용자 조회 서비스를 만든다.</span></span><br><span class="line">        mockService = &#123;</span><br><span class="line">          <span class="attr">getUserList</span>: <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">            callback.<span class="title function_">call</span>(<span class="literal">null</span>, [&#123; <span class="attr">name</span>: <span class="string">&quot;Hello&quot;</span> &#125;]);</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 대상 컨트롤러에 의존성을 주입하고 &#x27;UserService&#x27; 서비스를 주입한다.</span></span><br><span class="line">        userListController = $controller(<span class="string">&quot;userListController&quot;</span>, &#123;</span><br><span class="line">          <span class="attr">$scope</span>: scope,</span><br><span class="line">          <span class="title class_">UserService</span>: mockService,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    ]));</span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;userListController 컨트롤러가 정의되어 있다.&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">expect</span>(userListController).<span class="title function_">toBeDefined</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 사용자 조회 함수를 테스트 한다.</span></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;사용자를 조회한다.&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      scope.<span class="title function_">searchUsers</span>();</span><br><span class="line">      <span class="comment">// 1건의 결과가 있다.</span></span><br><span class="line">      <span class="title function_">expect</span>(scope.<span class="property">userList</span>.<span class="property">length</span>).<span class="title function_">toEqual</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>컨트롤러에 searchUsers() 함수가 없으므로 에러가 발생한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TypeError: scope.searchUsers is not a function</span><br></pre></td></tr></table></figure>

<p>컨트롤러에 UserService를 주입하고, searchusers() 함수를 선언해 준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">controller</span>(<span class="string">&#x27;userListController&#x27;</span>, [<span class="string">&#x27;$scope&#x27;</span>,<span class="string">&#x27;UserService&#x27;</span>, <span class="keyword">function</span>(<span class="params">$scope, UserService</span>) &#123;</span><br><span class="line">    $scope.<span class="property">test</span> = <span class="string">&quot;Hello Test!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    $scope.<span class="property">userList</span> = [];</span><br><span class="line"></span><br><span class="line">    $scope.<span class="property">searchUsers</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title class_">UserService</span>.<span class="title function_">getUserList</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">        $scope.<span class="property">userList</span> = data;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>

<h4 id="서비스-단위-테스트"><a href="#서비스-단위-테스트" class="headerlink" title="서비스 단위 테스트"></a>서비스 단위 테스트</h4><p>앞서 서비스로 UserService 팩토리를 선언했다. 제대로 들여오는지 테스트 스펙에 다음 같이 선언할 수 있다. test.service.js 스펙에 다음을 추가하자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">it</span>(<span class="string">&quot;UserService가 정의되어 있다&quot;</span>, <span class="title function_">inject</span>(<span class="keyword">function</span> (<span class="params">UserService</span>) &#123;</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title class_">UserService</span>).<span class="title function_">toBeDefined</span>();</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>이제 getUserList() 함수를 테스트해보자</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> users;</span><br><span class="line"></span><br><span class="line"><span class="title function_">it</span>(<span class="string">&quot;UserService.getUserList 가 사용자를 조회한다&quot;</span>, <span class="title function_">inject</span>(<span class="keyword">function</span> (<span class="params"></span></span><br><span class="line"><span class="params">  UserService,</span></span><br><span class="line"><span class="params">  $httpBackend</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// http 응답</span></span><br><span class="line">  $httpBackend.<span class="title function_">when</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;sample.json&quot;</span>).<span class="title function_">response</span>([&#123; <span class="attr">name</span>: <span class="string">&quot;test&quot;</span> &#125;]);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//서비스를 호출한다.</span></span><br><span class="line">  <span class="title class_">UserService</span>.<span class="title function_">getUserList</span>(<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    users = respond.<span class="property">data</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  $httpBackend.<span class="title function_">flush</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// http 응답에 1건이 있으므로</span></span><br><span class="line">  <span class="title function_">expect</span>(d.<span class="property">length</span>).<span class="title function_">toBe</span>(<span class="number">1</span>);</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<p>실제 getUserList() 함수가 구현 안되어 있으므로 다음 같이 실패가 나타난다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">20 12 2017 14:59:44.061:INFO [watcher]: Changed file &quot;/Users/qkboo/www-app/angularjs-karma/app/src/test/test.service.js&quot;.</span><br><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6) 서비스 테스트 UserService.getUserList 가 사용자를 조회한다 FAILED</span><br><span class="line">  TypeError: UserService.getUserList is not a function</span><br></pre></td></tr></table></figure>

<p>실제 서비스 객체에 함수를 선언해 주자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">factory</span>(<span class="string">&#x27;UserService&#x27;</span>, [<span class="string">&#x27;$http&#x27;</span>, <span class="keyword">function</span>(<span class="params">$http</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">getUserList</span>: <span class="keyword">function</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">      $http.<span class="title function_">get</span>(<span class="string">&#x27;sample.json&#x27;</span>)</span><br><span class="line">        .<span class="title function_">then</span>(callback);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;])</span><br></pre></td></tr></table></figure>

<h4 id="Directive-테스트"><a href="#Directive-테스트" class="headerlink" title="Directive 테스트"></a>Directive 테스트</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;디렉티브 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">module</span>(<span class="string">&quot;myapp.directives&quot;</span>)); <span class="comment">//모듈 로드</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&quot;app-version 디렉티브 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;현재 버전 출력&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">module</span>(<span class="keyword">function</span> (<span class="params">$provide</span>) &#123;</span><br><span class="line">        $provide.<span class="title function_">value</span>(<span class="string">&quot;version&quot;</span>, <span class="string">&quot;TEST_VER&quot;</span>);</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="title function_">inject</span>([</span><br><span class="line">        <span class="string">&quot;$compile&quot;</span>,</span><br><span class="line">        <span class="string">&quot;$rootScope&quot;</span>,</span><br><span class="line">        <span class="keyword">function</span> (<span class="params">$compile, $rootScope</span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> element = $compile(<span class="string">&quot;&lt;span app-version&gt;&lt;/span&gt;&quot;</span>)($rootScope);</span><br><span class="line">          <span class="title function_">expect</span>(element.<span class="title function_">text</span>()).<span class="title function_">toEqual</span>(<span class="string">&quot;TEST_VER&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ]);</span><br><span class="line">    &#125;); <span class="comment">//it</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>디렉티브 모듈을 선언한다</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">angular</span><br><span class="line">  .<span class="title function_">module</span>(<span class="string">&quot;myapp.directives&quot;</span>, [])</span><br><span class="line"></span><br><span class="line">  .<span class="title function_">directive</span>(<span class="string">&quot;appVersion&quot;</span>, [</span><br><span class="line">    <span class="string">&quot;version&quot;</span>,</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">version</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">scope, elm, attrs</span>) &#123;</span><br><span class="line">        elm.<span class="title function_">text</span>(version);</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  ]);</span><br></pre></td></tr></table></figure>

<p>추가한 소스를 karma.config.js 에 추가해 준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">files</span>: [</span><br><span class="line">        <span class="string">&#x27;node_modules/angular/angular.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;node_modules/angular-mocks/angular-mocks.js&#x27;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;app/src/app.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/service/myapp.service.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/controller/myapp.controller.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/directive/myapp.directive.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/test/test*.js&#x27;</span></span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>

<h4 id="필터-테스트"><a href="#필터-테스트" class="headerlink" title="필터 테스트"></a>필터 테스트</h4><p>필터를 테스트 할 때는 필터를 inject 한 후에 호출하면서 진행한다. 먼저 테스트 스펙을 작성해 보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;필터 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">module</span>(<span class="string">&quot;myapp.filters&quot;</span>)); <span class="comment">//모듈 로드</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> $filter;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&quot;length 필터 테스트&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">beforeEach</span>(<span class="title function_">inject</span>(<span class="keyword">function</span> (<span class="params">_$filter_</span>) &#123;</span><br><span class="line">      $filter = _$filter_;</span><br><span class="line">    &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&quot;null 이면 0을 반환&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> length = $filter(<span class="string">&quot;length&quot;</span>);</span><br><span class="line">      <span class="title function_">expect</span>(<span class="title function_">length</span>(<span class="literal">null</span>)).<span class="title function_">toEqual</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>length 필터를 선언한 myapp.filters.js 소스</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title function_">module</span>(<span class="string">&quot;myapp.filters&quot;</span>, []).<span class="title function_">filter</span>(<span class="string">&quot;length&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">text</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="string">&quot;&quot;</span> + (text || <span class="string">&quot;&quot;</span>)).<span class="property">length</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>karma.config.js 에 필터 소스를 추가해 준다.</p>
<p>추가한 소스를 karma.config.js 에 추가해 준다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">files</span>: [</span><br><span class="line">        <span class="string">&#x27;node_modules/angular/angular.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;node_modules/angular-mocks/angular-mocks.js&#x27;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="string">&#x27;app/src/app.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/service/myapp.service.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/controller/myapp.controller.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/filter/myapp.filters.js&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;app/src/test/test*.js&#x27;</span></span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>

<p>새 컨트롤이 추가된 후 karma를 재시작해서 테스트를 진행한다.</p>
<!--

<br>
<br>
### 샘플 테스팅 프로젝트


#### (윈도우)

> [테스트 프로젝트](https://github.com/eu81273/angularjs-testing-example.git) [^Angularjs 테스팅 - 이론부터 실전] 를 사용하자.

nodejs가 설치되었으면 테스트 프로젝트 폴더에서 karma를 설치한다.

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd angularjs-testing-example</span><br><span class="line">$ npm i –g karma</span><br></pre></td></tr></table></figure>

<p>그리고 필요하다면 karma 실행 파일 경로를 찾아서 PATH 환경변수에 추가해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ which karma</span><br><span class="line">/Users/qkboo/.nvm/versions/node/v8.9.1/bin/karma</span><br></pre></td></tr></table></figure>


<h4 id="inject-를-사용한-컨트롤러-예제"><a href="#inject-를-사용한-컨트롤러-예제" class="headerlink" title="$inject 를 사용한 컨트롤러 예제"></a>$inject 를 사용한 컨트롤러 예제</h4><p><a target="_blank" rel="noopener" href="http://guswnsxodlf.github.io/how-to-test-angularjs-using-karma-jasmine">http://guswnsxodlf.github.io/how-to-test-angularjs-using-karma-jasmine</a></p>
<p>app&#x2F;src&#x2F;app.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title function_">module</span>(<span class="string">&#x27;myapp&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;test.controller&#x27;</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">angular.<span class="title function_">module</span>(<span class="string">&#x27;test.controller&#x27;</span>, []);</span><br></pre></td></tr></table></figure>

<p>app&#x2F;src&#x2F;controller&#x2F;myapp.controller.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">angular.<span class="title function_">module</span>(<span class="string">&#x27;test.controller&#x27;</span>).<span class="title function_">controller</span>(<span class="string">&#x27;MainCtrl&#x27;</span>, [<span class="string">&#x27;$scope&#x27;</span>, <span class="keyword">function</span>(<span class="params">$scope</span>)&#123;</span><br><span class="line">    $scope.<span class="property">test</span> = <span class="string">&quot;Hello!&quot;</span>;</span><br><span class="line">&#125;]);</span><br></pre></td></tr></table></figure>

<p>그리고 karma 테스트 스펙을 작성한다. 테스트 스펙은 외부 모듈을 <a target="_blank" rel="noopener" href="https://docs.angularjs.org/api/ngMock/function/angular.mock.inject">ngMock</a> 를 사용해서 들여온다.</p>
<p>app&#x2F;src&#x2F;test&#x2F;testController.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">describe</span>(<span class="string">&quot;컨트롤러 테스트&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">module</span>(<span class="string">&#x27;test.controller&#x27;</span>)); <span class="comment">//모듈 로드</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> $controller;</span><br><span class="line">  <span class="title function_">beforeEach</span>(<span class="title function_">inject</span>(<span class="keyword">function</span>(<span class="params">_$controller_</span>)&#123; <span class="comment">// inject</span></span><br><span class="line">    $controller = _$controller_;</span><br><span class="line">  &#125;));</span><br><span class="line"></span><br><span class="line">  <span class="title function_">describe</span>(<span class="string">&#x27;MainCtrl&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; <span class="comment">// 컨트롤러가 로드됐는지...</span></span><br><span class="line">    <span class="title function_">it</span>(<span class="string">&#x27;MainCtrl이 정의되어 있다&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      <span class="keyword">var</span> $scope = &#123;&#125;;</span><br><span class="line">      <span class="keyword">var</span> <span class="title class_">MainCtrl</span> = $controller(<span class="string">&#x27;MainCtrl&#x27;</span>, &#123; <span class="attr">$scope</span>: $scope &#125;);</span><br><span class="line">      <span class="title function_">expect</span>(<span class="title class_">MainCtrl</span>).<span class="title function_">toBeDefined</span>();</span><br><span class="line">      <span class="title function_">expect</span>($scope.<span class="property">test</span>).<span class="title function_">toEqual</span>(<span class="string">&quot;Hello Test!&quot;</span>); <span class="comment">// 변수 테스트</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>이제 테스트 스크립을 실행해 보기 위해 karma.conf.js에 소스 파일들을 명시하자. files는 karma가 실행될 때 로드되는 파일의 path를 가지고 있는 배열이다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">files: [</span><br><span class="line">       &#x27;node_modules/angular/angular.js&#x27;,</span><br><span class="line">       &#x27;node_modules/angular-mocks/angular-mocks.js&#x27;,</span><br><span class="line">       &#x27;app/src/app.js&#x27;,</span><br><span class="line">       &#x27;app/src/controller/MainCtrl.js&#x27;,</span><br><span class="line">       &#x27;app/src/test/test*.js&#x27;</span><br><span class="line">   ],</span><br></pre></td></tr></table></figure>

<p>앞서 실행한 karma 를 종료하지 않아도 된다. 소스를 추가하고 변경하면 테스트가 자동으로 시작된다. 브라우저는 angular-mock으로 테스트하는 프레임워크로 브라우저 내용에는 별다른 정보가 나타나지 않는다,</p>
<p>터미널에 테스트가 실패하면</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Chrome 63.0.3239 (Mac OS X 10.12.6) 컨트롤러 테스트 MainCtrl MainCtrl이 정의되어 있다 FAILED</span><br><span class="line">  Expected &#x27;Hello!&#x27; to equal &#x27;Hello Test!&#x27;.</span><br></pre></td></tr></table></figure>

<p>–&gt;</p>
<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li></li>
<li><a target="_blank" rel="noopener" href="https://docs.angularjs.org/guide/unit-testing">angularjs Unit Testing</a></li>
<li><a target="_blank" rel="noopener" href="http://webframeworks.kr/tutorials/angularjs/angularjs_unit_test/">Angularjs 테스팅</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.outsider.ne.kr/1020">https://blog.outsider.ne.kr/1020</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-09-05T00:00:00.000Z" title="2017-9-5 9:00:00">2017-09-05</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:14:19.388Z" title="2022-2-25 1:14:19">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Angular/">Angular</a></span><span class="level-item">10분안에 읽기 (약 1562 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/09/05/nodejs-2017-09-05-angular-tour-1/">Angular4 Tutorial for Beginner -- (1)</a></h1><div class="content"><p>Angular 이용에 대한 튜토리얼은 <a target="_blank" rel="noopener" href="https://www.tektutorialshub.com/angular-2-tutorial/">Angular Tutorial for beginners to Professionals</a> 를 요약하고 있다.</p>
<h2 id="Angular-App"><a href="#Angular-App" class="headerlink" title="Angular App"></a>Angular App</h2><p>여기서는 angular cli를 사용해서 angular project를 생성하고 다루는데, 링크 <a href="!--swig%EF%BF%BC7--">Angular Cli Usages</a> 에서 새 프로젝트 실행에 대해 살펴볼 수 있다.</p>
<blockquote>
<p>Anguar 의 개발 환경은 <a target="_blank" rel="noopener" href="https://www.tektutorialshub.com/create-first-angular-2-application/">Create Angular2</a> 를 참조한다.</p>
</blockquote>
<h4 id="프로젝트-생성"><a href="#프로젝트-생성" class="headerlink" title="프로젝트 생성"></a>프로젝트 생성</h4><p><code>ng new</code> 명령으로 프로젝트를 생성한다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng new myproducts</span><br></pre></td></tr></table></figure>

<p>새로 생성한 프로젝트 디렉토리로 이동해서 서비스를 실행한다. <em>ng serve</em> 명령은 서버를 실행</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd myproducts</span><br><span class="line">ng serve</span><br></pre></td></tr></table></figure>

<p>브라우저로 localhost:4200 으로 접속</p>
<h4 id="디렉토리-구성"><a href="#디렉토리-구성" class="headerlink" title="디렉토리 구성"></a>디렉토리 구성</h4><p><code>ng new</code> 생성하는 템플릿은 이렇게 구성되 있다.</p>
<p><strong>Root</strong> 폴더</p>
<ul>
<li><strong>Angular-cli.json</strong>: Angular CLI를 위한 구성 파일.</li>
</ul>
<p><strong>.editorconfig</strong>:  에디터 설정 파일. <a target="_blank" rel="noopener" href="http://editorconfig.org/">http://editorconfig.org</a> 참고.<br><strong>.gitignore</strong>: git 소스 제어를 하지 않는 설정 파일.</p>
<ul>
<li><strong>karma.conf.js</strong>: karma test runner 설정 파일.</li>
<li><strong>package.json</strong>: npm 패키지 목록 설정 파일</li>
<li><strong>protractor.conf.js</strong>: The Configuration file for protractor end to end test runner.</li>
<li><strong>README.md</strong></li>
<li><strong>tsconfig.json</strong>: TypeScript compiler configuration for your IDE to pick up and give you helpful tooling.</li>
<li><strong>tslint.json</strong>: tslint is a static code analysis tool used in software development for checking Typescript code quality. To check if TypeScript source code complies with coding rules. TSLint checks your TypeScript code for readability, maintainability, and functionality errors</li>
<li><strong>typings.d.ts</strong>: Typescript type definition file</li>
</ul>
<p><strong>e2e</strong> 폴더</p>
<p><em>protractor</em> 가 엔드투엔드 테스트하는데 필요한 파일을 포함한다. <em>Protractor</em>는 실제 브라우저에 대비해 앱을 테스트할 수 있게 한다. <a target="_blank" rel="noopener" href="http://www.protractortest.org/#/">여기</a>서 자세한 것은 배울 수 있다.</p>
<h3 id="콤포넌트-분석"><a href="#콤포넌트-분석" class="headerlink" title="콤포넌트 분석"></a>콤포넌트 분석</h3><p>Angular CLI로 생성한 프로젝트는 여러 콤포넌트로 구성되어 있다. <em>src&#x2F;app&#x2F;</em> 밑에 콤포넌트 소스가 있다.</p>
<h4 id="app-component-ts"><a href="#app-component-ts" class="headerlink" title="app.component.ts"></a>app.component.ts</h4><p>앱의 뷰를 표현하고, 뷰는 화면의 한 부분이다. 3개로 구성되어 있다. class, class decorator, import statement</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-root&#x27;</span>,</span><br><span class="line">  <span class="attr">templateUrl</span>: <span class="string">&#x27;./app.component.html&#x27;</span>,</span><br><span class="line">  <span class="attr">styleUrls</span>: [<span class="string">&#x27;./app.component.css&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppComponent</span> &#123;</span><br><span class="line">  title = <span class="string">&#x27;app&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>export</strong> 키워드로 AppComponent class는 다른 콤포넌트에서 사용할 수 있다. 이런 콤포넌트 클래스는 속성과 메서드를 가질 수 있다.</p>
<p><strong>@Component</strong> decorator는 클래스 데코레이터로 이 콤포넌트에 대한 메타데이터를 제공한다. 이 메타데이터를 사용해서 Angular가 뷰를 생성한다.</p>
<ul>
<li>templateUrl:</li>
<li>styleUrl:</li>
<li>selector: angular에게 템플릿을 표시할 곳을 말한다. 이 콤포넌트에서 app-root 셀렉터는 index.html에서 사용한다.</li>
</ul>
<p><strong>import</strong> 구문 외부 라이브러리를 콤포넌트에서 사용하고자 할 때 사용. 여기서 @angular&#x2F;core 라이브러리에서 Component 데코레이터를 가져왔다.</p>
<h4 id="Root-모듈"><a href="#Root-모듈" class="headerlink" title="Root 모듈"></a>Root 모듈</h4><p>angular 앱은 모듈로 구성된다. <em>app.module.ts</em> 소스를 루트 모듈(root module)로 부른다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">BrowserModule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">NgModule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.component&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  <span class="attr">declarations</span>: [</span><br><span class="line">    <span class="title class_">AppComponent</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">imports</span>: [</span><br><span class="line">    <span class="title class_">BrowserModule</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">providers</span>: [],</span><br><span class="line">  <span class="attr">bootstrap</span>: [<span class="title class_">AppComponent</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>Angular 모듈의 구조는 콤포넌트 클래스와 비슷하다. class, class decorator, import</p>
<p><strong>Module class</strong> 는 콤포넌트와 비슷하게 <em>export</em>로 외부 모듈에서 사용할 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>Angular 모듈은 <strong>@NgModule</strong> 데코레이터를 필요로 한다. 이 데코레이터로 모듈에 관련한 메타데이터를 전달한다. 소스에서 <strong>@NgModule</strong>은 <em>declarations</em>, <em>imports</em>, <em>providers</em>, <em>bootstrap</em> 네 가지 필드를 선언하고 있다.</p>
<ul>
<li><strong>imports</strong>: 이 모듈에서 사용하는 모듈을 선언한다.</li>
<li><strong>Declarations</strong>: 이 모듈에 관련한 콤포넌트, 디렉티브, 파이프를 선언한다.</li>
<li><strong>Providers</strong>: 서비스를 선언하면 다른 콤포넌트가 사용할 수 있다.</li>
<li><strong>Bootstrap</strong>: 메타 데이터는 루트 콤포넌트를 식별한다.</li>
</ul>
<h4 id="Import-구문"><a href="#Import-구문" class="headerlink" title="Import 구문"></a>Import 구문</h4><p><strong>AppModuel</strong> 에서 요구하는 외부 라이브러리를 들여오는데 사용한다. 또한 원하는 AppComponent를 들여오기 위해서 AppComponent가 필요하다.</p>
<h3 id="부트스트래핑"><a href="#부트스트래핑" class="headerlink" title="부트스트래핑"></a>부트스트래핑</h3><p>루트 모듈을 부트스트랩 해보자. 먼저 화면에 보이기 위해서 템플릿 파일인 app.component.html 이 있다. 이것은 AppComponent에 바인딩 된다. 결국 AppComponent 가 AppModule이 로드될 때 부트스트랩된다고 알 수 있다.</p>
<p>그래서 앱이 올라올 때 Angular에게 AppModule을 적재하자고 묻는데 이것은 <strong>src&#x2F;main.ts</strong> 파일에서 완성된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; enableProdMode &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; platformBrowserDynamic &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser-dynamic&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">AppModule</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/app.module&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; environment &#125; <span class="keyword">from</span> <span class="string">&#x27;./environments/environment&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (environment.<span class="property">production</span>) &#123;</span><br><span class="line">  <span class="title function_">enableProdMode</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">platformBrowserDynamic</span>().<span class="title function_">bootstrapModule</span>(<span class="title class_">AppModule</span>)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(err));</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>platformBrowserDynamic</strong> 콤포넌트: angular 앱에서 부트스트랩을 위해 필요한 모든 함수들.</li>
<li><strong>enableProdMode</strong>: 기본적으로 개발자 모드로 실행하게 한다.</li>
<li><strong>environment</strong>: <em>environment.ts</em> 는 개발자 모드 환경이 있다. 개발자 환경에서 environments.ts 파일을 사용한다. 실제 상업 모드에서는 environments.prod.ts 가 사용된다. <strong>env</strong> 맵의 목록에서 어떤 파일이 사용되는지 확인할 수 있는데 <strong>angular-cli.json</strong> 파일에 있다.</li>
</ul>
<h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h4><p>앱의 메인 페이지이다. <strong><app-root></strong> 셀렉터가 콤포넌트를 태그 처럼 사용하게 한다. app.component.ts에 선언한데로 이 셀렉터에 템플릿이 표시된다.</p>
<h3 id="다른-파일"><a href="#다른-파일" class="headerlink" title="다른 파일"></a>다른 파일</h3><p>app 폴더 밑에 다른 파일을 살펴보자.</p>
<h4 id="Assets-폴더"><a href="#Assets-폴더" class="headerlink" title="Assets 폴더"></a>Assets 폴더</h4><p>이미지 혹은 앱을 빌드하는데 필요한 자원을 넣어 두는 곳.</p>
<h4 id="polyfills-ts"><a href="#polyfills-ts" class="headerlink" title="polyfills.ts"></a>polyfills.ts</h4><p>웹 표준을 다르게 구현&#x2F;지원하는 여러 브라우저를 위해 일반화를 해준다. 브라우저 지원 가이드에 따라서 <strong>core-js</strong>, <strong>zone.js</strong> 로 관리한다.</p>
<h4 id="styles-css"><a href="#styles-css" class="headerlink" title="styles.css"></a>styles.css</h4><p>전역에 지원하는 스타일을 선언한다.</p>
<h4 id="test-ts"><a href="#test-ts" class="headerlink" title="test.ts"></a>test.ts</h4><p>단위 테스트를 위한 관문.</p>
<h4 id="tsconfig-applspec-json"><a href="#tsconfig-applspec-json" class="headerlink" title="tsconfig.{applspec}.json"></a>tsconfig.{applspec}.json</h4><p>타입스크립 컴파일러 구성 과 테스트 구성파일.</p>
<h3 id="ng-명령"><a href="#ng-명령" class="headerlink" title="ng 명령"></a>ng 명령</h3><p>ng new, init, </p>
<h4 id="ng-new-명령"><a href="#ng-new-명령" class="headerlink" title="ng new 명령"></a>ng new 명령</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng new &lt;project-name&gt; [Options]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>–dry-run</strong>, <strong>-d</strong>: 시험 실행, 실제 프로젝트 파일은 만들지 않고 출력 파일만 생성한다. </li>
<li><strong>–verbose</strong>, <strong>-v</strong>: </li>
<li><strong>–skip</strong> : 프로젝트 생성 후에 npm 명령 실행 못한다.</li>
<li><strong>–skip-git</strong>: 이 프로젝트에는 git repository 생성 못한다.</li>
<li><strong>–</strong> : 새 프로젝트를 생성할 부모 디렉토리.</li>
</ul>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.tektutorialshub.com/create-first-angular-2-application/">https://www.tektutorialshub.com/create-first-angular-2-application/</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-09-02T00:30:00.000Z" title="2017-9-2 9:30:00">2017-09-02</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:14:19.380Z" title="2022-2-25 1:14:19">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Angular/">Angular</a></span><span class="level-item">8분안에 읽기 (약 1155 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/09/02/nodejs-2017-09-02-angular-cli/">Angular 개발환경</a></h1><div class="content"><h2 id="Angular4-CLI"><a href="#Angular4-CLI" class="headerlink" title="Angular4 CLI"></a>Angular4 CLI</h2><p>2017년 3월에 기존 2.x 버전에 호환하는 Angular 4.0.0이 출시되었다. [^1] </p>
<br/>
### CLI Quick Start

<p><a target="_blank" rel="noopener" href="https://cli.angular.io/">Angular CLI</a>는 명령행 인터페이스로 프로젝트를 생성, 파일 추가 그리고 개발 태스크 - 테스트, 번들, 개발에 대한 기능을 제공하고 있다.<br>여기서 Angular CLI로 TypeScript 에서 앱을 개발하는 과정을 <a target="_blank" rel="noopener" href="https://angular.io/guide/styleguide">Style Guide</a>가 권장하는데 맞게 진행해 보자</p>
<p><a target="_blank" rel="noopener" href="https://angular.io/generated/zips/cli-quickstart/cli-quickstart.zip">예제 다운로드</a></p>
<h4 id="개발환경-설정"><a href="#개발환경-설정" class="headerlink" title="개발환경 설정"></a>개발환경 설정</h4><p><a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">node.js와 npm</a>에 대해 사용이 가능해야 하고 구성해야 한다.</p>
<p>Angular CLI를 전역환경에 설치한다. 시간이 소요된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @angular/cli</span><br></pre></td></tr></table></figure>

<p><code>ng</code> 명령을 사용할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng -v</span><br></pre></td></tr></table></figure>


<h4 id="CLI에서-새-프로젝트-생성"><a href="#CLI에서-새-프로젝트-생성" class="headerlink" title="CLI에서 새 프로젝트 생성"></a>CLI에서 새 프로젝트 생성</h4><p><code>ng new</code> 명령으로 프로젝트를 생성한다 - 생성으로 관련 npm 패키지를 설치하는 과정이 길다. [^2]</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng new my-app</span><br></pre></td></tr></table></figure>

<p>새로 생성한 프로젝트 디렉토리로 이동해서 서비스를 실행한다. <em>ng serve</em> 명령은 서버를 실행하고, 파일을 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd my-app</span><br><span class="line">ng serve --open</span><br></pre></td></tr></table></figure>



<br/>
#### Angular QuickStart Source

<p><a target="_blank" rel="noopener" href="https://github.com/angular/quickstart.git">Angular Quickstart Source</a> 를 사용해서 <a target="_blank" rel="noopener" href="https://coursetro.com/posts/code/55/How-to-Install-an-Angular-4-App">CLI 없이 Angular 4를 시작</a>할 수 있다. – 여러 의존성 문제가 발생한다.</p>
<ul>
<li>node v4.x.x 와 npm 3.x.x 이상을 필요로한다.</li>
</ul>
<p>To use the Angular 2 Quickstart, you run:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/angular/quickstart.git my-proj</span><br><span class="line">$ <span class="built_in">cd</span> my-proj</span><br></pre></td></tr></table></figure>

<p>Quickstart source 에 푸시하지 않으려면 <em>.git</em> 폴더를 삭제해도 무방하다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf .git  <span class="comment"># OS/X (bash)</span></span><br><span class="line">rd .git /S/Q <span class="comment"># windows</span></span><br></pre></td></tr></table></figure>

<p>또한 테스트와 저장소 유지를 위해 사용하는 <em>non-essential</em>을 삭제해도 된다.</p>
<p>Linux (bash)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xargs rm -rf &lt; non-essential-files.txt</span><br><span class="line">rm src/app/*.spec*.ts</span><br><span class="line">rm non-essential-files.txt</span><br></pre></td></tr></table></figure>

<p>OS&#x2F;X (bash)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xargs rm -rf &lt; non-essential-files.osx.txt</span><br><span class="line">rm src/app/*.spec*.ts</span><br><span class="line">rm non-essential-files.osx.txt</span><br></pre></td></tr></table></figure>

<p>Windows</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for /f %i in (non-essential-files.txt) do del %i /F /S /Q</span><br><span class="line">rd .git /s /q</span><br><span class="line">rd e2e /s /q</span><br></pre></td></tr></table></figure>

<p>패키지를 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>이제 최신 angular4 패키지를 설치하고 package.json 에 저장한다.</p>
<p>To upgrade, paste (Mac only):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @angular/&#123;common,compiler,compiler-cli,core,forms,http,platform-browser,platform-browser-dynamic,platform-server,router,animations&#125;@next --save</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @angular/common@next @angular/compiler@next @angular/compiler-cli@next @angular/core@next @angular/forms@next @angular/http@next @angular/platform-browser@next @angular/platform-browser-dynamic@next @angular/platform-server@next @angular/router@next @angular/animations@next --save</span><br></pre></td></tr></table></figure>

<p>npm install @angular&#x2F;core  @angular&#x2F;http –save</p>
<p>Typescript 이 설치되어 있지 않다면 역시 설치해 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install typescript@2.3 --save</span><br></pre></td></tr></table></figure>

<p>시작</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>


<h3 id="앱-프로젝트-살펴보기"><a href="#앱-프로젝트-살펴보기" class="headerlink" title="앱 프로젝트 살펴보기"></a>앱 프로젝트 살펴보기</h3><h4 id="Angular-component-수정"><a href="#Angular-component-수정" class="headerlink" title="Angular component 수정"></a>Angular component 수정</h4><p><strong>app-root</strong> 로 불리는 * .&#x2F;src&#x2F;app&#x2F;app.component.ts.* 콤포넌트를 수정해 보자. 에디터에서 열고 <strong>title</strong> 속성을 수정해 보자.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Component</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-root&#x27;</span>,</span><br><span class="line">  <span class="attr">templateUrl</span>: <span class="string">&#x27;./app.component.html&#x27;</span>,</span><br><span class="line">  <span class="attr">styleUrls</span>: [<span class="string">&#x27;./app.component.css&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppComponent</span> &#123;</span><br><span class="line">  title = <span class="string">&#x27;안녕하세요. Angular App&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>.&#x2F;app.component.css</em> 스타일시트 파일을 수정해 보자.</p>
<h4 id="css-수정"><a href="#css-수정" class="headerlink" title="css 수정"></a>css 수정</h4><p><em>src&#x2F;app&#x2F;app.component.css</em> 에서 스타일을 수정해 보자.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#369</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Arial, Helvetica, sans-serif;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">250%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="프로젝트-구성"><a href="#프로젝트-구성" class="headerlink" title="프로젝트 구성"></a>프로젝트 구성</h4><p><code>src</code> 폴더는 Angular components, templates, styles, images 등을 포함하고 있다.</p>
<table>
<thead>
<tr>
<th>파일</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>app&#x2F;app.component.{ts,html,css,spec.ts}</td>
<td><strong>AppComponent</strong>를 HTML 템플릿, CSS 스타일, 단위 테스트와 함게 선언한다. 이것은 앱에 관련한 계층적인 콤포넌트 트리가 되는 root 콤로넌트다.</td>
</tr>
</tbody></table>
<h3 id="ng-기본-명령"><a href="#ng-기본-명령" class="headerlink" title="ng 기본 명령"></a>ng 기본 명령</h3><p><code>ng serve</code> 로 서버를 제공한다. 기본 <code>http://localhost:4200/</code> 에서 확인한다. 그리고 변경된 내용은 자동으로 서버에 적용된다.</p>
<p>서비스 포트와 호스트는 기본 포트는 4200번으로 <strong>.angular-cli.json</strong> 파일에 <strong>defaults</strong> 섹션에 선언할 수 있다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;defaults&quot;: &#123;</span><br><span class="line">    &quot;styleExt&quot;: &quot;css&quot;,</span><br><span class="line">    &quot;component&quot;: &#123;&#125;,</span><br><span class="line">    &quot;serve&quot;: &#123;</span><br><span class="line">      &quot;port&quot;: 4201,</span><br><span class="line">      &quot;host&quot;: 127.0.0.1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="Code-발판"><a href="#Code-발판" class="headerlink" title="Code 발판"></a>Code 발판</h4><p>새로운 콤포넌트를 추가하려면 <code>ng generate component component-name</code> 명령을 실행하면 새로운 모듈이 추가된다. </p>
<p><strong>ng generate</strong> 명령</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng generate directive|pipe|service|class|guard|interface|enum|module</span><br></pre></td></tr></table></figure>

<h4 id="Build"><a href="#Build" class="headerlink" title="Build"></a>Build</h4><p>Run <code>ng build</code> 명령은 프로젝트를 빌드한다. 빌드 결과물은  <strong>dist&#x2F;</strong> 디렉토리에 저장된다. <code>-prod</code> 옵션을 사용하면 완성본을 구성할 수 있다.</p>
<h4 id="Running-unit-tests"><a href="#Running-unit-tests" class="headerlink" title="Running unit tests"></a>Running unit tests</h4><p>단위 테스트를 수행할 수 있는데, <code>ng test</code> 는 <a target="_blank" rel="noopener" href="https://karma-runner.github.io/">Karma</a>를 통해서 단위테스트를 수행한다.</p>
<h4 id="Running-end-to-end-tests"><a href="#Running-end-to-end-tests" class="headerlink" title="Running end-to-end tests"></a>Running end-to-end tests</h4><p>Run <code>ng e2e</code> to execute the end-to-end tests via <a target="_blank" rel="noopener" href="http://www.protractortest.org/">Protractor</a>.<br>Before running the tests make sure you are serving the app via <code>ng serve</code>.</p>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><p><a target="_blank" rel="noopener" href="https://coursetro.com/posts/code/55/How-to-Install-an-Angular-4-App">CLI 없이 Angular 4를 시작</a></p>
<p>[^1]: <a target="_blank" rel="noopener" href="http://angularjs.blogspot.kr/2017/03/angular-400-now-available.html">Angular 4.0.0 Now Available</a><br>[^2]: <a target="_blank" rel="noopener" href="https://angular.io/guide/quickstart">Angular 4 Quick Start</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-09-02T00:00:00.000Z" title="2017-9-2 9:00:00">2017-09-02</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:14:19.367Z" title="2022-2-25 1:14:19">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a><span> / </span><a class="link-muted" href="/categories/Programming/Angular/">Angular</a></span><span class="level-item">4분안에 읽기 (약 591 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/09/02/nodejs-2017-09-02-angular-0start/">Angular 개발환경</a></h1><div class="content"><h2 id="Angular"><a href="#Angular" class="headerlink" title="Angular"></a>Angular</h2><p>모바일, 데스크탑 웹 앱 구축을 지원하는 UI Framework 이다.</p>
<p>Version History</p>
<ul>
<li>Angular 2: Initial Release   14.09.2016</li>
<li>Angular 4: Release on 23.03.2017<ul>
<li>2017년 3월에 기존 2.x 버전에 호환하는 Angular 4.0.0이 출시되었다. [^1]</li>
</ul>
</li>
<li>Angular 5: Currently  in beta 4 release 16.08.2017</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://github.com/angular/angular/blob/master/CHANGELOG.md">Angular Changelog</a> 에서 최신 정보를 얻을 수 있다.</p>
<h3 id="Angular4-특징"><a href="#Angular4-특징" class="headerlink" title="Angular4 특징"></a>Angular4 특징</h3><p>기존 Angular 2에 비해 새로운게 많이 추가되었다.</p>
<h5 id="작고-빠르게"><a href="#작고-빠르게" class="headerlink" title="작고 빠르게"></a>작고 빠르게</h5><p>Angular 4 앱은 이전 버전에 비해 더 작은 공간이 소모되고 빠른 실행이 된다.</p>
<h5 id="View-engine"><a href="#View-engine" class="headerlink" title="View engine"></a>View engine</h5><h5 id="개선된-nglf-와-ngFor"><a href="#개선된-nglf-와-ngFor" class="headerlink" title="개선된 *nglf 와 *ngFor"></a>개선된 <strong>*nglf</strong> 와 <strong>*ngFor</strong></h5><p>템플릿 바인딩이 변겨오디었는데 <code>if/else</code> 문법을 사용하고 관찰할 대상에 대해 변수를 대입할 수 있다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> *<span class="attr">ngIf</span>=<span class="string">&quot;userList | async as users; else loading&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">user-profile</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let user of users; count as count; index as i&quot;</span> [<span class="attr">user</span>]=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">User &#123;&#123;i&#125;&#125; of &#123;&#123;count&#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">user-profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ng-template</span> #<span class="attr">loading</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">ng-template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="Angular-Universal"><a href="#Angular-Universal" class="headerlink" title="Angular Universal"></a>Angular Universal</h5><p>커뮤니티 안에서 개발되던 것을 angular team에서 받아들여, Universal 은 서버에서 Angular를 실행할 수 있게 해준다. <code>@angular/platform-server</code> 에 포함되어 있다.</p>
<p>Angular Universal 를 배우려면 먼저 @angular&#x2F;platform-server 안의 <a target="_blank" rel="noopener" href="https://github.com/angular/angular/blob/56f232cdd70a352cb9151bc7cfe8981bc2710ea6/modules/%40angular/platform-server/src/utils.ts#L63-L72">renderModuleFactory</a> 메서드를 살펴보고,  Rob Wormald’s <a target="_blank" rel="noopener" href="https://github.com/robwormald/ng-universal-demo/">Demo Repository</a> 를 살펴보라.</p>
<h5 id="TypeScript-2-1-2-2-호환"><a href="#TypeScript-2-1-2-2-호환" class="headerlink" title="TypeScript 2.1, 2.2 호환"></a>TypeScript 2.1, 2.2 호환</h5><p>최신 버전의 TypeScript 를 적용했다. 그러므로 ngc 스피드를 향샹 시켰고, 앱에서 형 점검을 더 좋게 했다.</p>
<h5 id="템플릿을-위한-소스-맵"><a href="#템플릿을-위한-소스-맵" class="headerlink" title="템플릿을 위한 소스 맵"></a>템플릿을 위한 소스 맵</h5><p>템플릿에서 어떤 에러가 발생하면 소스 맵을 생성해서 원래 템플릿에서 의미있는 내용을 보여준다.</p>
<h4 id="Flat-ESM-x2F-FESM"><a href="#Flat-ESM-x2F-FESM" class="headerlink" title="Flat ESM &#x2F; FESM"></a>Flat ESM &#x2F; FESM</h4><p>펼친 모듈을 배보한다. <a target="_blank" rel="noopener" href="https://github.com/angular/core-builds/blob/85cbe3f8d6107af033b0f8b56456c181cbcb5eb7/%40angular/core.js">예제 파일</a> 참조.</p>
<h5 id="ES2015-빌드"><a href="#ES2015-빌드" class="headerlink" title="ES2015 빌드"></a>ES2015 빌드</h5><p>우리 패키지를 the ES2015 Flat ESM format 형식으로 배포하고 있다. 이것은 실험적인 선택사항이다. 이 패키지와 합친 경우 7% 번들 크기가 줄어드는 것으로 복되고 있다.</p>
<h4 id="4-0으로-업그레이드"><a href="#4-0으로-업그레이드" class="headerlink" title="4.0으로 업그레이드"></a>4.0으로 업그레이드</h4><p>Angular 의존성을 4.0.0으로 업그레이드는 쉽다.</p>
<h5 id="Linux-x2F-Mac"><a href="#Linux-x2F-Mac" class="headerlink" title="Linux&#x2F;Mac"></a>Linux&#x2F;Mac</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @angular/&#123;common,compiler,compiler-cli,core,forms,http,platform-browser,platform-browser-dynamic,platform-server,router,animations&#125;@latest typescript@latest --save </span><br></pre></td></tr></table></figure>

<h5 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @angular/common@latest @angular/compiler@latest @angular/compiler-cli@latest @angular/core@latest @angular/forms@latest @angular/http@latest @angular/platform-browser@latest @angular/platform-browser-dynamic@latest @angular/platform-server@latest @angular/router@latest @angular/animations@latest typescript@latest --save</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://angular-update-guide.firebaseapp.com/">Angular Update guide</a> 참조.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-08-31T16:00:00.000Z" title="2017-9-1 1:00:00">2017-09-01</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:14:19.354Z" title="2022-2-25 1:14:19">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">12분안에 읽기 (약 1778 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/09/01/nodejs-2017-09-01-typescript-2gulp/">Typescript / Gulp</a></h1><div class="content"><p>자바스크립트 개발자 또는 경험자를 위한 typescriptlang.org 의 Tutorials 를 정리했다.</p>
<ul>
<li><a href="!--swig%EF%BF%BC25--">5분에 끝내는 TypeScript</a></li>
<li>Gulp</li>
<li>Migrating from Javascript</li>
<li>React &amp; Webpack</li>
</ul>
<h2 id="Gulp"><a href="#Gulp" class="headerlink" title="Gulp"></a>Gulp</h2><p><a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> 와 함께 TypeScript 를 빌드할 수 있고 Gulp pipeline에 Browserify, uglify, or Watchify 를 추가할 수 있다. 여기서 Babelify를 사용한 Babel 함수화에 대한 함수화를 추가할 것이다.</p>
<blockquote>
<p>Node.js와 npm을 다룰 수 있다고 가정한다.</p>
</blockquote>
<h3 id="프로젝트"><a href="#프로젝트" class="headerlink" title="프로젝트"></a>프로젝트</h3><p>새로운 프로젝트 디렉토리 <em>proj</em> 를 만들고, </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir proj</span><br><span class="line">cd proj</span><br><span class="line">mkdir src</span><br><span class="line">mkdir dist</span><br></pre></td></tr></table></figure>

<p>이 프로젝트 아래 <em>src</em>,<em>dist</em> 를 추가한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proj/</span><br><span class="line">   ├─ src/</span><br><span class="line">   └─ dist/</span><br></pre></td></tr></table></figure>

<p>그리고 package.json 파일을 만들기 위해 초기화 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>

<p>여러가지를 묻는데 그 중 시작점을 <code>./dist/main.js</code>로 지정한다.</p>
<h4 id="의존성-설치"><a href="#의존성-설치" class="headerlink" title="의존성 설치"></a>의존성 설치</h4><p><strong>gulp-cli</strong> 를 글로벌로 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g gulp-cli</span><br></pre></td></tr></table></figure>


<p>이어서 <strong>typescript</strong>, <strong>gulp</strong>, <strong>gulp-typescript</strong> 를 설치하고 dev 의존성으로 저장한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev typescript gulp gulp-typescript</span><br></pre></td></tr></table></figure>


<h4 id="간단한-예제"><a href="#간단한-예제" class="headerlink" title="간단한 예제"></a>간단한 예제</h4><p>src 폴더에 main.ts 를 작성하자.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params">compiler: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello from <span class="subst">$&#123;compiler&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">hello</span>(<span class="string">&quot;TypeScript&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>proj 폴더의 루트에 tsconfig.json을 작성한다.</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;files&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;src/main.ts&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;noImplicitAny&quot;</span><span class="punctuation">:</span> <span class="keyword">true</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es5&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>proj 폴더 루트에 gulpfile.js 를 작성한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&quot;gulp&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> ts = <span class="built_in">require</span>(<span class="string">&quot;gulp-typescript&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> tsProject = ts.<span class="title function_">createProject</span>(<span class="string">&quot;tsconfig.json&quot;</span>);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;default&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> tsProject.<span class="title function_">src</span>()</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">tsProject</span>())</span><br><span class="line">        .<span class="property">js</span>.<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;dist&quot;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>빌드하고 node로 실행한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br><span class="line">node dist/main.js</span><br></pre></td></tr></table></figure>


<h4 id="모듈을-추가한다"><a href="#모듈을-추가한다" class="headerlink" title="모듈을 추가한다"></a>모듈을 추가한다</h4><p>모듈을 추가해 보자, src&#x2F;greet.ts 소스를 작성한다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Hello from <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>export</code> 는 함숭름 sayHello를 외부에서 사용할 수 있게 해준다. 이 모듈을 src&#x2F;main.tx 에서 <code>import</code> 로 들여와서 사용한다. ES2015 모듈 문법을 사용하는데 Typescript은 CommonJS 모듈을 이어받아 사용한다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sayHello &#125; <span class="keyword">from</span> <span class="string">&quot;./greet&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">sayHello</span>(<span class="string">&quot;TypeScript&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>모듈은 tsconfig.json 에 등록해주어야 한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;files&quot;: [</span><br><span class="line">        &quot;src/main.ts&quot;,</span><br><span class="line">        &quot;src/greet.ts&quot;</span><br><span class="line">    ],</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>빌드하고 node로 실행한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br><span class="line">node dist/main.js</span><br></pre></td></tr></table></figure>


<h3 id="Browserify"><a href="#Browserify" class="headerlink" title="Browserify"></a>Browserify</h3><p>이제 Node 앱을 브라우저로 이전해 보자. 우리 모든 번들을 자바스크립으로 무꺼어야 한다. 이것은 Browserify가 수행해 준다. 이 모듈도 또한 CommonJS 모듈시스템을 사용한다. 그러므로 TypeScript과 Node.js 설정을 쉽고 변경없이 이전이 가능하다.</p>
<p>먼저 tsify와 vinyl-source-stream 을 설치한다. tsify 는 Browserify 플러그인으로 타입스크립트 컴파일러에 접근하게 해준다. vinyl-source-stream은 browserify의 결과 파일을 gulp가 이해하는 vinyl 형식으로 호환해준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev browserify tsify vinyl-source-stream</span><br></pre></td></tr></table></figure>


<h4 id="페이지-생성"><a href="#페이지-생성" class="headerlink" title="페이지 생성"></a>페이지 생성</h4><p>src에 index.html 파일을 만든다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">        &lt;title&gt;Hello World!&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;p id=&quot;greeting&quot;&gt;Loading ...&lt;/p&gt;</span><br><span class="line">        &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<p>main.ts 를 페이지에 접근할 수 있게 갱신한다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sayHello &#125; <span class="keyword">from</span> <span class="string">&quot;./greet&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showHello</span>(<span class="params">divName: <span class="built_in">string</span>, name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> elt = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(divName);</span><br><span class="line">    elt.<span class="property">innerText</span> = <span class="title function_">sayHello</span>(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">showHello</span>(<span class="string">&quot;greeting&quot;</span>, <span class="string">&quot;TypeScript&quot;</span>);</span><br></pre></td></tr></table></figure>


<p>그리고 gulfile.js 를 변경한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&quot;gulp&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> browserify = <span class="built_in">require</span>(<span class="string">&quot;browserify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> source = <span class="built_in">require</span>(<span class="string">&#x27;vinyl-source-stream&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> tsify = <span class="built_in">require</span>(<span class="string">&quot;tsify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> paths = &#123;</span><br><span class="line">    <span class="attr">pages</span>: [<span class="string">&#x27;src/*.html&#x27;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;copy-html&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(paths.<span class="property">pages</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;dist&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;default&quot;</span>, [<span class="string">&quot;copy-html&quot;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">browserify</span>(&#123;</span><br><span class="line">        <span class="attr">basedir</span>: <span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">        <span class="attr">debug</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">entries</span>: [<span class="string">&#x27;src/main.ts&#x27;</span>],</span><br><span class="line">        <span class="attr">cache</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">packageCache</span>: &#123;&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">plugin</span>(tsify)</span><br><span class="line">    .<span class="title function_">bundle</span>()</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">source</span>(<span class="string">&#x27;bundle.js&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;dist&quot;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>기본 의존성으로 copy-html 태스크를 추가한다: 가장먼저 copy&#x3D;html 이 실행된다.</li>
<li>Browserify를 호출해서 gulp-typescript 대신 tsify 플러그인을 사용한다.</li>
<li>bundle()이 호출되고 vinyl-source-stream을 사용해 bundle.js 로 소스를 모은다.</li>
</ul>
<blockquote>
<p>Notice that we specified debug: true to Browserify. This causes tsify to emit source maps inside the bundled JavaScript file. Source maps let you debug your original TypeScript code in the browser instead of the bundled JavaScript. You can test that source maps are working by opening the debugger for your browser and putting a breakpoint inside main.ts. When you refresh the page the breakpoint should pause the page and let you debug greet.ts.</p>
</blockquote>
<p>마지막으로 <code>gulp</code> 로 빌드하고 dist&#x2F;index.html을 브라우저에서 실행해 보자.</p>
<h3 id="Watchify-Babel-Uglify"><a href="#Watchify-Babel-Uglify" class="headerlink" title="Watchify, Babel, Uglify"></a>Watchify, Babel, Uglify</h3><p>Browserify로 코드를 묶었다. 다음 Browserify 플러그인으로 더 확장된 빌드를 구현할 수 있다.</p>
<ul>
<li>Watchify: gulp 를 시작하고 증분 컴파일을 할 수 있다. 수정-저장-갱신 사이클을 브라우저에서 유지할 수 있다.</li>
<li>Babel: ES2015  와 ES5, ES3 으로 변환할 수 있는 컴파일러 이다. Typescript 이 지우너하지 않는 사용자화 변경과 확장을 추가할 수 있다.</li>
<li>Uglify: 다운로드 시간을 줄일 수 있도록 코드를 압축한다.</li>
</ul>
<h4 id="Watchify"><a href="#Watchify" class="headerlink" title="Watchify"></a>Watchify</h4><p>다음 같이 설치한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev watchify gulp-util</span><br></pre></td></tr></table></figure>

<p>gulpfile.js 를 watchify 와 gulp-util 을 사용하게 변경한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&quot;gulp&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> browserify = <span class="built_in">require</span>(<span class="string">&quot;browserify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> source = <span class="built_in">require</span>(<span class="string">&#x27;vinyl-source-stream&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> watchify = <span class="built_in">require</span>(<span class="string">&quot;watchify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> tsify = <span class="built_in">require</span>(<span class="string">&quot;tsify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> gutil = <span class="built_in">require</span>(<span class="string">&quot;gulp-util&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> paths = &#123;</span><br><span class="line">    <span class="attr">pages</span>: [<span class="string">&#x27;src/*.html&#x27;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> watchedBrowserify = <span class="title function_">watchify</span>(<span class="title function_">browserify</span>(&#123;</span><br><span class="line">    <span class="attr">basedir</span>: <span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">    <span class="attr">debug</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">entries</span>: [<span class="string">&#x27;src/main.ts&#x27;</span>],</span><br><span class="line">    <span class="attr">cache</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">packageCache</span>: &#123;&#125;</span><br><span class="line">&#125;).<span class="title function_">plugin</span>(tsify));</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;copy-html&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(paths.<span class="property">pages</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;dist&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bundle</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> watchedBrowserify</span><br><span class="line">        .<span class="title function_">bundle</span>()</span><br><span class="line">        .<span class="title function_">pipe</span>(<span class="title function_">source</span>(<span class="string">&#x27;bundle.js&#x27;</span>))</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;dist&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;default&quot;</span>, [<span class="string">&quot;copy-html&quot;</span>], bundle);</span><br><span class="line">watchedBrowserify.<span class="title function_">on</span>(<span class="string">&quot;update&quot;</span>, bundle);</span><br><span class="line">watchedBrowserify.<span class="title function_">on</span>(<span class="string">&quot;log&quot;</span>, gutil.<span class="property">log</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>We wrapped our browserify instance in a call to watchify, and then held on to the result.</li>
<li>We called watchedBrowserify.on(“update”, bundle); so that Browserify will run the bundle function every time one of your TypeScript files changes.</li>
<li>We called watchedBrowserify.on(“log”, gutil.log); to log to the console.</li>
</ul>
<p>이제 gulp 를 실행하며 watchify에 의해 소스 변경을 점검하고 변경시 컴파일을 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ gulp</span><br><span class="line">[04:39:43] Using gulpfile ~/Works/typescript/proj/gulpfile.js</span><br><span class="line">[04:39:43] Starting <span class="string">&#x27;copy-html&#x27;</span>...</span><br><span class="line">[04:39:43] Finished <span class="string">&#x27;copy-html&#x27;</span> after 105 ms</span><br><span class="line">[04:39:43] Starting <span class="string">&#x27;default&#x27;</span>...</span><br><span class="line">[04:39:52] 3199 bytes written (0.38 seconds)</span><br><span class="line">[04:39:52] Finished <span class="string">&#x27;default&#x27;</span> after 8.66 s</span><br></pre></td></tr></table></figure>

<h4 id="Uglify"><a href="#Uglify" class="headerlink" title="Uglify"></a>Uglify</h4><p>uglify 는 코드를 난독화 시키고, 용량을 줄여 준다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev gulp-uglify vinyl-buffer gulp-sourcemaps</span><br></pre></td></tr></table></figure>

<p>gulpfile.js에 추가한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&quot;gulp&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> browserify = <span class="built_in">require</span>(<span class="string">&quot;browserify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> source = <span class="built_in">require</span>(<span class="string">&#x27;vinyl-source-stream&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> tsify = <span class="built_in">require</span>(<span class="string">&quot;tsify&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">&#x27;gulp-uglify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> sourcemaps = <span class="built_in">require</span>(<span class="string">&#x27;gulp-sourcemaps&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> buffer = <span class="built_in">require</span>(<span class="string">&#x27;vinyl-buffer&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> paths = &#123;</span><br><span class="line">    <span class="attr">pages</span>: [<span class="string">&#x27;src/*.html&#x27;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;copy-html&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(paths.<span class="property">pages</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;dist&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&quot;default&quot;</span>, [<span class="string">&quot;copy-html&quot;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">browserify</span>(&#123;</span><br><span class="line">        <span class="attr">basedir</span>: <span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">        <span class="attr">debug</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">entries</span>: [<span class="string">&#x27;src/main.ts&#x27;</span>],</span><br><span class="line">        <span class="attr">cache</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">packageCache</span>: &#123;&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">plugin</span>(tsify)</span><br><span class="line">    .<span class="title function_">bundle</span>()</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">source</span>(<span class="string">&#x27;bundle.js&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">buffer</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(sourcemaps.<span class="title function_">init</span>(&#123;<span class="attr">loadMaps</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">uglify</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(sourcemaps.<span class="title function_">write</span>(<span class="string">&#x27;./&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&quot;dist&quot;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>uglify 는 한번 호출하는데 - sourcemaps를 유지하기 위해 버퍼링하고 소스맵을 하기 위해 호출한다. 이것으로 분리된 소스맵 파일을 생성한다. gulp를 실행해 bundle.js 를 통해 최소화된 파일로 출력되는지 점검할 수 있다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br><span class="line">cat dist/bundle.js</span><br></pre></td></tr></table></figure>



<h4 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h4><p>Babel과 Bebel preset ES2015를 설치한다. 기본 설정으로 Uglify 같이 코드를 난독화 한다. 역시 vinyl-buffer, gulp-sourcemaps 가 필요하다. 파일 확장자 .js, .es, .es6 and .jsx 에 대해서만 다룬다. 그러므로 <strong>.ts</strong> 확장자도 추가할 필요가 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev babelify babel-preset-es2015 vinyl-buffer gulp-sourcemaps</span><br></pre></td></tr></table></figure>

<p>gulpfile.js 를 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> browserify = <span class="built_in">require</span>(<span class="string">&#x27;browserify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> source = <span class="built_in">require</span>(<span class="string">&#x27;vinyl-source-stream&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> tsify = <span class="built_in">require</span>(<span class="string">&#x27;tsify&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> sourcemaps = <span class="built_in">require</span>(<span class="string">&#x27;gulp-sourcemaps&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> buffer = <span class="built_in">require</span>(<span class="string">&#x27;vinyl-buffer&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> paths = &#123;</span><br><span class="line">    <span class="attr">pages</span>: [<span class="string">&#x27;src/*.html&#x27;</span>]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;copyHtml&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.<span class="title function_">src</span>(paths.<span class="property">pages</span>)</span><br><span class="line">        .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;dist&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;copyHtml&#x27;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">browserify</span>(&#123;</span><br><span class="line">        <span class="attr">basedir</span>: <span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">        <span class="attr">debug</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">entries</span>: [<span class="string">&#x27;src/main.ts&#x27;</span>],</span><br><span class="line">        <span class="attr">cache</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">packageCache</span>: &#123;&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">plugin</span>(tsify)</span><br><span class="line">    .<span class="title function_">transform</span>(<span class="string">&#x27;babelify&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">presets</span>: [<span class="string">&#x27;es2015&#x27;</span>],</span><br><span class="line">        <span class="attr">extensions</span>: [<span class="string">&#x27;.ts&#x27;</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">bundle</span>()</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">source</span>(<span class="string">&#x27;bundle.js&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(<span class="title function_">buffer</span>())</span><br><span class="line">    .<span class="title function_">pipe</span>(sourcemaps.<span class="title function_">init</span>(&#123;<span class="attr">loadMaps</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">    .<span class="title function_">pipe</span>(sourcemaps.<span class="title function_">write</span>(<span class="string">&#x27;./&#x27;</span>))</span><br><span class="line">    .<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;dist&#x27;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>그리고 tsconfig.js에 typescript 의 대상을 *”target”: “es5”*에서 ES2015로 명시해 준다.<br>Babel’s ES5 output should be very similar to TypeScript’s output for such a simple script.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-08-31T16:00:00.000Z" title="2017-9-1 1:00:00">2017-09-01</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:14:19.348Z" title="2022-2-25 1:14:19">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Programming/">Programming</a></span><span class="level-item">9분안에 읽기 (약 1296 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/09/01/nodejs-2017-09-01-typescript-1quickstart/">Typescript / 5min in Typescript</a></h1><div class="content"><p>자바스크립트 개발자 또는 경험자를 위한 typescriptlang.org 의 Tutorials 를 정리했다.</p>
<ul>
<li>5분에 끝내는 TypeScript</li>
<li><a href="!--swig%EF%BF%BC13--">Gulp</a></li>
<li>Migrating from Javascript</li>
<li>React &amp; Webpack</li>
</ul>
<h2 id="5분에-끝내는-TypeScript"><a href="#5분에-끝내는-TypeScript" class="headerlink" title="5분에 끝내는 TypeScript"></a>5분에 끝내는 TypeScript</h2><p>자바스크립트 개발자 또는 경험자가 알아야할 내용을 정리한 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html">TypeScript in 5min</a>을 정리했다.</p>
<h3 id="설치"><a href="#설치" class="headerlink" title="설치"></a>설치</h3><p>TypeScript는 Node.js를 사용하며, npm으로 typescript 지원 도구를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure>

<p>개발자용 nightly build도 설치 할 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript@next</span><br></pre></td></tr></table></figure>

<h4 id="tsc-컴파일러"><a href="#tsc-컴파일러" class="headerlink" title="tsc 컴파일러"></a>tsc 컴파일러</h4><p>TypeScript 소스를 <code>tsc</code> 컴파일러로 컴파일하고, 결과는 Javascript로 생성된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ tsc -V</span><br><span class="line">Version 2.5.2</span><br></pre></td></tr></table></figure>

<p>최신버전 갱신은 <a target="_blank" rel="noopener" href="https://blogs.msdn.microsoft.com/typescript/">Typscript blog</a> 를 참조한다.</p>
<h3 id="첫번째-TypeScript-파일"><a href="#첫번째-TypeScript-파일" class="headerlink" title="첫번째 TypeScript 파일"></a>첫번째 TypeScript 파일</h3><p>보통 Typescript 소스 확장자는 <strong>.ts</strong> 로 저장하고 <code>tsc</code> 컴파일러로 컴파일한다. <strong>.ts</strong> 파일을 컴파일 하면 <strong>.js</strong> 자바스크립트 소스파일이 생성된다.</p>
<p>예를 들어 아래 자바스크립트로 구성된 코드를 <strong>greeter.ts</strong> 파일에 입력한다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greeter</span>(<span class="params">person</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = <span class="string">&quot;Jone James&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="title function_">greeter</span>(user);</span><br></pre></td></tr></table></figure>


<p>그리고 컴파일 하면 자바스크립트 소스 <strong>greeter.js</strong> 가 생성된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tsc greeter.ts</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>greeter.ts</strong> 소스와 컴파일 결과 <strong>greeter.js</strong> 소스는 일치한다.</p>
</blockquote>
<h3 id="Type-annotations"><a href="#Type-annotations" class="headerlink" title="Type annotations"></a>Type annotations</h3><p>TypeScript에서 형(Types) 표기는 함수 혹은 변수에 의미를 부여하기 위한 방법으로, 아래 코드의 greeter 함수에 전달하는 인자가 <code>string</code> 형 이라고 의도하기 위해서, 변수 다음 <code>:</code>으로 오른쪽에 형을 지정(annotation)해 선언한다 - 즉, 문자열로 전달할 거야 하는 의도를 선언한다고 이해하면 된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greeter</span>(<span class="params">person: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = [<span class="string">&#x27;My&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="title function_">greeter</span>(user);</span><br></pre></td></tr></table></figure>

<p>이제 <code>tsc</code> 로 컴파일을 실행하면 아래 같이 형 지정 에러를 표시한다. 비슷하게 <code>greeter()</code> 함수의 매개변수를 모두 지우고 컴파일해도 비슷한 결과를 보여준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ tsc greeter.ts</span><br><span class="line">greeter_2.ts(7,9): error TS2345: Argument of <span class="built_in">type</span> <span class="string">&#x27;(string | number)[]&#x27;</span> is not assignable to parameter of <span class="built_in">type</span> <span class="string">&#x27;string&#x27;</span>.</span><br></pre></td></tr></table></figure>

<p>Typescript의 형 지정은 코드와 주어진 형 지정자를 기반으로 정적 분석을 제공한다.</p>
<p>이렇게 컴파일 에러는 발생하지만 <strong>.js</strong> 자바스크립트는 생성되는 것을 확인 할 수 있다. 코드에 에러가 있어도 TypeScript을 사용할 수 있다, 다만 <em>원래 의도데로 실행되지는 않는다</em>는 것을 경고해 준다.</p>
<h3 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h3><p>추상화를 위해 <strong>interface</strong> 를 사용해서 속성을 가진 개체를 선언 할 수 있다. </p>
<p>아래 Person 인터페이스는 <code>firstName</code>, <code>lastName</code> 속성으로 선언하고 있다. TypeScript에서는 <strong>내부 구조가 호환하면 두 객체는 호횐 된다</strong>고 한다. 이것은 명시적으로 <code>implements</code> 절을 사용하지 않고도 인터페이스가 요구하는 형태를 가지면 인터페이스에 동일하게 구현이 가능하다고 한다. 이제 greeter 함수를 인터페이스 Person 형으로 다음 같이 선언할 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">lastName</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greeter</span>(<span class="params">person: Person</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + person.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + person.<span class="property">lastName</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = &#123; <span class="attr">firstName</span>: <span class="string">&quot;Jane&quot;</span>, <span class="attr">lastName</span>: <span class="string">&quot;User&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="title function_">greeter</span>(user);</span><br></pre></td></tr></table></figure>

<p>이 소스를 <code>tsc</code> 로 컴파일 해도 형이 일치한다고 판단해서 경고가 없고 결과 자바스크립트를 HTML로 코딩해서 결과를 확인해 보자,</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>TypeScript Greeter<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;greeter_3interface.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h3><p>자바스크립에는 없는 클래스 기반의 객체지향 프로그래밍을 지원한다. <strong>class</strong> 키워드로 선언하고 속성과 메서드를 가진다. 또한 생성자 <code>constructor()</code> 에 <code>public</code> 접근제한자를 지정해서 추상화 단계를 결정하게 하고, 생성자의 public 지정자는 해당 이름으로 자동으로 속성을 생성하게 해준다. 이것은 클래스가 인터페이스와 잘 결합되게 해준다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="attr">fullName</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params"> <span class="keyword">public</span> firstName: <span class="built_in">string</span>, <span class="keyword">public</span> middleInitial: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">     <span class="keyword">public</span> lastName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fullName</span> = firstName + <span class="string">&quot; &quot;</span> + middleInitial + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="attr">firstName</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">lastName</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greeter</span>(<span class="params">person : Person</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + person.<span class="property">firstName</span> + <span class="string">&quot; &quot;</span> + person.<span class="property">lastName</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;Jane&quot;</span>, <span class="string">&quot;M.&quot;</span>, <span class="string">&quot;User&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="title function_">greeter</span>(user);</span><br></pre></td></tr></table></figure>

<p>Person 인터페이스를 요구받는 <code>greeter()</code>에 Student class의 생성자에 호혼한다. 그래서 <code>tsc</code>로 컴파일해도 아무 문제 없다.</p>
<p>다만, 클래스의 생성자 매개변수가 인자 수, 형 같이 다르면 다음 같이 에러를 발생한다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">greeter_4classes.<span class="title function_">ts</span>(<span class="number">18</span>,<span class="number">12</span>): error <span class="title class_">TS2554</span>: <span class="title class_">Expected</span> <span class="number">3</span> <span class="variable language_">arguments</span>, but got <span class="number">2.</span></span><br></pre></td></tr></table></figure>


<p>컴파일한 자바스크립은 HTML에서 실행할 수 있다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>TypeScript Greeter<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;greeter.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>실제 실행하면 Person 객체는 세번째 매개변수가 없기 때문에 <em>undefined</em> 로 나타난다.</p>
<blockquote>
<p>Hello, Jane undefined</p>
</blockquote>
<p>TypeScript에서 클래스 기반의 코드를 컴파일해서 자바스크립트 생성된 결과를 보면, 클래스는 자바스크립트의 프로토타입 기반의 객체지향 방법의 축약형이다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Student</span> = <span class="comment">/** <span class="doctag">@class</span> */</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Student</span>(<span class="params">firstName, middleInitial, lastName</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">firstName</span> = firstName;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">middleInitial</span> = middleInitial;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lastName</span> = lastName;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fullName</span> = firstName + <span class="string">&quot; &quot;</span> + middleInitial + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Student</span>;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>

<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html">Typescript in 5 min</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-07-12T03:00:00.000Z" title="2017-7-12 12:00:00">2017-07-12</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:14:19.331Z" title="2022-2-25 1:14:19">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/NodeJS/">NodeJS</a><span> / </span><a class="link-muted" href="/categories/NodeJS/Database/">Database</a></span><span class="level-item">9분안에 읽기 (약 1285 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/07/12/nodejs-2017-07-12-mongodb-mongoose/">NodeJS - mongoose</a></h1><div class="content"><p>이 글은 <a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/">mongoose doc</a> 에서 필요한 부분만 요약 정리했다.</p>
<h2 id="MongoDB와-Mongoose"><a href="#MongoDB와-Mongoose" class="headerlink" title="MongoDB와 Mongoose"></a>MongoDB와 Mongoose</h2><p>Node.js에서 Mongodb에 연결하기 위해서 Driver가 필요</p>
<h3 id="mongoose"><a href="#mongoose" class="headerlink" title="mongoose"></a>mongoose</h3><p>MongoDb를 위한 Node.js 커넥터로 Object Data Mapping (ODM)을 통해 MVC를 구현해 준다. </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://dzone.com/articles/using-mongodb-and-mongoose">using-mongodb-and-mongoose</a></li>
</ul>
<h4 id="설치"><a href="#설치" class="headerlink" title="설치"></a>설치</h4><p>프로젝트 폴더에서 npm으로 mongoose 모듈를 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i mongoose</span><br></pre></td></tr></table></figure>

<blockquote>
<p>npm &lt; 5 이하 버전은 <code>-S</code> 혹은 <code>--save</code> 옵션으로 모듈 의존성을 <em>package.json</em> 에 추가한다.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;body-parser&quot;</span>: <span class="string">&quot;~1.13.2&quot;</span>,</span><br><span class="line">    <span class="string">&quot;cookie-parser&quot;</span>: <span class="string">&quot;~1.3.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;debug&quot;</span>: <span class="string">&quot;~2.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;express&quot;</span>: <span class="string">&quot;~4.13.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;jade&quot;</span>: <span class="string">&quot;~1.11.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;mongoose&quot;</span>: <span class="string">&quot;^4.4.16&quot;</span>,</span><br><span class="line">    <span class="string">&quot;morgan&quot;</span>: <span class="string">&quot;~1.6.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;serve-favicon&quot;</span>: <span class="string">&quot;~2.3.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Scheme-사용"><a href="#Scheme-사용" class="headerlink" title="Scheme 사용"></a>Scheme 사용</h3><p>Scheme 는 <a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/models.html">Model</a> 로 변환해야 한다. <a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/models.html">^models</a><br><code>mongoose.model()</code> 메서드는 모델 이름과 스키마를 받아 변환한다.</p>
<blockquote>
<p>mongoose.model(modelName, schema);</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> schema = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;string&#x27;</span>, <span class="attr">size</span>: <span class="string">&#x27;string&#x27;</span> &#125;);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Tank</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;Tank&#x27;</span>, schema);</span><br></pre></td></tr></table></figure>

<p>model()에 전달한 <strong>modelName</strong>은 mongoose가 자동으로 컬렉션에서 복수형으로 찾는다. 예를 들어 위의 <em>Tank</em>는 <em>tanks</em> 컬렉션을 참조한다.</p>
<h3 id="connect"><a href="#connect" class="headerlink" title="connect()"></a>connect()</h3><p>mongoose 에서 mongodb 드라이버에 연결할 때 mongodb 버전에 따라 달리 접근한다. 또한 mongoose 4.x와 5.x 의 몇몇 옵션도 주의해서 사용해야 한다.</p>
<h4 id="mongodb-3-x-연결"><a href="#mongodb-3-x-연결" class="headerlink" title="mongodb 3.x 연결"></a>mongodb 3.x 연결</h4><p>mongoose 4.x 버전 부터는 Promise를 선언하고 connect()를 연결한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>);</span><br><span class="line"></span><br><span class="line">mongoose.<span class="property">Promise</span> = <span class="variable language_">global</span>.<span class="property">Promise</span>;</span><br><span class="line">mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://localhost/somecollection&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span>  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;connection succesful&#x27;</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err));</span><br><span class="line"></span><br><span class="line"><span class="comment">//or  mongo client option</span></span><br><span class="line">mongoose.<span class="title function_">connect</span>( <span class="string">&#x27;mongodb://localhost/somecollection&#x27;</span>, &#123; <span class="attr">useMongoClient</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>


<p>mongoose 5.x 버전 부터는 Promise  connect()를 연결한다.</p>
<h4 id="mongodb-2-x-연결"><a href="#mongodb-2-x-연결" class="headerlink" title="mongodb 2.x 연결"></a>mongodb 2.x 연결</h4><p>mongodb 2.x 버전에서 createConnection(), connect() 메서드를 사용해 연결한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">&#x27;mongoose&#x27;</span>); </span><br><span class="line"><span class="keyword">var</span> connection = mongoose.<span class="title function_">createConnection</span>(<span class="string">&#x27;mongodb://localhost/sensors&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Schemas</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">BookScheme</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">year</span>: <span class="title class_">String</span></span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line"><span class="comment">// Models</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">BookModel</span> = mongoose.<span class="title function_">model</span>( <span class="string">&#x27;Book&#x27;</span>, <span class="title class_">BookScheme</span>);</span><br></pre></td></tr></table></figure>


<h4 id="여러-연결"><a href="#여러-연결" class="headerlink" title="여러 연결"></a>여러 연결</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> conn      = mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://localhost/testA&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> conn2     = mongoose.<span class="title function_">connect</span>(<span class="string">&#x27;mongodb://localhost/testB&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">SensorModel</span> = conn.<span class="title function_">model</span>( <span class="string">&#x27;qkboo_sensor&#x27;</span>, <span class="title class_">Sensorcheme</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">ModelB</span>    = conn2.<span class="title function_">model</span>(<span class="string">&#x27;Model&#x27;</span>, <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">  title : &#123; type : <span class="title class_">String</span>, <span class="keyword">default</span> : <span class="string">&#x27;model in testB database&#x27;</span> &#125;</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>






<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><h4 id="save"><a href="#save" class="headerlink" title="save()"></a>save()</h4><p><a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/api.html#model_Model-save">Model#save()</a>는 주어진 도큐멘트를 저장한다.</p>
<ul>
<li>return: Promise</li>
</ul>
<h4 id="create"><a href="#create" class="headerlink" title="create()"></a>create()</h4><p><a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/api.html#model_Model.create">Model.create()</a> 는 하나 혹은 그 이상의 도큐멘트를 저장할 수 있다. <code>MyModel.create(docs)</code> 는 주어지는 도큐멘트 마다 <code>new MyModel(doc).save()</code> 를 수행한다.</p>
<h4 id="methods"><a href="#methods" class="headerlink" title="methods"></a>methods</h4><p>Model의 인스턴스는 documents 로 <a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/api.html#document-js">내장 메서드</a>가 제공되지만, 사용자가 새로운 메서드를 추가할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> animalSchema = <span class="keyword">new</span> <span class="title class_">Schema</span>(&#123; <span class="attr">name</span>: <span class="title class_">String</span>, <span class="attr">type</span>: <span class="title class_">String</span> &#125;);</span><br><span class="line"></span><br><span class="line">animalSchema.<span class="property">methods</span>.<span class="property">findSimilarTypes</span> = <span class="keyword">function</span>(<span class="params">cb</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">model</span>(<span class="string">&#x27;Animal&#x27;</span>).<span class="title function_">find</span>(&#123; <span class="attr">type</span>: <span class="variable language_">this</span>.<span class="property">type</span> &#125;, cb);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>이제 animalSchema 의 인스턴스는 새 메서드 <code>findSimilarTypes</code> 사용이 가능하다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Animal</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;Animal&#x27;</span>, animalSchema);</span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> <span class="title class_">Animal</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;dog&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line">dog.<span class="title function_">findSimilarTypes</span>(<span class="keyword">function</span>(<span class="params">err, dogs</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(dogs); <span class="comment">// woof</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h4 id="Statics"><a href="#Statics" class="headerlink" title="Statics"></a>Statics</h4><p>static method도 추가할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// assign a function to the &quot;statics&quot; object of our animalSchema</span></span><br><span class="line">animalSchema.<span class="property">statics</span>.<span class="property">findByName</span> = <span class="keyword">function</span>(<span class="params">name, cb</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">find</span>(&#123; <span class="attr">name</span>: <span class="keyword">new</span> <span class="title class_">RegExp</span>(name, <span class="string">&#x27;i&#x27;</span>) &#125;, cb);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Animal</span> = mongoose.<span class="title function_">model</span>(<span class="string">&#x27;Animal&#x27;</span>, animalSchema);</span><br><span class="line"><span class="title class_">Animal</span>.<span class="title function_">findByName</span>(<span class="string">&#x27;fido&#x27;</span>, <span class="keyword">function</span>(<span class="params">err, animals</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(animals);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h4 id="Db-prototype-authenticate"><a href="#Db-prototype-authenticate" class="headerlink" title="Db.prototype.authenticate"></a>Db.prototype.authenticate</h4><p>mongodb 3.6 이후는 인증시 Socket을 통한 인증을 거부한다. 그래서 Db.prototype.authenticate 을 사용하지 않고 .MongoClient.connect 에서 인증 서명서와 함께 사용해야 한다.</p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(node:24499) DeprecationWarning: Mongoose: mpromise (mongoose&#x27;s default promise library) is deprecated, plug in your own promise library instead: http://mongoosejs.com/docs/promises.html</span><br></pre></td></tr></table></figure>

<p>이것은 <code>.save()</code>, <code>query</code> 결과가  <a target="_blank" rel="noopener" href="https://promisesaplus.com/">Promises&#x2F;A+ conformant promises</a> 를 반환한다는 것이다. 반환된 결과로 MyModel.findOne({}).then() and yield MyModel.findOne({}).exec() 같은 작업을 할 수 있다는 의미가 된다.</p>
<p>Mongoose 4 는 기본으로 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/mpromise">mpromise</a>를 약속한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gnr = <span class="keyword">new</span> <span class="title class_">Band</span>(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Guns N&#x27; Roses&quot;</span>,</span><br><span class="line">  <span class="attr">members</span>: [<span class="string">&#x27;Axl&#x27;</span>, <span class="string">&#x27;Slash&#x27;</span>]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise = gnr.<span class="title function_">save</span>();</span><br><span class="line">assert.<span class="title function_">ok</span>(promise <span class="keyword">instanceof</span> <span class="built_in">require</span>(<span class="string">&#x27;mpromise&#x27;</span>));</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">doc</span>) &#123;</span><br><span class="line">  assert.<span class="title function_">equal</span>(doc.<span class="property">name</span>, <span class="string">&quot;Guns N&#x27; Roses&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Queries-are-not-promises"><a href="#Queries-are-not-promises" class="headerlink" title="Queries are not promises"></a>Queries are not promises</h4><p>Mongoose queries are not promises. 그러나 대신 양보와 비동기&#x2F;대기를 위해 <code>.then()</code> 함수를 가지고 있다. fully-fledged promise 가 필요하다면 <code>.exec()</code> 함수를 사용하라. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> query = <span class="title class_">Band</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;Guns N&#x27; Roses&quot;</span>&#125;);</span><br><span class="line">assert.<span class="title function_">ok</span>(!(query <span class="keyword">instanceof</span> <span class="built_in">require</span>(<span class="string">&#x27;mpromise&#x27;</span>)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// A query is not a fully-fledged promise, but it does have a `.then()`.</span></span><br><span class="line">query.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">doc</span>) &#123;</span><br><span class="line">  <span class="comment">// use doc</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// `.exec()` gives you a fully-fledged promise</span></span><br><span class="line"><span class="keyword">var</span> promise = query.<span class="title function_">exec</span>();</span><br><span class="line">assert.<span class="title function_">ok</span>(promise <span class="keyword">instanceof</span> <span class="built_in">require</span>(<span class="string">&#x27;mpromise&#x27;</span>));</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">doc</span>) &#123;</span><br><span class="line">  <span class="comment">// use doc</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h4 id="Plugging-in-your-own-Promises-Library"><a href="#Plugging-in-your-own-Promises-Library" class="headerlink" title="Plugging in your own Promises Library"></a>Plugging in your own Promises Library</h4><blockquote>
<p>New in Mongoose 4.1.0</p>
</blockquote>
<p>기본 사용에서 mpromise가 만족스러웠지만, 고급 사용자는 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">ES6-style promises</a> 같은 <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/bluebird">bluebird</a> 라이브러리를 플러그인으로 넣거나 혹은 네이티브 ES6 를 사용하기를 바랬다. <code>mongoose.Promise</code> 로 좋아하는 ES6 스타일 프로마이즈를 사용할 수 있다.</p>
<blockquote>
<p>Mongoose ES6 native promises, bluebird, and q를 테스트했다. 어떤 라이브러리도 이론적으로<br> Any promise library that exports an ES6-style promise constructor should work in theory, but theory often differs from practice. If you find a bug, open an issue on GitHub</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> query = <span class="title class_">Band</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;Guns N&#x27; Roses&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use native promises</span></span><br><span class="line">mongoose.<span class="property">Promise</span> = <span class="variable language_">global</span>.<span class="property">Promise</span>;</span><br><span class="line">assert.<span class="title function_">equal</span>(query.<span class="title function_">exec</span>().<span class="property">constructor</span>, <span class="variable language_">global</span>.<span class="property">Promise</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use bluebird</span></span><br><span class="line">mongoose.<span class="property">Promise</span> = <span class="built_in">require</span>(<span class="string">&#x27;bluebird&#x27;</span>);</span><br><span class="line">assert.<span class="title function_">equal</span>(query.<span class="title function_">exec</span>().<span class="property">constructor</span>, <span class="built_in">require</span>(<span class="string">&#x27;bluebird&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use q. Note that you **must** use `require(&#x27;q&#x27;).Promise`.</span></span><br><span class="line">mongoose.<span class="property">Promise</span> = <span class="built_in">require</span>(<span class="string">&#x27;q&#x27;</span>).<span class="property">Promise</span>;</span><br><span class="line">assert.<span class="title function_">ok</span>(query.<span class="title function_">exec</span>() <span class="keyword">instanceof</span> <span class="built_in">require</span>(<span class="string">&#x27;q&#x27;</span>).<span class="property">makePromise</span>);</span><br></pre></td></tr></table></figure>




<h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul>
<li><a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/">mongoose doc</a></li>
<li><a target="_blank" rel="noopener" href="http://mongoosejs.com/docs/api.html">mongoose api doc</a></li>
<li><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/mpromise">mpromise</a></li>
<li>bluebird](<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/bluebird">https://www.npmjs.com/package/bluebird</a>)</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">ES6-style promises</a></li>
</ul>
<p>[^1]: <a target="_blank" rel="noopener" href="http://programmingsummaries.tistory.com/325">Promise 란</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-04-01T00:00:00.000Z" title="2017-4-1 9:00:00">2017-04-01</time>&nbsp;게시 됨</span><span class="level-item"><time dateTime="2022-02-24T16:09:27.779Z" title="2022-2-25 1:09:27">2022-02-25</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Linux/">Linux</a><span> / </span><a class="link-muted" href="/categories/Linux/NodeJS/">NodeJS</a></span><span class="level-item">13분안에 읽기 (약 2008 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/04/01/nodejs-2017-04-01-nodejs-install-nvm/">NodeJS / nvm 기반 개발환경 설치</a></h1><div class="content"><p>Node.js를 설치하고 관리할 수 있는 Node Version Manager를 사용한 개발환경 구성에 대해 살펴본다.</p>
<blockquote>
<p>2018-6 <code>npm i</code> 관련 설명 추가<br>{:.right-history}</p>
</blockquote>
<h2 id="버전관리자를-통한-Node-js-개발환경"><a href="#버전관리자를-통한-Node-js-개발환경" class="headerlink" title="버전관리자를 통한 Node.js 개발환경"></a>버전관리자를 통한 Node.js 개발환경</h2><p>Node.js는 커뮤니티 개발을 위주로 업그레이드가 자주 된다. 개발중인 관련 모듈이 업그레이드를 따라가지 못할 경우가 자주 발생할 수 있다. 그래서 실제 개발하는 경우에 Node.js 버전의 변경을 자유롭게 하기 위해서 버전관리자(Node Version Manager) 환경에서 개발을 권장한다. </p>
<p>주요한 버전관리자에는 Nvm, Nodist 등 여러 종류가 있는데, 대부분 리눅스와 맥에서 사용 가능하다. 그리고 윈도우 환경에서는 nvm-windows, nodist를 사용할 수 있다.</p>
<ul>
<li>Linux&#x2F;macOS: <a target="_blank" rel="noopener" href="https://github.com/creationix/nvm">https://github.com/creationix/nvm</a></li>
<li>Windows: <a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist">https://github.com/marcelklehr/nodist</a></li>
</ul>
<p>버전관리자를 설치후 사용 방법은 대동소이 하다. 여기서는 <strong>nvm</strong>을 다룬다.</p>
<p>Shell 은 쉘 프롬프트로 사용자 권한 및 현재 위치를 표시하는데 보통 권한별로 아래 기호를 사용한다.<br/></p>
<ul>
<li><code>$</code> : 사용자 프롬프트</li>
<li><code>#</code> : root 프롬프트</li>
<li><code>~</code> : 사용자 홈 디렉토리</li>
<li><code>/</code> : 루트 디렉토리</li>
<li><code>.</code> : 현재 디렉토리</li>
<li><code>..</code> : 이전 디렉토리</li>
</ul>
<h3 id="nvm-설치"><a href="#nvm-설치" class="headerlink" title="nvm 설치"></a>nvm 설치</h3><p>Linux &#x2F; MacOS는 다음 쉘 스크립을 실행해 설치한다.</p>
<p>curl 이용:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.4/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>wget 이용:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.4/install.sh | bash</span><br></pre></td></tr></table></figure>

<p><em>install.sh</em> 스크립이 설치하는 nvm은 사용자 홈디렉토리 <code>~/.nvm</code> 에 설치된다. (이후 <em>$NVM_HOME</em>이라 하겠다)</p>
<blockquote>
<p><em>$NVM_HOME&#x2F;install.sh</em> 를 실행하면 업그레이드가 진행된다.</p>
</blockquote>
<p>설치후 <em>~&#x2F;.bash_profile</em>, <em>~&#x2F;.profile</em> 등의 프로파일에 <code>nvm.sh</code> 가 실행되도록 아래 스크립이 추가된다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; . <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> <span class="comment"># This loads nvm</span></span><br></pre></td></tr></table></figure>


<h4 id="Node-js-설치"><a href="#Node-js-설치" class="headerlink" title="Node.js 설치"></a>Node.js 설치</h4><p>원격 저장소의 node 목록</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote</span><br><span class="line">nvm ls-remote v6        <span class="comment">#v6.x 버전만 검색</span></span><br></pre></td></tr></table></figure>

<p><code>nvm install</code> 은 해당 node version를 다운로드하고 설치한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install v5          <span class="comment"># node version v5.x 버전중 최종버전</span></span><br></pre></td></tr></table></figure>

<p><code>nvm ls</code> 설치된 node 버전을 확인한다</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ nvm <span class="built_in">ls</span></span><br><span class="line">   v0.9.12</span><br><span class="line">   v0.11.0</span><br><span class="line">   v6.9.1</span><br><span class="line">current:    v6.9.1</span><br></pre></td></tr></table></figure>

<p><code>nvm use</code>로 사용할 node version을 지정한다 - 이것은 사용자의 <code>$PATH</code> 환경변수에 <code>node</code> 경로를 추가해준다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nvm use 6.9.1       <span class="comment">#v6 버전을 사용한다.</span></span><br><span class="line">nvm use v7          <span class="comment">#v7 버전중 최종 버번을 선택한다.</span></span><br></pre></td></tr></table></figure>

<p><code>node</code> 경로를 제거하려면,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm deactivate</span><br></pre></td></tr></table></figure>


<p>로그인후 기본 node 환경으로 지정하려면</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm <span class="built_in">alias</span> default 6.9.1</span><br></pre></td></tr></table></figure>


<h4 id="lts-버전"><a href="#lts-버전" class="headerlink" title="lts 버전"></a>lts 버전</h4><p>Node.js 는 가용 버전이 장기지원을 위해서 <a target="_blank" rel="noopener" href="https://github.com/nodejs/Release">LTS(Long Term Support)</a> 프로그램을 진행하고 있다. 실제 운영 서버는 이런 LTS 버전을 중심으로 가동될 것이다. <strong>nvm</strong> 도 lts 만을 선별해서 설치하고 관리할 수 있다.</p>
<p>현재 LTS 버전중 최신버전만을 출력하려면,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm ls-remote --lts |grep Latest</span><br></pre></td></tr></table></figure>


<h4 id="전역-패키지-통합"><a href="#전역-패키지-통합" class="headerlink" title="전역 패키지 통합"></a>전역 패키지 통합</h4><p>nvm에서 새로운 node 버전을 설치하면서 기존 node 버전에서 사용중인 패키지를 통합해서 설치 할 수 있다.  예를 들어 최신 8 버전을 설치하며 사용중인 기존 6버전 패키지를 함께 설치하려면,</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install v8 --reinstall-packages-from=v8.0.1</span><br></pre></td></tr></table></figure>



<h4 id="Default-alias-잘-못-된-경우"><a href="#Default-alias-잘-못-된-경우" class="headerlink" title="Default alias 잘 못 된 경우"></a>Default alias 잘 못 된 경우</h4><p>새로 로그인 혹은 버전 변경시 다음 메시지 출력,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">N/A: version &quot;N/A -&gt; N/A&quot; is not yet installed.</span><br></pre></td></tr></table></figure>

<p>이 경우 가능성은 제거한 버전이 default 로 지정되서 그런듯 하다, 아래의 경우 default가 v8.7 인데 삭제해서 없기 때문이다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ nvm ls</span><br><span class="line">-&gt;      v6.11.5</span><br><span class="line">        v7.10.1</span><br><span class="line">default -&gt; v8.7.0 (-&gt; N/A)</span><br><span class="line">node -&gt; stable (-&gt; v7.10.1) (default)</span><br><span class="line">stable -&gt; 7.10 (-&gt; v7.10.1) (default)</span><br><span class="line">iojs -&gt; N/A (default)</span><br><span class="line">lts/* -&gt; lts/boron (-&gt; v6.11.5)</span><br><span class="line">lts/argon -&gt; v4.8.5 (-&gt; N/A)</span><br><span class="line">lts/boron -&gt; v6.11.5</span><br></pre></td></tr></table></figure>

<p>그래서 default 를 설치된 버전으로 변경해서 지정해 주면 위 메시지가 나오지 않는다.</p>
<br/>
<br/>
### nodist

<p>Nodist 는 윈도우즈 환경에서 Nvm과 비슷하게 nodejs의 버전을 관리할 수 있다.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist">https://github.com/marcelklehr/nodist</a></li>
<li>윈도우즈 인스톨러로 다운로드 가능.</li>
<li>git 혹은 zip 으로 다운로드 가능.</li>
</ul>
<h4 id="인스톨러로-설치시"><a href="#인스톨러로-설치시" class="headerlink" title="인스톨러로 설치시"></a>인스톨러로 설치시</h4><p><a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist/releases">nodist releases</a> 에서 nodist 인스톨러를 다운받아 설치한다.</p>
<h4 id="git으로-설치"><a href="#git으로-설치" class="headerlink" title="git으로 설치"></a>git으로 설치</h4><p>윈도우즈 <code>git</code>으로 clone을 해오고, 윈도우의 환경설정 변수를 설정한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;git clone git://github.com/marcelklehr/nodist.git</span><br><span class="line">C:\&gt;setx /M PATH &quot;C:\users\thinkbee\nodist\bin;%PATH%&quot;</span><br><span class="line">C:\&gt;setx /M NODIST_PREFIX &quot;C:\users\thinkbee\nodist&quot;</span><br></pre></td></tr></table></figure>

<p>이제 <code>cmd</code>에서 <code>nodist</code>의 업데이트를 실행해주고 사용한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\&gt;nodist selfupdate</span><br></pre></td></tr></table></figure>

<p>기타 다른 환경에서 설치 및 사용법은 <a target="_blank" rel="noopener" href="https://github.com/marcelklehr/nodist">nodist</a> 에서 확인한다.</p>
<hr>
<h3 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h3><p><code>npm</code> 은 nodejs 패키지 관리자로 선택한 모듈을 설치, 갱신 및 삭제할 수 있고, 스크립팅을 통해 프로세스 관리까지 할 수 있다.</p>
<h4 id="npm-init"><a href="#npm-init" class="headerlink" title="npm init"></a>npm init</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y[--yes]</span><br></pre></td></tr></table></figure>

<p>이렇게 생성된 package.json 은,</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;myproject&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;main&quot;</span><span class="punctuation">:</span> <span class="string">&quot;index.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;license&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ISC&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>npm 으로 추가하는 모듈은 package.json에 의존성을 추가할 수 있다. <code>npm install --save</code> 별도의 플래그를 사용한다. 그리고 <code>--dev</code> 플래그를 주면 developer dependency에 추가해 준다.</p>
<h4 id="save"><a href="#save" class="headerlink" title="save"></a>save</h4><p>npm &lt; 5 이하 버전은 <code>-S</code> 혹은 <code>--save</code> 옵션으로 모듈 의존성을 <em>package.json</em> 에 추가한다.</p>
<p><code>node</code>를 설치후 <code>npm</code>을 업그레이드 해준다. npm 자체는 다음 같이 업그레이드 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -g npm</span><br><span class="line">npm install npm@latest -g</span><br></pre></td></tr></table></figure>


<h4 id="Outdated-module"><a href="#Outdated-module" class="headerlink" title="Outdated module"></a>Outdated module</h4><p>현재 package.json 에 설치된 버전과 명시된 버전 그리고 최신 버전과 차이를 알 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm outdated</span><br><span class="line">Package                  Current  Wanted  Latest  Location</span><br><span class="line">body-parser               1.15.2  1.15.2  1.18.2  application-name</span><br><span class="line">debug                      0.7.4   0.7.4   3.1.0  application-name</span><br></pre></td></tr></table></figure>

<p>최신 버전으로 설치를 하려면 package.json을 버전코드로 변경하고 업데이트를 진행한다.</p>
<p>모든 패키지를 업데이트할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br><span class="line">+ mongoose@4.13.1</span><br><span class="line">added 1 package, removed 4 packages and updated 2 packages in 32.975s</span><br></pre></td></tr></table></figure>

<p>특정 모듈만 업데이트하려면 패키지를 명시하면 된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update debug</span><br></pre></td></tr></table></figure>


<h4 id="npm-upgrade"><a href="#npm-upgrade" class="headerlink" title="npm upgrade"></a>npm upgrade</h4><p><code>node</code>를 설치후 <code>npm</code>을 업그레이드 해준다. npm 자체는 다음 같이 업그레이드 한다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i -g npm</span><br><span class="line">npm install npm@latest -g</span><br></pre></td></tr></table></figure>


<h4 id="Outdated-module-1"><a href="#Outdated-module-1" class="headerlink" title="Outdated module"></a>Outdated module</h4><p>현재 package.json 에 설치된 버전과 명시된 버전 그리고 최신 버전과 차이를 알 수 있다.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm outdated</span><br><span class="line">Package                  Current  Wanted  Latest  Location</span><br><span class="line">body-parser               1.15.2  1.15.2  1.18.2  application-name</span><br><span class="line">debug                      0.7.4   0.7.4   3.1.0  application-name</span><br></pre></td></tr></table></figure>

<p>최신 버전으로 설치를 하려면 package.json을 버전코드로 변경하고 업데이트를 진행한다.<br>혹은 모든 패키지를 업데이트할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm update</span><br><span class="line">+ mongoose@4.13.1</span><br><span class="line">added 1 package, removed 4 packages and updated 2 packages in 32.975s</span><br></pre></td></tr></table></figure>


<h4 id="npm-in-vs-npm-up"><a href="#npm-in-vs-npm-up" class="headerlink" title="npm in vs. npm up"></a><code>npm in</code> vs. <code>npm up</code></h4><p>install 과 update는 package.json 에 명시된 버전에 대응해 실행된다.</p>
<ul>
<li>npm install installs all modules that are listed on package.json file and their dependencies.</li>
<li>npm update updates all packages in the node_modules directory and their dependencies.</li>
<li>npm install express installs only the express module and its dependencies.</li>
<li>npm update express updates the express module and its dependencies.</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12478679/npm-install-vs-update-whats-the-difference">stackoverflow: npm install vs update</a> 에 따르면 버전 관리에 따른 차이를 보인다.</p>
<p>개별 모듈만 업그레이드 하려면 <code>install @latest</code> 같이 사용한다. 다음 같이 npm outdated 로 프로젝트 버전 상태를 확인해 보면</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ npm outdated</span><br><span class="line">Package                     Current   Wanted      Latest  Location</span><br><span class="line">agenda                        0.9.0    0.9.1       1.0.3  www_app</span><br><span class="line">body-parser                  1.15.2   1.15.2      1.18.2  www_app</span><br><span class="line">charset                       1.0.0    1.0.1       1.0.1  www_app</span><br><span class="line">cheerio                      0.22.0   0.22.0  1.0.0-rc.2  www_app</span><br><span class="line">cookie-parser                 1.3.5    1.3.5       1.4.3  www_app</span><br><span class="line">debug                         2.2.0    2.2.0       3.1.0  www_app</span><br><span class="line">ejs                           2.5.7    2.5.8       2.5.8  www_app</span><br><span class="line">express                      4.14.1   4.14.1      4.16.3  www_app</span><br><span class="line">iconv                         2.2.1    2.3.0       2.3.0  www_app</span><br><span class="line">mongoose                     4.13.2  4.13.12      5.0.13  www_app</span><br><span class="line">morgan                        1.7.0    1.7.0       1.9.0  www_app</span><br><span class="line">multer                        1.2.0    1.3.0       1.3.0  www_app</span><br><span class="line">passport                      0.2.2    0.2.2       0.4.0  www_app</span><br><span class="line">passport-local-mongoose       1.3.0    1.3.0       5.0.0  www_app</span><br><span class="line">pug                      2.0.0-rc.4    2.0.3       2.0.3  www_app</span><br><span class="line">request                      2.83.0   2.85.0      2.85.0  www_app</span><br><span class="line">serve-favicon                 2.3.0    2.3.2       2.5.0  www_app</span><br></pre></td></tr></table></figure>

<p><code>i</code> 명령으로 현재 package.json에 명시된 버전이 설치된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm i mongoose</span><br><span class="line">+ mongoose@4.13.12</span><br><span class="line">updated 7 packages in 17.037s</span><br></pre></td></tr></table></figure>

<p>@latest 제한자로 최신 버전으로 업그레이드 할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm i mongoose@latest</span><br><span class="line">+ mongoose@5.0.13</span><br></pre></td></tr></table></figure>


<p>어쨌든 버전 갱신을 목적으로 하면 <code>npm i</code> 를 일반적으로 써도 무방하다. </p>
<h3 id="Process-management"><a href="#Process-management" class="headerlink" title="Process management"></a>Process management</h3><p>다음 <a href=""></a> 글로 좀더 깊은 내용으로 옮겼다.</p>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/qkboo_400.png" alt="Gangtai"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Gangtai</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Paju, South Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">56</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">15</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">103</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/thinkbee" target="_blank" rel="noopener">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/thinkbee"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/gtko"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">링크</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.thinkbee.kr" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Thinkbee.kr</span></span><span class="level-right"><span class="level-item tag">www.thinkbee.kr</span></span></a></li></ul></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">업데이트 소식 받기</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI/"><span class="level-start"><span class="level-item">AI</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">25</span></span></a><ul><li><a class="level is-mobile" href="/categories/Linux/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/NodeJS/"><span class="level-start"><span class="level-item">NodeJS</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Linux/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/NodeJS/"><span class="level-start"><span class="level-item">NodeJS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/NodeJS/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Photoshop/"><span class="level-start"><span class="level-item">Photoshop</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/"><span class="level-start"><span class="level-item">Programming</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/Programming/Angular/"><span class="level-start"><span class="level-item">Angular</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Programming/Angularjs/"><span class="level-start"><span class="level-item">Angularjs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Raspberry-Pi/"><span class="level-start"><span class="level-item">Raspberry Pi</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/Raspberry-Pi/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">10</span></span></a><ul><li><a class="level is-mobile" href="/categories/Raspberry-Pi/Linux/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="/categories/jekyll/"><span class="level-start"><span class="level-item">jekyll</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-02-24T20:50:12.225Z">2022-02-25</time></p><p class="title"><a href="/2022/02/25/hello-world/">blog.thinkbee.kr 이전 작업중입니다.</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-03-06T00:00:00.000Z">2020-03-06</time></p><p class="title"><a href="/2020/03/06/jekyll-2020-03-06-jekyll-mmtheme-macos/">macOS에서 Jekyll 설치와 Minimalmistake Theme</a></p><p class="categories"><a href="/categories/jekyll/">jekyll</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-02-02T09:00:00.000Z">2020-02-02</time></p><p class="title"><a href="/2020/02/02/linux-2020-02-02-letsencrypt%EB%B0%9C%EA%B8%89/">HTTPS를 위한 공인인증서 - Let&#039;s Encrypt 발급</a></p><p class="categories"><a href="/categories/Linux/">Linux</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-20T03:00:00.000Z">2019-12-20</time></p><p class="title"><a href="/2019/12/20/linux-2019-12-20-mongodb-config/">MongoDB 구성 설정과 사용자 인증 사용</a></p><p class="categories"><a href="/categories/Linux/">Linux</a> / <a href="/categories/Linux/Database/">Database</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2019-12-20T01:00:00.000Z">2019-12-20</time></p><p class="title"><a href="/2019/12/20/linux-2019-12-20-mongodb-4-2-install-arm64/">MongoDB Community Edition 4.2 설치 - ARM64 Ubuntu/Debian Armbian</a></p><p class="categories"><a href="/categories/Linux/">Linux</a> / <a href="/categories/Linux/Database/">Database</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">아카이브</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/02/"><span class="level-start"><span class="level-item">2월 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">3월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">2월 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">12월 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">9월 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/10/"><span class="level-start"><span class="level-item">10월 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/08/"><span class="level-start"><span class="level-item">8월 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/07/"><span class="level-start"><span class="level-item">7월 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/06/"><span class="level-start"><span class="level-item">6월 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/12/"><span class="level-start"><span class="level-item">12월 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/11/"><span class="level-start"><span class="level-item">11월 2017</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/10/"><span class="level-start"><span class="level-item">10월 2017</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/09/"><span class="level-start"><span class="level-item">9월 2017</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/07/"><span class="level-start"><span class="level-item">7월 2017</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/06/"><span class="level-start"><span class="level-item">6월 2017</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/05/"><span class="level-start"><span class="level-item">5월 2017</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/04/"><span class="level-start"><span class="level-item">4월 2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/12/"><span class="level-start"><span class="level-item">12월 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2016/02/"><span class="level-start"><span class="level-item">2월 2016</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ARM/"><span class="tag">ARM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Armbian/"><span class="tag">Armbian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Artificial-Intelligence/"><span class="tag">Artificial Intelligence</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debian/"><span class="tag">Debian</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Debian-Strech/"><span class="tag">Debian Strech</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JSON-Web-Token/"><span class="tag">JSON Web Token</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JWT-Toekn/"><span class="tag">JWT Toekn</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEAP-15-0/"><span class="tag">LEAP 15.0</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LEAP-42-3/"><span class="tag">LEAP 42.3</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Numpy/"><span class="tag">Numpy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odroid/"><span class="tag">Odroid</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Odroid-C2/"><span class="tag">Odroid C2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Orange-Pi/"><span class="tag">Orange Pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspberry-Pi/"><span class="tag">Raspberry Pi</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspberry-Pi-3/"><span class="tag">Raspberry Pi 3</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Raspbian/"><span class="tag">Raspbian</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SD-Card/"><span class="tag">SD Card</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Scientific/"><span class="tag">Scientific</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TensorFlow/"><span class="tag">TensorFlow</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript-Tutorials/"><span class="tag">TypeScript Tutorials</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ubuntu/"><span class="tag">Ubuntu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/X11/"><span class="tag">X11</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/amd64/"><span class="tag">amd64</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/angular4/"><span class="tag">angular4</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/angularjs/"><span class="tag">angularjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/apache/"><span class="tag">apache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/arm64/"><span class="tag">arm64</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/armbian/"><span class="tag">armbian</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/banana-pi/"><span class="tag">banana pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/bootstrap-4/"><span class="tag">bootstrap 4</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/brew/"><span class="tag">brew</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/certificate-ssl/"><span class="tag">certificate ssl</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/clipping-mask/"><span class="tag">clipping-mask</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/collages/"><span class="tag">collages</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cross-compiler/"><span class="tag">cross compiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/debian/"><span class="tag">debian</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firewall/"><span class="tag">firewall</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/firewalld/"><span class="tag">firewalld</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/https/"><span class="tag">https</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/install/"><span class="tag">install</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jasmine/"><span class="tag">jasmine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jekyll/"><span class="tag">jekyll</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter/"><span class="tag">jupyter</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter-notebook/"><span class="tag">jupyter notebook</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/jupyter-notebook/"><span class="tag">jupyter-notebook</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/karma/"><span class="tag">karma</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leap-15/"><span class="tag">leap 15</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leap-42-3/"><span class="tag">leap 42.3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/linux/"><span class="tag">linux</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lvm/"><span class="tag">lvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/lvm2/"><span class="tag">lvm2</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macOS/"><span class="tag">macOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macos/"><span class="tag">macos</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/markdown/"><span class="tag">markdown</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/micro-SD-Card/"><span class="tag">micro SD Card</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/middleware/"><span class="tag">middleware</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongodb/"><span class="tag">mongodb</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/mongoose/"><span class="tag">mongoose</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs/"><span class="tag">nodejs</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nodejs-tutorials/"><span class="tag">nodejs tutorials</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nvm/"><span class="tag">nvm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid/"><span class="tag">odroid</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid-c2/"><span class="tag">odroid c2</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/odroid-c2/"><span class="tag">odroid-c2</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openSUSE/"><span class="tag">openSUSE</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensuse/"><span class="tag">opensuse</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/opensuse-leap-15/"><span class="tag">opensuse leap 15</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/orange-pi/"><span class="tag">orange pi</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/photoshop/"><span class="tag">photoshop</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/raspberry-pi/"><span class="tag">raspberry pi</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/security/"><span class="tag">security</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssl/"><span class="tag">ssl</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/synergy/"><span class="tag">synergy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/terminal/"><span class="tag">terminal</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tmux/"><span class="tag">tmux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ubuntu/"><span class="tag">ubuntu</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/unit-testing/"><span class="tag">unit testing</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/virtualenv/"><span class="tag">virtualenv</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/virtualenvwrapper/"><span class="tag">virtualenvwrapper</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webdav/"><span class="tag">webdav</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%8D%B0%EB%B9%84%EC%95%88/"><span class="tag">데비안</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%8D%B0%EC%9D%B4%EC%95%88/"><span class="tag">데이안</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%9D%BC%EC%A6%88%EB%B2%A0%EB%A6%AC%ED%8C%8C%EC%9D%B4/"><span class="tag">라즈베리파이</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%9D%BC%EC%A6%88%EB%B9%84%EC%95%88/"><span class="tag">라즈비안</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A6%AC%EB%88%85%EC%8A%A4/"><span class="tag">리눅스</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A7%88%ED%81%AC%EB%8B%A4%EC%9A%B4/"><span class="tag">마크다운</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%A7%A5%EC%98%A4%EC%97%90%EC%8A%A4/"><span class="tag">맥오에스</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%94%EB%82%98%EB%82%98%ED%8C%8C%EC%9D%B4/"><span class="tag">바나나파이</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EB%B0%A9%ED%99%94%EB%B2%BD/"><span class="tag">방화벽</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%98%A4%EB%A0%8C%EC%A7%80%ED%8C%8C%EC%9D%B4/"><span class="tag">오렌지파이</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9A%B0%EB%B6%84%ED%88%AC/"><span class="tag">우분투</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9B%B9%ED%86%A0%ED%81%B0/"><span class="tag">웹토큰</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%9D%B8%EA%B3%B5%EC%A7%80%EB%8A%A5/"><span class="tag">인공지능</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%EC%A0%84%EC%9B%90%EA%B4%80%EB%A6%AC/"><span class="tag">전원관리</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%8C%8C%EC%9D%B4%EC%8D%AC/"><span class="tag">파이썬</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%ED%8C%8C%EC%9D%B4%EC%96%B4%EC%9B%94/"><span class="tag">파이어월</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">광고</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1465716454138955" data-ad-slot="4883770640" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="구독"></div></div></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/thinkbee_logo.png" alt="Blogging through Programming" height="28"></a><p class="is-size-7"><span>&copy; 2022 Gangtai</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>